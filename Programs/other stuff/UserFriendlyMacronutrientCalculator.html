<html>
<head>
<title>User Friendly Macronutrient Calculator</title>
</head>
<body>
<h3>
User Friendly Macronutrient Calculator (use Google Chrome) <input type="button" id="refreshPage" value="Return to Home" /> <input type="button" id="instructions" value="Click Me For Instructions!" />
</h3>
<form id="nutritionForm" action="" method="post">
<table id="inputForm" border="0">
<tr>
<td>Item Name: <select id="itemName" name="itemName">
</select>
</td>
</tr>
<tr>
<td>Mode: <input type="radio" name="unitsOfMeasurement" value="Weight" id="weightRadio" onchange="handleChange()" /> Weight <input type="radio" name="unitsOfMeasurement" value="Servings" id="servingsRadio" onchange="handleChange()" /> Servings
</td>
</tr>
<tr>
<td id="unitTypeTD">Weight: <input type="text" name="weight" id="weight" value="" size="5" /> <select id="weightUnits" name="weightUnits">
<option selected="selected">g</option>
<option value="ounces">oz</option>
<option value="pounds">lb</option>
<option value="kilograms">kg</option>
</select>
</td>
</tr>
<tr>
<td><input type="button" name="addBtn" value="Insert Row" /> <input type="button" name="resetArray" value="Delete All Rows" /></td>
</tr>
<tr>
<td>&nbsp;
</tr>
</td>
<tr>
<td><input type="button" name="addNutritionFacts" value="Add Nutrition Facts" /></td>
</tr>
<tr>
<td><input type="button" name="deleteNutritionFacts" value="Delete Nutrition Facts" id="deleteNutritionFacts" /></td>
</tr>
<tr>
<td>&nbsp;
</tr>
</td>
<tr>
<td><input type="button" name="onebyone" id="onebyone" value="onebyone" /></td>
</tr>
<tr>
<td><input type="button" name="twobytwo" id="twobytwo" value="twobytwo"></td>
</tr>
<tr>
<td><input type="button" name="threebythree" id="threebythree" value="threebythree"></td>
</tr>
</table>
</form>
<table id="myTable" border="0" style="position: absolute; top: 55px; left: 370px;">
<tr>
<td>Index</td>
<td>Item Name</td>
<td>Weight(g)</td>
<td>Calories</td>
<td>Total Fat(g)</td>
<td>Saturated Fat(g)</td>
<td>Cholesterol(mg)</td>
<td>Sodium(mg)</td>
<td>Carbs(g)</td>
<td>Fiber(g)</td>
<td>Sugars(g)</td>
<td>Protein(g)</td>
<td>Current Date & Time</td>
</tr>
<tr>
<td>TOTALS</td>
<td></td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td></td>
</table>
<form id="deleteForm" action="" method="post">
<table id="deleteTable" border="0" style="position: absolute; top: 55px; left: 7px; visibility: hidden">
<tr>
<td>Item to delete: <select id="itemToDelete" name="itemToDelete">
</select></td>
</tr>
<tr>
<td><input type="button" id="deleteInformation" value="Delete Information" /> <input type="button" value="Cancel" id="cancelButton2" /></td>
</tr>
</table>
</form>
<form id="foodStorageForm" action="" method="post">
<table id="foodStorage" border="0" style="position: absolute; top: 55px; left: 7px; visibility: hidden;">
<tr>
<td>Food Name: <input type="text" name="foodName_inp" id="foodName_inp" value="" size="30" />
</td>
</tr>
<tr>
<td>Serving Size(g): <input type="text" name="servingSize_inp" id="servingSize_inp" value="" size="5" />
</td>
</tr>
<tr>
<td>Calories per serving (g): <input type="text" name="calories_inp" id="calories_inp" value="" size="5" />
</td>
</tr>
<tr>
<td>Total Fat per serving (g): <input type="text" name="totalFat_inp" id="totalFat_inp" value="" size="5" />
</td>
</tr>
<tr>
<td>Saturated Fat per serving (g): <input type="text" name="saturatedFat_inp" id="saturatedFat_inp" value="" size="5" />
</td>
</tr>
<tr>
<td>Cholesterol per serving (mg): <input type="text" name="cholesterol_inp" id="cholesterol_inp" value="" size="5" />
</td>
</tr>
<tr>
<td>Sodium per serving (mg): <input type="text" name="sodium_inp" id="sodium_inp" value="" size="5" />
</td>
</tr>
<tr>
<td>Carbs per serving (g): <input type="text" name="carbs_inp" id="carbs_inp" value="" size="5" />
</td>
</tr>
<tr>
<td>Fiber per serving (g): <input type="text" name="fiber_inp" id="fiber_inp" value="" size="5" />
</td>
</tr>
<tr>
<td>Sugars per serving (g): <input type="text" name="sugars_inp" id="sugars_inp" value="" size="5" />
</td>
</tr>
<tr>
<td>Protein per serving (g): <input type="text" name="protein_inp" id="protein_inp" value="" size="5" />
</td>
</tr>
<tr>
<td><input type="button" id="inputNutritionFacts" value="Store Information" /> <input type="button" value="Cancel" id="cancelButton" /></td>
</tr>
</table>
</form>
<form id="onebyoneform" action="" method="post">
<table id="onebyonetable" border="0" style="position: absolute; top: 320px; left: 7px; visibility: hidden;">
<tr>
<td>Item Name: <select id="itemName1" name="itemName1">
</select>
</td>
</tr>
<tr>
<td>Nutrient Category: <select id="macronutrient1" name="macronutrient1">
<option selected="selected">Calories</option>
<option>Total Fat</option>
<option>Carbs</option>
<option>Protein</option>
</select>
</td>
</tr>
<tr>
<td>Goal(g): <input type="text" name="goalWeight" id="goalWeight" value="" size="1" />
</td>
</tr>
<tr>
<td><input type="button" name="onebyonecalculate" id="onebyonecalculate" value="Calculate" /></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td><input type="button" name="onebyonereturn" id="onebyonereturn" value="Return To Home" /> <input style="visibility: hidden" type="button" name="onebyoneinsert" id="onebyoneinsert" value="Insert Results To Table" /></td>
</tr>
</table>
</form>
<form id="twobytwoform" action="" method="post">
<table id="twobytwotable" border="0" style="position: absolute; top: 220px; left: 7px; visibility: hidden;">
<tr>
<td>Item Name: <select id="itemName3" name="itemName3">
</select>
</td>
</tr>
<tr>
<td>Item Name: <select id="itemName4" name="itemName4">
</select>
</td>
</tr>
<tr>
<td>Nutrient Category1: <select id="macronutrient1" name="macronutrient1">
<option selected="selected">Calories</option>
<option>Total Fat</option>
<option>Carbs</option>
<option>Protein</option>
</select>
</td>
</tr>
<tr>
<td>Goal(g): <input type="text" name="goalWeight1" id="goalWeight1" value="" size="1" />
</td>
</tr>
<tr>
<td>Nutrient Category2: <select id="macronutrient2" name="macronutrient2">
<option selected="selected">Calories</option>
<option>Total Fat</option>
<option>Carbs</option>
<option>Protein</option>
</select>
</td>
</tr>
<tr>
<td>Goal(g): <input type="text" name="goalWeight2" id="goalWeight2" value="" size="1" />
</td>
</tr>
<tr>
<td><input type="button" name="twobytwocalculate" id="twobytwocalculate" value="Calculate" /></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td><input type="button" name="twobytworeturn" id="twobytworeturn" value="Return To Home" /> <input style="visibility: hidden" type="button" name="twobytwoinsert" id="twobytwoinsert" value="Insert Results To Table" /></td>
</tr>
</table>
</form>
<form id="threebythreeform" action="" method="post">
<table id="threebythreetable" border="0" style="position: absolute; top: 140px; left: 7px; visibility: hidden;">
<tr>
<td>Item Name: <select id="itemName5" name="itemName5">
</select>
</td>
</tr>
<tr>
<td>Item Name: <select id="itemName6" name="itemName6">
</select>
</td>
</tr>
<tr>
<td>Item Name: <select id="itemName7" name="itemName7">
</select>
</td>
</tr>
<tr>
<td>Nutrient Category1: <select id="macronutrient1" name="macronutrient1">
<option selected="selected">Calories</option>
<option>Total Fat</option>
<option>Carbs</option>
<option>Protein</option>
</select>
</td>
</tr>
<tr>
<td>Goal(g): <input type="text" name="goalWeight1" id="goalWeight1" value="" size="1" />
</td>
</tr>
<tr>
<td>Nutrient Category2: <select id="macronutrient2" name="macronutrient2">
<option selected="selected">Calories</option>
<option>Total Fat</option>
<option>Carbs</option>
<option>Protein</option>
</select>
</td>
</tr>
<tr>
<td>Goal(g): <input type="text" name="goalWeight2" id="goalWeight2" value="" size="1" />
</td>
</tr>
<tr>
<td>Nutrient Category3: <select id="macronutrient3" name="macronutrient3">
<option selected="selected">Calories</option>
<option>Total Fat</option>
<option>Carbs</option>
<option>Protein</option>
</select>
</td>
</tr>
<tr>
<td>Goal(g): <input type="text" name="goalWeight3" id="goalWeight3" value="" size="1" />
</td>
</tr>
<tr>
<td><input type="button" name="threebythreecalculate" id="threebythreecalculate" value="Calculate" /></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td><input type="button" name="threebythreereturn" id="threebythreereturn" value="Return To Home" /> <input style="visibility: hidden" type="button" name="threebythreeinsert" id="threebythreeinsert" value="Insert Results To Table" /></td>
</tr>
</table>
</form>
<form id="deleteRowForm" action="" method="post">
<table id="deleteRowTable" border="0" style="position: absolute; top: 55px; left: 7px; visibility: hidden;">
<tr>
<td>Index To Delete: <select id="indexToDelete" name="indexToDelete">
</select>
</td>
</tr>
<tr>
<td><input type="button" name="deleteRowButton" id="deleteRowButton" value="Delete Row" /></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td><input type="button" name="deleteRowReturn" id="deleteRowReturn" value="Return To Home" /></td>
</tr>
</table>
</form>
<h3 style="position: absolute; left: 4px; top: 350px; visibility: hidden">Notes</h3>
<p style="position: absolute; left: 4px; top: 380px; width: 328px; visibility: hidden">
Calories: 2700 <br>Protein: 121g<br>Fat: 60g<br>Carbs: 419g<br>Sodium: less than 2300mg<br>Cholesterol: less than 300mg<br>Sugars: less than 36g<br>---<br>Whole egg = 56g, egg white = 46g. 3 whole eggs = 168g,
5 egg white = 230g.<br>---<br>Pre-workout is 37.21g of peanuts, 45.19g of cheerios<br>Post-workout is 35.39g of peanuts, 77.13g of cheerios<br>water drinking: 17 to 20 oz 2-3 hrs before exercising and another 8 oz 30 min before
working out 7-10oz every 10 to 20 min during exercise, 8oz within 30 mins after exercising
</p>
<input type="button" name="deleteRow" id="deleteRow" value="Delete Row By Index" />
<br>
<br>
<br>
<input type="button" name="alertNutritionFacts" id="alertNutritionFacts" value="Display Nutrition Facts" />
<br>
<br>
<br>
<br>
<br>
<br>
<br> Notes Section
<input type="button" name="saveNotes" id="saveNotes" value="Save Notes" />
<br>
<br>
<textarea rows="12" cols="25" id="textArea"></textarea>
<textarea rows="100" cols="70" id="textAreaForNutritionFacts" style="position: absolute; left: 5px; top: 45px; visibility: hidden"></textarea>
<script type="text/javascript">
	var arrayOfElements_GLOBAL;
	var arrayOfFoodNames_GLOBAL;
	var arrayOfServingSizes_GLOBAL;
	var arrayOfCalories_GLOBAL;
	var arrayOfTotalFat_GLOBAL;
	var arrayOfSaturatedFat_GLOBAL;
	var arrayOfCholesterol_GLOBAL;
	var arrayOfSodium_GLOBAL;
	var arrayOfCarbs_GLOBAL;
	var arrayOfFiber_GLOBAL;
	var arrayOfSugars_GLOBAL;
	var arrayOfProtein_GLOBAL;
	var num_cols_GLOBAL = 13;
	var idxValue_GLOBAL;
	var totalRows_GLOBAL = 1;
	myTable.rows[0].style.backgroundColor = "#ccf5ff";
	myTable.rows[totalRows_GLOBAL].style.backgroundColor = "#ccf5ff";
	var onebyonecalculateFood1NameResult_GLOBAL;
	var onebyonecalcualteFood1WeightResult_GLOBAL;
	var twobytwocalculateFood1NameResult_GLOBAL;
	var twobytwocalculateFood2NameResult_GLOBAL;
	var twobytwocalcualteFood1WeightResult_GLOBAL;
	var twobytwocalcualteFood2WeightResult_GLOBAL;
	var threebythreecalculateFood1NameResult_GLOBAL;
	var threebythreecalculateFood2NameResult_GLOBAL;
	var threebythreecalculateFood3NameResult_GLOBAL;
	var threebythreecalcualteFood1WeightResult_GLOBAL;
	var threebythreecalcualteFood2WeightResult_GLOBAL;
	var threebythreecalcualteFood3WeightResult_GLOBAL;
	document.getElementById("nutritionForm").addBtn.onclick = main;
	document.getElementById("nutritionForm").resetArray.onclick = ResetTable;
	document.getElementById("nutritionForm").addNutritionFacts.onclick = addNutritionFacts;
	document.getElementById("foodStorageForm").inputNutritionFacts.onclick = storeNutritionFacts;
	document.getElementById("nutritionForm").deleteNutritionFacts.onclick = deleteNutritionFacts;
	document.getElementById("foodStorageForm").cancelButton.onclick = cancelNutritionFact;
	document.getElementById("deleteForm").cancelButton2.onclick = cancelNutritionFact;
	document.getElementById("deleteForm").deleteInformation.onclick = deleteInformation;
	document.getElementById("nutritionForm").onebyone.onclick = oneByOneInterface;
	document.getElementById("onebyoneform").onebyonecalculate.onclick = calculateonebyone;
	document.getElementById("onebyoneform").onebyonereturn.onclick = cancelNutritionFact;
	document.getElementById("nutritionForm").twobytwo.onclick = twoByTwoInterface;
	document.getElementById("twobytwoform").twobytwocalculate.onclick = calculatetwobytwo;
	document.getElementById("twobytwoform").twobytworeturn.onclick = cancelNutritionFact;
	document.getElementById("saveNotes").onclick = saveNotes;
	document.getElementById("deleteRow").onclick = deleteRowInterface;
	document.getElementById("deleteRowReturn").onclick = cancelNutritionFact;
	document.getElementById("deleteRowButton").onclick = deleteRowByIndex;
	document.getElementById("alertNutritionFacts").onclick = alertAllNutritionFacts;
	document.getElementById("refreshPage").onclick = cancelNutritionFact;
	document.getElementById("instructions").onclick = showInstructions;
	document.getElementById("nutritionForm").threebythree.onclick = threeBythreeInterface;
	document.getElementById("threebythreeform").threebythreecalculate.onclick = calculatethreebythree;
	document.getElementById("threebythreeform").threebythreereturn.onclick = cancelNutritionFact;
	document.getElementById("onebyoneform").onebyoneinsert.onclick = onebyoneinsertfunc;
	document.getElementById("twobytwoform").twobytwoinsert.onclick = twobytwoinsertfunc;
	document.getElementById("threebythreeform").threebythreeinsert.onclick = threebythreeinsertfunc;
	var totals_GLOBAL = [];
	for (var i = 0; i < num_cols_GLOBAL; i++) {
		totals_GLOBAL.push(0);
	}

	function handleChange() {

		if (document.getElementById("weightRadio").checked == true) {
			localStorage.setItem("radioButtonValue", "weight");
			document.getElementById("weightUnits").style.visibility = '';
			document.getElementById("unitTypeTD").innerHTML = "Weight:  <input type = \"text\" name = \"weight\" id = \"weight\" value = \"\" size = \"5\" /> <select style = \"visibility:visible\" id = \"weightUnits\" name = \"weightUnits\"><option selected = \"selected\"> g </option><option value = \"ounces\"> oz </option><option value = \"pounds\"> lb </option><option value = \"kilograms\"> kg </option></select>";
		} else {
			localStorage.setItem("radioButtonValue", "servings");
			document.getElementById("weightUnits").style.visibility = 'hidden';
			document.getElementById("unitTypeTD").innerHTML = "Servings: <input type = \"text\" name = \"weight\" id = \"weight\" value = \"\" size = \"5\" />  <select style =\"visibility:hidden\" id = \"weightUnits\" name = \"weightUnits\"><option selected = \"selected\"> g </option><option value = \"ounces\"> oz </option><option value = \"pounds\"> lb </option><option value = \"kilograms\"> kg </option></select>";
		}
	}

	function confirmExit() {
		var text = document.getElementById("textArea").value;
		var textFromStorage = localStorage.getItem("storedTextFromTextArea");
		document.getElementById("inputForm").style.visibility = 'hidden';
		document.getElementById("myTable").style.visibility = 'hidden';
		document.getElementById("foodStorage").style.visibility = 'hidden';
		document.getElementById("deleteRow").style.visibility = 'hidden';
		document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
		document.getElementById("weightUnits").style.visibility = 'hidden';
		document.getElementById("deleteTable").style.visibility = 'hidden';
		document.getElementById("textAreaForNutritionFacts").style.visibility = 'hidden';
		document.getElementById("deleteRowTable").style.visibility = 'hidden';
		document.getElementById("twobytwotable").style.visibility = 'hidden';
		document.getElementById("onebyonetable").style.visibility = 'hidden';
		document.getElementById("threebythreetable").style.visibility = 'hidden';
		document.getElementById("textArea").style.visibility = '';
		document.getElementById("saveNotes").style.visibility = '';
		if (text != textFromStorage) {
			return "You have attempted to leave this page.  If you have not saved the table to Excel, your results will be lost.";
		}
	}

	function foodItem(serving_size, calories, total_fat, saturated_fat,
			cholesterol, sodium, carbs, fiber, sugars, protein) {
		this.serving_size = serving_size; // in grams
		this.calories = calories;
		this.total_fat = total_fat;
		this.saturated_fat = saturated_fat;
		this.cholesterol = cholesterol;
		this.sodium = sodium;
		this.carbs = carbs;
		this.fiber = fiber;
		this.sugars = sugars;
		this.protein = protein;
	}

	function ResetTable() {
		var response = prompt("Type 'y' to reset the table.");
		if (response == "y") {
			localStorage.setItem("foodEntries", []);
			arrayOfElements_GLOBAL = [];
			location.reload();
		}
	}

	function getFoodByName(foodName) {
		var food = null;
		for (var i = 0; i < arrayOfFoodNames_GLOBAL.length; i++) {
			if (foodName == arrayOfFoodNames_GLOBAL[i]) {
				food = new foodItem(arrayOfServingSizes_GLOBAL[i],
						arrayOfCalories_GLOBAL[i], arrayOfTotalFat_GLOBAL[i],
						arrayOfSaturatedFat_GLOBAL[i],
						arrayOfCholesterol_GLOBAL[i], arrayOfSodium_GLOBAL[i],
						arrayOfCarbs_GLOBAL[i], arrayOfFiber_GLOBAL[i],
						arrayOfSugars_GLOBAL[i], arrayOfProtein_GLOBAL[i]);
			}
		}
		return food;
	}

	function main() {
		var elt = document.getElementById("nutritionForm");
		var itemName = elt.itemName.value;
		if (itemName == "") {
			alert("Click 'Add Nutrition Facts' and enter nutrition facts before proceeding.");
			return;
		}
		var weight = parseFloat(elt.weight.value);
		var weightUnits = elt.weightUnits.value;
		if (weight == '') {
			alert("Fill in the weight");
			return;
		}
		if (isNaN(weight)) {
			alert("Weight input is not a number");
			return;
		}
		if (arrayOfFoodNames_GLOBAL.length == 0) {
			alert("Please add food items to storage by using the 'Add Nutrition Facts' button.");
			return;
		}
		var food = getFoodByName(itemName);
		if (food == null) {
			alert("Food item not found.")
			return;
		}
		if (document.getElementById("weightRadio").checked == true) {
			if (weightUnits == "ounces") {
				weight = weight * 28.3495;
			} else if (weightUnits == "pounds") {
				weight = weight * 453.592;
			} else if (weightUnits == "kilograms") {
				weight = weight * 1000;
			}
		} else { // converting from servings to weight
			// weight = num_servings*serving_size
			weight *= food.serving_size;
		}
		var idOfRadioButton;
		if (document.getElementById("weightRadio").checked == true) {
			idOfRadioButton = "weightRadio";
		} else {
			idOfRadioButton = "servingsRadio";
		}
  insertRow(itemName, food, weight);
		document.getElementById("nutritionForm").reset();
		document.getElementById(idOfRadioButton).checked = true;
	} // main

	function threebythreeinsertfunc() {
		var food1 = getFoodByName(threebythreecalculateFood1NameResult_GLOBAL);
		var food2 = getFoodByName(threebythreecalculateFood2NameResult_GLOBAL);
		var food3 = getFoodByName(threebythreecalculateFood3NameResult_GLOBAL);
		insertRow(threebythreecalculateFood1NameResult_GLOBAL, food1,
				threebythreecalcualteFood1WeightResult_GLOBAL);
		insertRow(threebythreecalculateFood2NameResult_GLOBAL, food2,
				threebythreecalcualteFood2WeightResult_GLOBAL);
		insertRow(threebythreecalculateFood3NameResult_GLOBAL, food3,
				threebythreecalcualteFood3WeightResult_GLOBAL);
		location.reload();
	}

	function twobytwoinsertfunc() {
		var food1 = getFoodByName(twobytwocalculateFood1NameResult_GLOBAL);
		var food2 = getFoodByName(twobytwocalculateFood2NameResult_GLOBAL);
		insertRow(twobytwocalculateFood1NameResult_GLOBAL, food1,
				twobytwocalcualteFood1WeightResult_GLOBAL);
		insertRow(twobytwocalculateFood2NameResult_GLOBAL, food2,
				twobytwocalcualteFood2WeightResult_GLOBAL);
		location.reload();
	}

	function onebyoneinsertfunc() {
		var food = getFoodByName(onebyonecalculateFood1NameResult_GLOBAL);
		insertRow(onebyonecalculateFood1NameResult_GLOBAL, food,
				onebyonecalcualteFood1WeightResult_GLOBAL);
		location.reload();
	}

	function insertRow(foodName, food, weight) {
		totalRows_GLOBAL += 1;
		var table = document.getElementById("myTable");
		var row = table.insertRow(totalRows_GLOBAL - 1);
		var multiplier = weight / food.serving_size;
		food.total_fat *= multiplier;
		food.saturated_fat *= multiplier;
		food.cholesterol *= multiplier;
		food.sodium *= multiplier;
		food.carbs *= multiplier;
		food.sugars *= multiplier;
		food.protein *= multiplier;
		food.calories *= multiplier;
		food.fiber *= multiplier;
		totals_GLOBAL[10] += parseFloat(weight.toFixed(2));
		totals_GLOBAL[8] += parseFloat(food.total_fat.toFixed(2));
		totals_GLOBAL[7] += parseFloat(food.saturated_fat.toFixed(2));
		totals_GLOBAL[6] += parseFloat(food.cholesterol.toFixed(2));
		totals_GLOBAL[5] += parseFloat(food.sodium.toFixed(2));
		totals_GLOBAL[4] += parseFloat(food.carbs.toFixed(2));
		totals_GLOBAL[2] += parseFloat(food.sugars.toFixed(2));
		totals_GLOBAL[1] += parseFloat(food.protein.toFixed(2));
		totals_GLOBAL[9] += parseFloat(food.calories.toFixed(2));
		totals_GLOBAL[3] += parseFloat(food.fiber.toFixed(2));
		var date = new Date();
		var dateString = date.toDateString() + ";   "
				+ date.toTimeString().substring(0, 8);
		row.insertCell(0).innerHTML = dateString;
		row.insertCell(0).innerHTML = food.protein.toFixed(2);
		row.insertCell(0).innerHTML = food.sugars.toFixed(2);
		row.insertCell(0).innerHTML = food.fiber.toFixed(2);
		row.insertCell(0).innerHTML = food.carbs.toFixed(2);
		row.insertCell(0).innerHTML = food.sodium.toFixed(2);
		row.insertCell(0).innerHTML = food.cholesterol.toFixed(2);
		row.insertCell(0).innerHTML = food.saturated_fat.toFixed(2);
		row.insertCell(0).innerHTML = food.total_fat.toFixed(2);
		row.insertCell(0).innerHTML = food.calories.toFixed(2);
		row.insertCell(0).innerHTML = weight.toFixed(2);
		row.insertCell(0).innerHTML = foodName;
		row.insertCell(0).innerHTML = idxValue_GLOBAL - 1;
		arrayOfElements_GLOBAL.push(dateString);
		arrayOfElements_GLOBAL.push(food.protein.toFixed(2));
		arrayOfElements_GLOBAL.push(food.sugars.toFixed(2));
		arrayOfElements_GLOBAL.push(food.fiber.toFixed(2));
		arrayOfElements_GLOBAL.push(food.carbs.toFixed(2));
		arrayOfElements_GLOBAL.push(food.sodium.toFixed(2));
		arrayOfElements_GLOBAL.push(food.cholesterol.toFixed(2));
		arrayOfElements_GLOBAL.push(food.saturated_fat.toFixed(2));
		arrayOfElements_GLOBAL.push(food.total_fat.toFixed(2));
		arrayOfElements_GLOBAL.push(food.calories.toFixed(2));
		arrayOfElements_GLOBAL.push(weight.toFixed(2));
		arrayOfElements_GLOBAL.push(foodName);
		myTable.rows[totalRows_GLOBAL].cells[2].innerHTML = totals_GLOBAL[10]
				.toFixed(2);
		myTable.rows[totalRows_GLOBAL].cells[3].innerHTML = totals_GLOBAL[9]
				.toFixed(2);
		myTable.rows[totalRows_GLOBAL].cells[4].innerHTML = totals_GLOBAL[8]
				.toFixed(2);
		myTable.rows[totalRows_GLOBAL].cells[5].innerHTML = totals_GLOBAL[7]
				.toFixed(2);
		myTable.rows[totalRows_GLOBAL].cells[6].innerHTML = totals_GLOBAL[6]
				.toFixed(2);
		myTable.rows[totalRows_GLOBAL].cells[7].innerHTML = totals_GLOBAL[5]
				.toFixed(2);
		myTable.rows[totalRows_GLOBAL].cells[8].innerHTML = totals_GLOBAL[4]
				.toFixed(2);
		myTable.rows[totalRows_GLOBAL].cells[9].innerHTML = totals_GLOBAL[3]
				.toFixed(2);
		myTable.rows[totalRows_GLOBAL].cells[10].innerHTML = totals_GLOBAL[2]
				.toFixed(2);
		myTable.rows[totalRows_GLOBAL].cells[11].innerHTML = totals_GLOBAL[1]
				.toFixed(2);
		myTable.rows[totalRows_GLOBAL].cells[12].innerHTML = dateString;
		document.getElementById("weight").value = "";
		localStorage.setItem("foodEntries", arrayOfElements_GLOBAL);
		idxValue_GLOBAL++;
	}

	function showInstructions() {
		var text = "Welcome to the Macronutrient calculator. Make sure to use this in Google Chrome. You can right-click this file on your computer -> open with -> Google Chrome.\n\nTo begin, click 'Add Nutrition Facts' and enter the nutrition facts for a food item that you eat. Repeat this process for all food items that you currently eat. After that, you can select an item name, enter the weight or number of servings, and press 'Insert Row' to insert a row into the table that represents how much of each nutrition group you are getting from the amount of food that you specified.\n\nWhen you wake up in the morning of the next day, you should press 'Delete All Rows' in order to start fresh again. If you ever make a mistake and only need to delete one row, you should use the 'Delete Row By Index' button instead.\n\nThe onebyone, twobytwo, and threebythree buttons are used to pull up a calculator that will tell you how much of each food item that you must eat in order to get the specified amount of macronutrients out of them. This calculator is best if you have a kitchen scale and can weigh your food but you can enter the number of servings instead if you don't have a kitchen scale.\n\nYou can type any notes you want in the notes section but make sure to press the 'Save Notes' section before you leave the page if you want to keep your changes. Wifi is not required for this application."
		alert(text);
	}

	function alertAllNutritionFacts() {
		var text = "";
		for (var i = 1; i < arrayOfFoodNames_GLOBAL.length; i++) {
			text += "Food Name: " + arrayOfFoodNames_GLOBAL[i] + "\n";
			text += "Serving Size(g): " + arrayOfServingSizes_GLOBAL[i] + "\n";
			text += "Calories per serving (g): " + arrayOfCalories_GLOBAL[i]
					+ "\n";
			text += "Total Fat per serving (g): " + arrayOfTotalFat_GLOBAL[i]
					+ "\n";
			text += "Saturated Fat per serving (g): "
					+ arrayOfSaturatedFat_GLOBAL[i] + "\n";
			text += "Cholesterol per serving (mg): "
					+ arrayOfCholesterol_GLOBAL[i] + "\n";
			text += "Sodium per serving (mg): " + arrayOfSodium_GLOBAL[i]
					+ "\n";
			text += "Carbs per serving (g): " + arrayOfCarbs_GLOBAL[i] + "\n";
			text += "Fiber per serving (g): " + arrayOfFiber_GLOBAL[i] + "\n";
			text += "Sugars per serving (g): " + arrayOfSugars_GLOBAL[i] + "\n";
			text += "Protein per serving (g): " + arrayOfProtein_GLOBAL[i]
					+ "\n";
			text += "----------------------\n";
		}
		document.getElementById("textAreaForNutritionFacts").value = text;
		document.getElementById("myTable").style.visibility = 'hidden';
		document.getElementById("textAreaForNutritionFacts").style.visibility = '';
	}

	function oneDArrayTo2D(oneDArray) {
		var twoDArray = [];
		var tempArray = [];
		var ctr = 0;
		var numElements = oneDArray.length;
		if (numElements > 1) {
			while (ctr < numElements) {
				for (var i = 0; i < num_cols_GLOBAL; i++) {
					if (oneDArray[ctr] != "" && oneDArray[ctr] != " ") {
						tempArray.push(oneDArray[ctr]);
					}
					ctr++;
				}
				twoDArray.push(tempArray);
			}

		}
	}

	function deleteRowByIndex() {
		var selectedIndexValue = parseFloat(document
				.getElementById("indexToDelete").value);
		var idxToDelete = selectedIndexValue - 1;
		var deleteIDX = idxToDelete * (num_cols_GLOBAL - 1);
		arrayOfElements_GLOBAL.splice(deleteIDX, num_cols_GLOBAL - 1);
		localStorage.setItem("foodEntries", arrayOfElements_GLOBAL);
		location.reload();
	}

	function deleteRowInterface() {
		document.getElementById("inputForm").style.visibility = 'hidden';
		document.getElementById("deleteRowTable").style.visibility = '';
		document.getElementById("deleteRow").style.visibility = 'hidden';
		document.getElementById("weightUnits").style.visibility = 'hidden';
		var indexSelect = document.getElementById("indexToDelete");
		for (var i = 1; i < idxValue_GLOBAL - 1; i++) {
			option = document.createElement("option");
			option.text = i;
			indexSelect.add(option);
		}
	}

	function saveNotes() {
		var text = document.getElementById("textArea").value;
		localStorage.setItem("storedTextFromTextArea", text);
		location.reload();
	}

	function calculatethreebythree() {
		var elt = document.getElementById("threebythreeform");
		var itemName1 = elt.itemName5.value;
		var itemName2 = elt.itemName6.value;
		var itemName3 = elt.itemName7.value;
		var goalWeight1 = parseFloat(elt.goalWeight1.value);
		var goalWeight2 = parseFloat(elt.goalWeight2.value);
		var goalWeight3 = parseFloat(elt.goalWeight3.value);
		var macronutrient1 = elt.macronutrient1.value;
		var macronutrient2 = elt.macronutrient2.value;
		var macronutrient3 = elt.macronutrient3.value;
		if (goalWeight1 == '') {
			alert("Fill in the goalWeight1");
			return;
		}
		if (isNaN(goalWeight1)) {
			alert("goalWeight1 input is not a number");
			return;
		}
		if (goalWeight2 == '') {
			alert("Fill in the goalWeight2");
			return;
		}
		if (isNaN(goalWeight2)) {
			alert("goalWeight2 input is not a number");
			return;
		}
		if (goalWeight3 == '') {
			alert("Fill in the goalWeight3");
			return;
		}
		if (isNaN(goalWeight3)) {
			alert("goalWeight3 input is not a number");
			return;
		}
		var food1;
		var food2;
		var food3;
		food1 = getFoodByName(itemName1);
		if (food1 == null) {
			alert("Food item not found.")
			return;
		}
		food2 = getFoodByName(itemName2);
		if (food2 == null) {
			alert("Food item2 not found.")
			return;
		}
		food3 = getFoodByName(itemName3);
		if (food3 == null) {
			alert("Food item3 not found.")
			return;
		}
		var a;
		var b;
		var c;
		if (macronutrient1 == "Calories") {
			a = food1.calories / food1.serving_size;
			b = food2.calories / food2.serving_size;
			c = food3.calories / food3.serving_size;
		} else if (macronutrient1 == "Total Fat") {
			a = food1.total_fat / food1.serving_size;
			b = food2.total_fat / food2.serving_size;
			c = food3.total_fat / food3.serving_size;
		} else if (macronutrient1 == "Carbs") {
			a = food1.carbs / food1.serving_size;
			b = food2.carbs / food2.serving_size;
			c = food3.carbs / food3.serving_size;
		} else if (macronutrient1 == "Protein") {
			a = food1.protein / food1.serving_size;
			b = food2.protein / food2.serving_size;
			c = food3.protein / food3.serving_size;
		} else {
			alert("error1");
		}
		var e;
		var f;
		var g;
		if (macronutrient2 == "Calories") {
			e = food1.calories / food1.serving_size;
			f = food2.calories / food2.serving_size;
			g = food3.calories / food3.serving_size;
		} else if (macronutrient2 == "Total Fat") {
			e = food1.total_fat / food1.serving_size;
			f = food2.total_fat / food2.serving_size;
			g = food3.total_fat / food3.serving_size;
		} else if (macronutrient2 == "Carbs") {
			e = food1.carbs / food1.serving_size;
			f = food2.carbs / food2.serving_size;
			g = food3.carbs / food3.serving_size;
		} else if (macronutrient2 == "Protein") {
			e = food1.protein / food1.serving_size;
			f = food2.protein / food2.serving_size;
			g = food3.protein / food3.serving_size;
		} else {
			alert("error2");
		}
		var i;
		var j;
		var k;
		if (macronutrient3 == "Calories") {
			i = food1.calories / food1.serving_size;
			j = food2.calories / food2.serving_size;
			k = food3.calories / food3.serving_size;
		} else if (macronutrient3 == "Total Fat") {
			i = food1.total_fat / food1.serving_size;
			j = food2.total_fat / food2.serving_size;
			k = food3.total_fat / food3.serving_size;
		} else if (macronutrient3 == "Carbs") {
			i = food1.carbs / food1.serving_size;
			j = food2.carbs / food2.serving_size;
			k = food3.carbs / food3.serving_size;
		} else if (macronutrient3 == "Protein") {
			i = food1.protein / food1.serving_size;
			j = food2.protein / food2.serving_size;
			k = food3.protein / food3.serving_size;
		} else {
			alert("error2");
		}
		var d = goalWeight1;
		var h = goalWeight2;
		var l = goalWeight3;
		var temp;
		if (a == 0 && e != 0) { // swap equations
			temp = a, a = e, e = temp;
			temp = b, b = f, f = temp;
			temp = c, c = g, g = temp;
			temp = d, d = h, h = temp;
		} else if (a == 0 && i != 0) {
			temp = a, a = i, i = temp;
			temp = b, b = j, j = temp;
			temp = c, c = k, k = temp;
			temp = d, d = l, l = temp;
		}
		A = f - e * b / a;
		B = g - e * c / a;
		C = h - e * d / a;
		D = j - i * b / a;
		E = k - i * c / a;
		F = l - i * d / a;
		if (A == 0) {
			temp = A, A = D, D = temp;
			temp = B, B = E, E = temp;
			temp = C, C = F, F = temp;
		}
		var y = (B * F - E * C) / (B * D - E * A);
		var z = (C - A * y) / B;
		var x = (d - b * y - c * z) / a;
		var qq = document.getElementById("threebythreetable").rows[10].cells;
		qq[0].innerHTML = "Num grams of " + itemName1 + " to eat: "
				+ x.toFixed(2) + " (" + (x / food1.serving_size).toFixed(2)
				+ " servings)";
		;
		qq = document.getElementById("threebythreetable").rows[11].cells;
		qq[0].innerHTML = "Num grams of " + itemName2 + " to eat: "
				+ y.toFixed(2) + " (" + (y / food2.serving_size).toFixed(2)
				+ " servings)";
		;
		qq = document.getElementById("threebythreetable").rows[12].cells;
		qq[0].innerHTML = "Num grams of " + itemName3 + " to eat: "
				+ z.toFixed(2) + " (" + (z / food3.serving_size).toFixed(2)
				+ " servings)";
		;
		qq = document.getElementById("threebythreetable").rows[13].cells;
		qq[0].innerHTML = "Total Result: " + "Calories: "
				+ (z * food3.calories / food3.serving_size + y * food2.calories
						/ food2.serving_size + x * food1.calories
						/ food1.serving_size).toFixed(2)
				+ "; "
				+ "Total Fat: "
				+ (z * food3.total_fat / food3.serving_size + y
						* food2.total_fat / food2.serving_size + x
						* food1.total_fat / food1.serving_size).toFixed(2)
				+ "; "
				+ "Saturated Fat: "
				+ (z * food3.saturated_fat / food3.serving_size + y
						* food2.saturated_fat / food2.serving_size + x
						* food1.saturated_fat / food1.serving_size).toFixed(2)
				+ "; "
				+ "Cholesterol: "
				+ (z * food3.cholesterol / food3.serving_size + y
						* food2.cholesterol / food2.serving_size + x
						* food1.cholesterol / food1.serving_size).toFixed(2)
				+ "; "
				+ "Sodium: "
				+ (z * food3.sodium / food3.serving_size + y * food2.sodium
						/ food2.serving_size + x * food1.sodium
						/ food1.serving_size).toFixed(2)
				+ "; "
				+ "Carbs: "
				+ (z * food3.carbs / food3.serving_size + y * food2.carbs
						/ food2.serving_size + x * food1.carbs
						/ food1.serving_size).toFixed(2)
				+ "; "
				+ "Fiber: "
				+ (z * food3.fiber / food3.serving_size + y * food2.fiber
						/ food2.serving_size + x * food1.fiber
						/ food1.serving_size).toFixed(2)
				+ "; "
				+ "Sugars: "
				+ (z * food3.sugars / food3.serving_size + y * food2.sugars
						/ food2.serving_size + x * food1.sugars
						/ food1.serving_size).toFixed(2)
				+ "; "
				+ "Protein: "
				+ (z * food3.protein / food3.serving_size + y * food2.protein
						/ food2.serving_size + x * food1.protein
						/ food1.serving_size).toFixed(2) + "; ";
		threebythreecalculateFood1NameResult_GLOBAL = itemName1;
		threebythreecalculateFood2NameResult_GLOBAL = itemName2;
		threebythreecalculateFood3NameResult_GLOBAL = itemName3;
		threebythreecalcualteFood1WeightResult_GLOBAL = x;
		threebythreecalcualteFood2WeightResult_GLOBAL = y;
		threebythreecalcualteFood3WeightResult_GLOBAL = z;
		document.getElementById("threebythreeinsert").style.visibility = '';
	}

	function calculatetwobytwo() {
		var elt = document.getElementById("twobytwoform");
		var itemName1 = elt.itemName3.value;
		var itemName2 = elt.itemName4.value;
		var goalWeight1 = parseFloat(elt.goalWeight1.value);
		var goalWeight2 = parseFloat(elt.goalWeight2.value);
		var macronutrient1 = elt.macronutrient1.value;
		var macronutrient2 = elt.macronutrient2.value;
		if (goalWeight1 == '') {
			alert("Fill in the goalWeight1");
			return;
		}
		if (isNaN(goalWeight1)) {
			alert("goalWeight1 input is not a number");
			return;
		}
		if (goalWeight2 == '') {
			alert("Fill in the goalWeight2");
			return;
		}
		if (isNaN(goalWeight2)) {
			alert("goalWeight2 input is not a number");
			return;
		}
		var food1;
		var food2;
		if (arrayOfFoodNames_GLOBAL.length == 0) {
			alert("Please add food items to storage by using the 'Add Nutrition Facts' button.");
			return;
		}
		food1 = getFoodByName(itemName1);
		if (food1 == false) {
			alert("Food item not found.")
			return;
		}
		food2 = getFoodByName(itemName2);
		if (food2 == false) {
			alert("Food item2 not found.")
			return;
		}
		var a;
		var b;
		if (macronutrient1 == "Calories") {
			a = food1.calories / food1.serving_size;
			b = food2.calories / food2.serving_size;
		} else if (macronutrient1 == "Total Fat") {
			a = food1.total_fat / food1.serving_size;
			b = food2.total_fat / food2.serving_size;
		} else if (macronutrient1 == "Carbs") {
			a = food1.carbs / food1.serving_size;
			b = food2.carbs / food2.serving_size;
		} else if (macronutrient1 == "Protein") {
			a = food1.protein / food1.serving_size;
			b = food2.protein / food2.serving_size;
		} else {
			alert("error1");
		}
		var d;
		var e;
		if (macronutrient2 == "Calories") {
			d = food1.calories / food1.serving_size;
			e = food2.calories / food2.serving_size;
		} else if (macronutrient2 == "Total Fat") {
			d = food1.total_fat / food1.serving_size;
			e = food2.total_fat / food2.serving_size;
		} else if (macronutrient2 == "Carbs") {
			d = food1.carbs / food1.serving_size;
			e = food2.carbs / food2.serving_size;
		} else if (macronutrient2 == "Protein") {
			d = food1.protein / food1.serving_size;
			e = food2.protein / food2.serving_size;
		} else {
			alert("error2");
		}
		var c = goalWeight1;
		var f = goalWeight2;
		var temp;
		// swap equations if b == 0
		if (b == 0) {
			temp = a, a = d, d = temp;
			temp = b, b = e, e = temp;
			temp = c, c = f, f = temp;
		}
		var x = (b * f - e * c) / (b * d - e * a);
		var y = (c - a * x) / b;
		var qq = document.getElementById("twobytwotable").rows[7].cells;
		qq[0].innerHTML = "Num grams of " + itemName1 + " to eat: "
				+ x.toFixed(2) + " (" + (x / food1.serving_size).toFixed(2)
				+ " servings)";
		qq = document.getElementById("twobytwotable").rows[8].cells;
		qq[0].innerHTML = "Num grams of " + itemName2 + " to eat: "
				+ y.toFixed(2) + " (" + (y / food2.serving_size).toFixed(2)
				+ " servings)";
		qq = document.getElementById("twobytwotable").rows[9].cells;
		qq[0].innerHTML = "Total Result: " + "Calories: "
				+ (y * food2.calories / food2.serving_size + x * food1.calories
						/ food1.serving_size).toFixed(2)
				+ "; "
				+ "Total Fat: "
				+ (y * food2.total_fat / food2.serving_size + x
						* food1.total_fat / food1.serving_size).toFixed(2)
				+ "; "
				+ "Saturated Fat: "
				+ (y * food2.saturated_fat / food2.serving_size + x
						* food1.saturated_fat / food1.serving_size).toFixed(2)
				+ "; "
				+ "Cholesterol: "
				+ (y * food2.cholesterol / food2.serving_size + x
						* food1.cholesterol / food1.serving_size).toFixed(2)
				+ "; "
				+ "Sodium: "
				+ (y * food2.sodium / food2.serving_size + x * food1.sodium
						/ food1.serving_size).toFixed(2)
				+ "; "
				+ "Carbs: "
				+ (y * food2.carbs / food2.serving_size + x * food1.carbs
						/ food1.serving_size).toFixed(2)
				+ "; "
				+ "Fiber: "
				+ (y * food2.fiber / food2.serving_size + x * food1.fiber
						/ food1.serving_size).toFixed(2)
				+ "; "
				+ "Sugars: "
				+ (y * food2.sugars / food2.serving_size + x * food1.sugars
						/ food1.serving_size).toFixed(2)
				+ "; "
				+ "Protein: "
				+ (y * food2.protein / food2.serving_size + x * food1.protein
						/ food1.serving_size).toFixed(2) + ";";
		twobytwocalculateFood1NameResult_GLOBAL = itemName1;
		twobytwocalculateFood2NameResult_GLOBAL = itemName2;
		twobytwocalcualteFood1WeightResult_GLOBAL = x;
		twobytwocalcualteFood2WeightResult_GLOBAL = y;
		document.getElementById("twobytwoinsert").style.visibility = '';
	}

	function calculateonebyone() {
		var elt = document.getElementById("onebyoneform");
		var itemName = elt.itemName1.value;
		var goalWeight = parseFloat(elt.goalWeight.value);
		var macronutrient = elt.macronutrient1.value;
		if (goalWeight == '') {
			alert("Fill in the goalWeight");
			return;
		}
		if (isNaN(goalWeight)) {
			alert("goalWeight input is not a number");
			return;
		}
		var food;
		if (arrayOfFoodNames_GLOBAL.length == 0) {
			alert("Please add food items to storage by using the 'Add Nutrition Facts' button.");
			return;
		}
		food = getFoodByName(itemName);
		if (food == null) {
			alert("Food item not found.")
			return;
		}
		var product = goalWeight * food.serving_size;
		var result;
		if (macronutrient == "Calories") {
			result = product / food.calories;
		} else if (macronutrient == "Total Fat") {
			result = product / food.total_fat;
		} else if (macronutrient == "Carbs") {
			result = product / food.carbs;
		} else if (macronutrient == "Protein") {
			result = product / food.protein;
		} else {
			alert("error");
		}
		var quotient = result / food.serving_size;
		var x = document.getElementById("onebyonetable").rows[4].cells;
		// weight divided by servings size
		x[0].innerHTML = "Num grams of " + itemName + " to eat: "
				+ result.toFixed(2) + " ("
				+ (result / food.serving_size).toFixed(2) + " servings)";
		var x = document.getElementById("onebyonetable").rows[5].cells;
		x[0].innerHTML = "Total Results: Calories: "
				+ (quotient * food.calories).toFixed(2) + "; "
				+ "Total Fat(g): " + (quotient * food.total_fat).toFixed(2)
				+ "; " + "Saturated Fat(g): "
				+ (quotient * food.saturated_fat).toFixed(2) + "; "
				+ "Cholesterol(mg): "
				+ (quotient * food.cholesterol).toFixed(2) + "; "
				+ "Sodium(mg): " + (quotient * food.sodium).toFixed(2) + "; "
				+ "Carbs(g): " + (quotient * food.carbs).toFixed(2) + "; "
				+ "Fiber(g): " + (quotient * food.fiber).toFixed(2) + "; "
				+ "Sugars(g): " + (quotient * food.sugars).toFixed(2) + "; "
				+ "Protein(g): " + (quotient * food.protein).toFixed(2) + ";";
		onebyonecalculateFood1NameResult_GLOBAL = itemName;
		onebyonecalcualteFood1WeightResult_GLOBAL = result;
		document.getElementById("onebyoneinsert").style.visibility = '';
	}

	function threeBythreeInterface() {
		document.getElementById("inputForm").style.visibility = 'hidden';
		document.getElementById("threebythreetable").style.visibility = '';
		document.getElementById("deleteRow").style.visibility = 'hidden';
		document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
		document.getElementById("weightUnits").style.visibility = 'hidden';
	}

	function twoByTwoInterface() {
		document.getElementById("inputForm").style.visibility = 'hidden';
		document.getElementById("twobytwotable").style.visibility = '';
		document.getElementById("deleteRow").style.visibility = 'hidden';
		document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
		document.getElementById("weightUnits").style.visibility = 'hidden';
	}

	function oneByOneInterface() {
		document.getElementById("inputForm").style.visibility = 'hidden';
		document.getElementById("onebyonetable").style.visibility = '';
		document.getElementById("deleteRow").style.visibility = 'hidden';
		document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
		document.getElementById("weightUnits").style.visibility = 'hidden';
	}

	function deleteNutritionFacts() {
		document.getElementById("inputForm").style.visibility = 'hidden';
		document.getElementById("deleteTable").style.visibility = '';
		document.getElementById("deleteRow").style.visibility = 'hidden';
		document.getElementById("weightUnits").style.visibility = 'hidden';
		document.getElementById("alertNutritionFacts").style.visibility = 'hidden';

	}

	function deleteInformation() {
		var elt = document.getElementById("deleteForm");
		var itemName = elt.itemToDelete.value;
		if (arrayOfFoodNames_GLOBAL.length == 0) {
			alert("Please add food items to storage by using the 'Add Nutrition Facts' button.");
			return;
		}
		var isFound = false;
		for (var i = 0; i < arrayOfFoodNames_GLOBAL.length; i++) {
			if (itemName == arrayOfFoodNames_GLOBAL[i]) {
				isFound = true;
				arrayOfFoodNames_GLOBAL.splice(i, 1);
				arrayOfServingSizes_GLOBAL.splice(i, 1);
				arrayOfCalories_GLOBAL.splice(i, 1);
				arrayOfTotalFat_GLOBAL.splice(i, 1);
				arrayOfSaturatedFat_GLOBAL.splice(i, 1);
				arrayOfCholesterol_GLOBAL.splice(i, 1);
				arrayOfSodium_GLOBAL.splice(i, 1);
				arrayOfCarbs_GLOBAL.splice(i, 1);
				arrayOfFiber_GLOBAL.splice(i, 1);
				arrayOfSugars_GLOBAL.splice(i, 1);
				arrayOfProtein_GLOBAL.splice(i, 1);
				localStorage.setItem("foodNames", arrayOfFoodNames_GLOBAL);
				localStorage
						.setItem("servingSizes", arrayOfServingSizes_GLOBAL);
				localStorage.setItem("calories", arrayOfCalories_GLOBAL);
				localStorage.setItem("totalFat", arrayOfTotalFat_GLOBAL);
				localStorage
						.setItem("saturatedFat", arrayOfSaturatedFat_GLOBAL);
				localStorage.setItem("cholesterol", arrayOfCholesterol_GLOBAL);
				localStorage.setItem("sodium", arrayOfSodium_GLOBAL);
				localStorage.setItem("carbs", arrayOfCarbs_GLOBAL);
				localStorage.setItem("fiber", arrayOfFiber_GLOBAL);
				localStorage.setItem("sugars", arrayOfSugars_GLOBAL);
				localStorage.setItem("protein", arrayOfProtein_GLOBAL);
				break;
			}
		}
		if (isFound == false) {
			alert("Food item not found.")
			return;
		}
		location.reload();
	}

	function cancelNutritionFact() {
		location.reload();
	}

	function storeNutritionFacts() {
		var elt = document.getElementById("foodStorageForm");
		var foodName = elt.foodName_inp.value;
		var servingSize = parseFloat(elt.servingSize_inp.value);
		var calories = parseFloat(elt.calories_inp.value);
		var totalFat = parseFloat(elt.totalFat_inp.value);
		var saturatedFat = parseFloat(elt.saturatedFat_inp.value);
		var cholesterol = parseFloat(elt.cholesterol_inp.value);
		var sodium = parseFloat(elt.sodium_inp.value);
		var carbs = parseFloat(elt.carbs_inp.value);
		var fiber = parseFloat(elt.fiber_inp.value);
		var sugars = parseFloat(elt.sugars_inp.value);
		var protein = parseFloat(elt.protein_inp.value);
		if (foodName == "") {
			alert("Food Name may not be left blank.");
			return;
		}
		if (foodName.search(",") != -1) {
			alert("Food Name may not contain a comma");
			return;
		}
		if (isNaN(servingSize)) {
			alert("Please enter serving size.");
			return;
		}
		if (isNaN(calories)) {
			alert("Please enter calories.");
			return;
		}
		if (isNaN(totalFat)) {
			alert("Please enter total fat.");
			return;
		}
		if (isNaN(saturatedFat)) {
			alert("Please enter saturated fat.");
			return;
		}
		if (isNaN(cholesterol)) {
			alert("Please enter cholesterol");
			return;
		}
		if (isNaN(sodium)) {
			alert("Please enter sodium.");
			return;
		}
		if (isNaN(carbs)) {
			alert("Please enter carbs.");
			return;
		}
		if (isNaN(fiber)) {
			alert("Please enter fiber.");
			return;
		}
		if (isNaN(sugars)) {
			alert("Please enter sugars.");
			return;
		}
		if (isNaN(protein)) {
			alert("Please enter protein.");
			return;
		}
		arrayOfFoodNames_GLOBAL.push(foodName);
		arrayOfServingSizes_GLOBAL.push(servingSize);
		arrayOfCalories_GLOBAL.push(calories);
		arrayOfTotalFat_GLOBAL.push(totalFat);
		arrayOfSaturatedFat_GLOBAL.push(saturatedFat);
		arrayOfCholesterol_GLOBAL.push(cholesterol);
		arrayOfSodium_GLOBAL.push(sodium);
		arrayOfCarbs_GLOBAL.push(carbs);
		arrayOfFiber_GLOBAL.push(fiber);
		arrayOfSugars_GLOBAL.push(sugars);
		arrayOfProtein_GLOBAL.push(protein);
		localStorage.setItem("foodNames", arrayOfFoodNames_GLOBAL);
		localStorage.setItem("servingSizes", arrayOfServingSizes_GLOBAL);
		localStorage.setItem("calories", arrayOfCalories_GLOBAL);
		localStorage.setItem("totalFat", arrayOfTotalFat_GLOBAL);
		localStorage.setItem("saturatedFat", arrayOfSaturatedFat_GLOBAL);
		localStorage.setItem("cholesterol", arrayOfCholesterol_GLOBAL);
		localStorage.setItem("sodium", arrayOfSodium_GLOBAL);
		localStorage.setItem("carbs", arrayOfCarbs_GLOBAL);
		localStorage.setItem("fiber", arrayOfFiber_GLOBAL);
		localStorage.setItem("sugars", arrayOfSugars_GLOBAL);
		localStorage.setItem("protein", arrayOfProtein_GLOBAL);
		location.reload();
	}

	function addNutritionFacts() {

		document.getElementById("inputForm").style.visibility = 'hidden';
		document.getElementById("foodStorage").style.visibility = '';
		document.getElementById("deleteRow").style.visibility = 'hidden';
		document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
		document.getElementById("weightUnits").style.visibility = 'hidden';
	}

	function initializeRadioButton() {
		var radioButton;
		try {
			radioButton = localStorage.getItem("radioButtonValue");
		} catch (err) {
			localStorage.setItem("radioButtonValue", "weight");
			location.reload();
		}
		if (radioButton == null) {
			localStorage.setItem("radioButtonValue", "weight");
			location.reload();
		} else {
			if (radioButton == "weight") {
				document.getElementById("weightRadio").checked = true;
			} else {
				document.getElementById("servingsRadio").checked = true;
			}
			handleChange();
		}

	}

	function initializeTextArea() {
		var textAreaText;
		try {
			textAreaText = localStorage.getItem("storedTextFromTextArea");
		} catch (err) {
			localStorage.setItem("storedTextFromTextArea", "");
			location.reload();
		}
		if (textAreaText == null) {
			localStorage.setItem("storedTextFromTextArea", "");
			location.reload();
		} else {
			document.getElementById("textArea").value = textAreaText;
		}
	}

	function initializeSelect() {
		try {
			arrayOfFoodNames_GLOBAL = localStorage.getItem("foodNames");
			arrayOfServingSizes_GLOBAL = localStorage.getItem("servingSizes");
			arrayOfCalories_GLOBAL = localStorage.getItem("calories");
			arrayOfTotalFat_GLOBAL = localStorage.getItem("totalFat");
			arrayOfSaturatedFat_GLOBAL = localStorage.getItem("saturatedFat");
			arrayOfCholesterol_GLOBAL = localStorage.getItem("cholesterol");
			arrayOfSodium_GLOBAL = localStorage.getItem("sodium");
			arrayOfCarbs_GLOBAL = localStorage.getItem("carbs");
			arrayOfFiber_GLOBAL = localStorage.getItem("fiber");
			arrayOfSugars_GLOBAL = localStorage.getItem("sugars");
			arrayOfProtein_GLOBAL = localStorage.getItem("protein");
		} catch (err) {
			localStorage.setItem("foodNames", []);
			localStorage.setItem("servingSizes", []);
			localStorage.setItem("calories", []);
			localStorage.setItem("totalFat", []);
			localStorage.setItem("saturatedFat", []);
			localStorage.setItem("cholesterol", []);
			localStorage.setItem("sodium", []);
			localStorage.setItem("carbs", []);
			localStorage.setItem("fiber", []);
			localStorage.setItem("sugars", []);
			localStorage.setItem("protein", []);
			location.reload();
		}

		if (arrayOfFoodNames_GLOBAL == null || arrayOfCalories_GLOBAL == null) {
			localStorage.setItem("foodNames", []);
			localStorage.setItem("servingSizes", []);
			localStorage.setItem("calories", []);
			localStorage.setItem("totalFat", []);
			localStorage.setItem("saturatedFat", []);
			localStorage.setItem("cholesterol", []);
			localStorage.setItem("sodium", []);
			localStorage.setItem("carbs", []);
			localStorage.setItem("fiber", []);
			localStorage.setItem("sugars", []);
			localStorage.setItem("protein", []);
			location.reload();
		} else {
			arrayOfFoodNames_GLOBAL = arrayOfFoodNames_GLOBAL.split(",");
			arrayOfServingSizes_GLOBAL = arrayOfServingSizes_GLOBAL.split(",");
			arrayOfCalories_GLOBAL = arrayOfCalories_GLOBAL.split(",");
			arrayOfTotalFat_GLOBAL = arrayOfTotalFat_GLOBAL.split(",");
			arrayOfSaturatedFat_GLOBAL = arrayOfSaturatedFat_GLOBAL.split(",");
			arrayOfCholesterol_GLOBAL = arrayOfCholesterol_GLOBAL.split(",");
			arrayOfSodium_GLOBAL = arrayOfSodium_GLOBAL.split(",");
			arrayOfCarbs_GLOBAL = arrayOfCarbs_GLOBAL.split(",");
			arrayOfFiber_GLOBAL = arrayOfFiber_GLOBAL.split(",");
			arrayOfSugars_GLOBAL = arrayOfSugars_GLOBAL.split(",");
			arrayOfProtein_GLOBAL = arrayOfProtein_GLOBAL.split(",");
			var itemName = document.getElementById("itemName");
			var option;
			var itemToDelete = document.getElementById("itemToDelete");
			var onebyonefood = document.getElementById("itemName1")
			var twobytwofoodone = document.getElementById("itemName3");
			var twobytwofoodtwo = document.getElementById("itemName4");
			var threebythreefoodone = document.getElementById("itemName5");
			var threebythreefoodtwo = document.getElementById("itemName6");
			var threebythreefoodthree = document.getElementById("itemName7");
			var sortedarrayOfFoodNames_GLOBAL = [];
			for (var i = 0; i < arrayOfFoodNames_GLOBAL.length; i++) {
				sortedarrayOfFoodNames_GLOBAL.push(arrayOfFoodNames_GLOBAL[i]);
			}
			sortedarrayOfFoodNames_GLOBAL.sort();
			for (var i = 0; i < arrayOfFoodNames_GLOBAL.length; i++) {
				option = document.createElement("option");
				option.text = sortedarrayOfFoodNames_GLOBAL[i];
				itemName.add(option);
				option = document.createElement("option");
				option.text = sortedarrayOfFoodNames_GLOBAL[i];
				itemToDelete.add(option);
				option = document.createElement("option");
				option.text = sortedarrayOfFoodNames_GLOBAL[i];
				onebyonefood.add(option);
				option = document.createElement("option");
				option.text = sortedarrayOfFoodNames_GLOBAL[i];
				twobytwofoodone.add(option);
				option = document.createElement("option");
				option.text = sortedarrayOfFoodNames_GLOBAL[i];
				twobytwofoodtwo.add(option);
				option = document.createElement("option");
				option.text = sortedarrayOfFoodNames_GLOBAL[i];
				threebythreefoodone.add(option);
				option = document.createElement("option");
				option.text = sortedarrayOfFoodNames_GLOBAL[i];
				threebythreefoodtwo.add(option);
				option = document.createElement("option");
				option.text = sortedarrayOfFoodNames_GLOBAL[i];
				threebythreefoodthree.add(option);
			}
			if (arrayOfFoodNames_GLOBAL.length > 0) {
				itemName.remove(itemName.selectedIndex);
				itemToDelete.remove(itemToDelete.selectedIndex);
				onebyonefood.remove(onebyonefood.selectedIndex);
				twobytwofoodone.remove(twobytwofoodone.selectedIndex);
				twobytwofoodtwo.remove(twobytwofoodtwo.selectedIndex);
				threebythreefoodone.remove(threebythreefoodone.selectedIndex);
				threebythreefoodtwo.remove(threebythreefoodtwo.selectedIndex);
				threebythreefoodthree
						.remove(threebythreefoodthree.selectedIndex);
			}
		}

	}

	function startUp() {
		try {
			arrayOfElements_GLOBAL = localStorage.getItem("foodEntries");
		} catch (err) {
			localStorage.setItem("foodEntries", []);
			location.reload();
		}
		if (arrayOfElements_GLOBAL == null) {
			localStorage.setItem("foodEntries", []);
			location.reload();
		}
		arrayOfElements_GLOBAL = arrayOfElements_GLOBAL.split(",");
		for (var i = 0; i < arrayOfElements_GLOBAL.length; i++) {
			if (arrayOfElements_GLOBAL[i].length == 0) {
				arrayOfElements_GLOBAL.splice(arrayOfElements_GLOBAL[i], 1);
				i--;
			}
		}
		var twoDArray = [];
		var tempArray = [];
		var ctr = 0;
		var numElements = arrayOfElements_GLOBAL.length;
		if (numElements > 0) {
			while (ctr < numElements) {
				for (var i = 0; i < num_cols_GLOBAL - 1; i++) {
					if (arrayOfElements_GLOBAL[ctr] != ""
							&& arrayOfElements_GLOBAL[ctr] != " ") {
						tempArray.push(arrayOfElements_GLOBAL[ctr]);
					}
					ctr++;
				}
				twoDArray.push(tempArray);
				tempArray = [];
			}
			totalRows_GLOBAL += 1;
			var table = document.getElementById("myTable");
			var row = table.insertRow(totalRows_GLOBAL - 1);
			for (var i = 0; i < twoDArray.length; i++) {
				for (var j = 0; j < num_cols_GLOBAL - 1; j++) {
					row.insertCell(0).innerHTML = twoDArray[i][j];
					if (!isNaN(twoDArray[i][j])) {
						totals_GLOBAL[j] += parseFloat(twoDArray[i][j]);
					}
				} // for
				row.insertCell(0).innerHTML = (i + 1).toString(); //index
				totalRows_GLOBAL += 1;
				row = table.insertRow(totalRows_GLOBAL - 1);
			} // for
			var k = 1;
			for (var i = num_cols_GLOBAL - 2; i > 1; i--) {
				myTable.rows[totalRows_GLOBAL].cells[i].innerHTML = totals_GLOBAL[k]
						.toFixed(2);
				k++;
			}
			idxValue_GLOBAL = totalRows_GLOBAL; // required spaghetti code
		} else {
			idxValue_GLOBAL = totalRows_GLOBAL + 1; // required spaghetti code
		}
	} // start up

	startUp();
	initializeSelect();
	initializeTextArea();
	initializeRadioButton();
	var date3 = new Date();
	myTable.rows[totalRows_GLOBAL].cells[num_cols_GLOBAL - 1].innerHTML = date3
			.toDateString()
			+ ";   " + date3.toTimeString().substring(0, 8);
	window.onbeforeunload = confirmExit;
</script>
</body>
</html>