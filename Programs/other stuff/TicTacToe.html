<html>
<head>
<title> Tic Tac Toe Game  </title>
</head>
<center> <h3> Tic Tac Toe Game </h3> 
<br>
<form id = "form1" action = "" method = "POST">
<table id = "tbl1" style = "position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">
<tr>
<td><input type = "button" style = "width:150px; height:150px;" name = "b0" id = "0" onkeypress="newGame();" value = "" /> </td>
<td><input type = "button" style = "width:150px; height:150px;" name = "b1" id = "1" onkeypress="newGame();" value = "" /> </td>
<td><input type = "button" style = "width:150px; height:150px;" name = "b2" id = "2" onkeypress="newGame();" value = "" /> </td>
</tr>
<tr>
<td><input type = "button" style = "width:150px; height:150px;" name = "b3" id = "3" onkeypress="newGame();" value = "" /> </td>
<td><input type = "button" style = "width:150px; height:150px;" name = "b4" id = "4" onkeypress="newGame();" value = "" /> </td>
<td><input type = "button" style = "width:150px; height:150px;" name = "b5" id = "5" onkeypress="newGame();" value = "" /> </td>
</tr>
<tr>
<td><input type = "button" style = "width:150px; height:150px;" name = "b6" id = "6" onkeypress="newGame();" value = "" /> </td>
<td><input type = "button" style = "width:150px; height:150px;" name = "b7" id = "7" onkeypress="newGame();" value = "" /> </td>
<td><input type = "button" style = "width:150px; height:150px;" name = "b8" id = "8" onkeypress="newGame();" value = "" /> </td>
</tr>
</table>
</form>
</center>
<input type = "button" style = "position:absolute; left:20px; top:73px;" name = "newGame" id = "newGame" value = "New Game" />
<p style = "position:absolute; left:20px; top: 100px;">
<input type = "radio" name = "r1" id = "r1" onclick="newGame();" /> 
Let me move first <input type = "radio" name = "r1" id = "r2" onclick="newGame();" /> 
Let the computer move first <br> <input type = "radio" name = "r1" id = "r3" onclick="newGame();" /> Play against friend <br><br> Note: May also press any key other than<br>enter or space bar to restart game</p>


</html>
<script type = "text/javascript">
document.getElementById("r1").checked = true;
var numMoves = 0;

  document.getElementById("form1").b0.onclick = move0;
		document.getElementById("form1").b1.onclick = move1;
		document.getElementById("form1").b2.onclick = move2;
		document.getElementById("form1").b3.onclick = move3;
		document.getElementById("form1").b4.onclick = move4;
		document.getElementById("form1").b5.onclick = move5;
		document.getElementById("form1").b6.onclick = move6;
		document.getElementById("form1").b7.onclick = move7;
		document.getElementById("form1").b8.onclick = move8; 
		document.getElementById("newGame").onclick = newGame;
  var elt = document.getElementById("form1");
		elt.b0.style.fontSize = "120";
		elt.b1.style.fontSize = "120";
		elt.b2.style.fontSize = "120";
		elt.b3.style.fontSize = "120";
		elt.b4.style.fontSize = "120";
		elt.b5.style.fontSize = "120";
		elt.b6.style.fontSize = "120";
		elt.b7.style.fontSize = "120";
		elt.b8.style.fontSize = "120";
		document.getElementById("newGame").tabIndex = "1";
	
		
function changeBoardColor(){
for (var i = 0; i < 9; i++){
document.getElementById(i.toString()).style.backgroundColor='#ff3333';
}
}
function makeBoardGreen(){
for (var i = 0; i < 9; i++){
document.getElementById(i.toString()).style.backgroundColor='#66ff66';
}

}
		
function newGame(){

 for (var i = 0; i < 9; i++){
		document.getElementById(i.toString()).value = "";
	} // for
	for (var i = 0; i < 9; i++){
document.getElementById(i.toString()).style.backgroundColor = document.getElementById("newGame").style.backgroundColor;
}
	numMoves = 0;
	if (document.getElementById("r2").checked == true){
	 elt.b4.value = 'O';
		numMoves++;
	}

}		
		
	function firstComputerMove(){
	var strIdx = "4";
	var str2Idx = "0";
	
if (document.getElementById(strIdx).value == ""){
 document.getElementById(strIdx).value = 'O';
	
}
else{
 document.getElementById(str2Idx).value = 'O';
	
}
numMoves++;
}	

function secondComputerMove(){
 if (elt.b4.value == 'X' && elt.b8.value == 'X'){
  elt.b6.value = 'O';
		numMoves++;
 }
	else if (elt.b2.value == 'X' && elt.b6.value == "X"){
	if (elt.b3.value == ""){ elt.b3.value = "O";}
	else{ elt.b4.value = "O";
	}}
	else if (elt.b0.value == 'X' && elt.b8.value == "X"){
	if (elt.b3.value == ""){ elt.b3.value = "O";}
	else{ elt.b4.value = "O";
	}}
		else if (elt.b0.value == 'X' && elt.b7.value == "X"){
	if (elt.b3.value == ""){ elt.b3.value = "O";}
	else{ elt.b4.value = "O";
	}}
		else if (elt.b2.value == 'X' && elt.b7.value == "X"){
	if (elt.b3.value == ""){ elt.b3.value = "O";}
	else{ elt.b4.value = "O";
	}}
		else if (elt.b6.value == 'X' && elt.b5.value == "X"){
	if (elt.b7.value == ""){ elt.b7.value = "O";}
	else{ elt.b8.value = "O";
	}}
 else{
 resultingComputerMove();
}
}

function isGameOver(){
 
 var numGameWinners = 0;
 for (var i = 0; i < 3; i++){
  if (document.getElementById((3*i).toString()).value == document.getElementById((3*i+1).toString()).value && document.getElementById((3*i).toString()).value == document.getElementById((3*i+2).toString()).value && document.getElementById((3*i).toString()).value != ""){ // checking all rows
   numGameWinners++;
  }
  if (document.getElementById((i).toString()).value == document.getElementById((i+3).toString()).value && document.getElementById((i).toString()).value == document.getElementById((i+6).toString()).value && document.getElementById((i).toString()).value != ""){ // checking columns
   numGameWinners++;
}
  if (document.getElementById((0).toString()).value == document.getElementById((4).toString()).value && document.getElementById((0).toString()).value == document.getElementById((8).toString()).value && document.getElementById((0).toString()).value != ""){ // checking first diagonal
   numGameWinners++;
}
  if (document.getElementById((2).toString()).value == document.getElementById((4).toString()).value && document.getElementById((2).toString()).value == document.getElementById((6).toString()).value && document.getElementById((2).toString()).value != ""){ // checking second diagonal
   
			numGameWinners++;
}

}
return numGameWinners;
}



function indexOfWinningMoveComputer(){
 for (var i = 0; i < 9; i++){
  if (document.getElementById(i.toString()).value != ""){
   continue;}
  document.getElementById(i.toString()).value = 'O'; // seeing if computer moving here would end the game
		if (isGameOver()){
   document.getElementById(i.toString()).value = "";
   return i; // returning index of winning move
}
  document.getElementById(i.toString()).value = "";
} // for
 return -1;
}

function indexOfWinningMoveUser(){
 for (var i = 0; i < 9; i++){
  if (document.getElementById(i.toString()).value != ""){
   continue;}
  document.getElementById(i.toString()).value = 'X'; // seeing if user moving here would end the game
		if (isGameOver()){
   document.getElementById(i.toString()).value = "";
   return i;
 }
 document.getElementById(i.toString()).value = "";
} // for
return -1;
}

function numPossibleWinningMoves(){

 var numWinningMoves = 0;
 for (var i = 0; i < 9; i++){
  if (document.getElementById(i.toString()).value != ""){
   continue;}
  document.getElementById(i.toString()).value = 'O'; // seeing if computer moving here would end the game
		if (isGameOver()){
   numWinningMoves++;
 }
 document.getElementById(i.toString()).value = "";
} // for
return numWinningMoves;

}

function resultingComputerMove(){

if (indexOfWinningMoveComputer() != -1){
		document.getElementById(indexOfWinningMoveComputer()).value = "O";
		numMoves++;
		changeBoardColor();
		return;
		// winning move just made so game over
}
if (indexOfWinningMoveUser() != -1){
 document.getElementById(indexOfWinningMoveUser()).value = "O";
	numMoves++;
 return; // prevented user from doing winning move
}

for (var i = 0; i <9; i++){ // if next move creates two resulting possible winning move
 if (document.getElementById(i.toString()).value != ""){
  continue;
 }
 document.getElementById(i.toString()).value = "O"
	var numWinningMoves = numPossibleWinningMoves();
 if (numWinningMoves > 1){
	  numMoves++;
  return;
 }
 document.getElementById(i.toString()).value = ""
}

for (var i = 0; i <9; i++){ // if next move creates a resulting possible winning move
 if (document.getElementById(i.toString()).value != ""){
  continue;
 }
 document.getElementById(i.toString()).value = "O"
 if (indexOfWinningMoveComputer() != -1){
	  numMoves++;
  return;
 }
 document.getElementById(i.toString()).value = ""
}

for (var i = 0; i <9; i++){
 if (document.getElementById(i.toString()).value == ""){
  document.getElementById(i.toString()).value = 'O';
		numMoves++;
  return;
}

}
}
	
		
function computerMove(){
	if (numMoves == 9){
	 return;
	}
	else if (numMoves == 1){
		firstComputerMove();
	}
	else if (numMoves == 3){
		secondComputerMove();
	}
	else{
		resultingComputerMove();
	}
}
function move0(){
if (isGameOver()){ return;}
if (elt.b0.value != ""){ return;}
if (document.getElementById("r3").checked == false){
  elt.b0.value = "X";
		numMoves++;
		computerMove();
}
else{
 if (numMoves%2 == 0){
	 elt.b0.value = "X";
		numMoves++;
		if (isGameOver()){ makeBoardGreen(); alert();}
	}
	else{
	 elt.b0.value = "O";
		numMoves++;
				if (isGameOver()){ makeBoardGreen();  alert(); }
	}
}
}
function move1(){
if (isGameOver()){ return;}
if (elt.b1.value != ""){ return;}
if (document.getElementById("r3").checked == false){
  elt.b1.value = "X";
		numMoves++;
		computerMove();
}
else{
 if (numMoves%2 == 0){
	 elt.b1.value = "X";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
	else{
	 elt.b1.value = "O";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()  ;}
	}
}
}
function move2(){
if (isGameOver()){ return;}
if (elt.b2.value != ""){ return;}
if (document.getElementById("r3").checked == false){
  elt.b2.value = "X";
		numMoves++;
		computerMove();
}
else{
 if (numMoves%2 == 0){
	 elt.b2.value = "X";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
	else{
	 elt.b2.value = "O";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
}
}
function move3(){
if (isGameOver()){ return;}
if (elt.b3.value != ""){ return;}
if (document.getElementById("r3").checked == false){
  elt.b3.value = "X";
		numMoves++;
		computerMove();
}
else{
 if (numMoves%2 == 0){
	 elt.b3.value = "X";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
	else{
	 elt.b3.value = "O";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()  ;}
	}
}
}
function move4(){
if (isGameOver()){ return;}
if (elt.b4.value != ""){ return;}
if (document.getElementById("r3").checked == false){
  elt.b4.value = "X";
		numMoves++;
		computerMove();
}
else{
 if (numMoves%2 == 0){
	 elt.b4.value = "X";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()  ;}
	}
	else{
	 elt.b4.value = "O";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
}
}
function move5(){
if (isGameOver()){ return;}
if (elt.b5.value != ""){ return;}
if (document.getElementById("r3").checked == false){
  elt.b5.value = "X";
		numMoves++;
		computerMove();
}
else{
 if (numMoves%2 == 0){
	 elt.b5.value = "X";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
	else{
	 elt.b5.value = "O";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()  ;}
	}
}
}
function move6(){
if (isGameOver()){ return;}
if (elt.b6.value != ""){ return;}
if (document.getElementById("r3").checked == false){
  elt.b6.value = "X";
		numMoves++;
		computerMove();
}
else{
 if (numMoves%2 == 0){
	 elt.b6.value = "X";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()  ;}
	}
	else{
	 elt.b6.value = "O";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
}
}
function move7(){
if (isGameOver()){ return;}
if (elt.b7.value != ""){ return;}
if (document.getElementById("r3").checked == false){
  elt.b7.value = "X";
		numMoves++;
		computerMove();
}
else{
 if (numMoves%2 == 0){
	 elt.b7.value = "X";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
	else{
	 elt.b7.value = "O";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
}
}
function move8(){
if (isGameOver()){ return;}
if (elt.b8.value != ""){ return;}
if (document.getElementById("r3").checked == false){
  elt.b8.value = "X";
		numMoves++;
		computerMove();
}
else{
 if (numMoves%2 == 0){
	 elt.b8.value = "X";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
	else{
	 elt.b8.value = "O";
		numMoves++;
				if (isGameOver()){ makeBoardGreen()   ;}
	}
}
}
</script>
