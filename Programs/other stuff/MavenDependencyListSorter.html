<html>
<head>
<title>Maven Dependency List Sorter</title>
</head>
<body>
	<h3>Maven Dependency List Sorter</h3>
	<form id="form1" action="" method="post">
		<table border="0">
			<tr>
				<td>Unsorted Dependency List</td>
				<td><textarea id="depList" cols = "100" rows = "3"></textarea></td>
			</tr>
			<tr>
				<td><input type="button" name="addBtn" value="Generate" /></td>
				<td><input type="reset" value="Clear" /></td>
			</tr>
			<tr>
				<td>Sorted Dependency List</td>
				<td><textarea id="result" cols = "100" rows = "10"></textarea></td>
			</tr>
      <tr>
        <td>DependencyManagement</td>
        <td><textarea id="depManagement" cols = "100" rows = "10"></textarea></td>
      </tr>
		</table>
	</form>
	<script type="text/javascript">
    document.getElementById("form1").addBtn.onclick = main;
    function main() {
      var input = document.getElementById("depList").value;
      if (input == ""){
        alert("enter dependency list");
        return;
      }
      var arr = input.split("\n");
      
      // stripping off unneeded text
      for (var i = 0; i < arr.length; i++){
        var sub = arr[i].substring(arr[i].indexOf("  "), arr[i].length);
        var sub2 = sub.trim();
        arr[i] = sub2;    
      }
    arr.sort();
    var st = "";
    for (var i = 0; i < arr.length; i++){
      st += arr[i] + "\n";
    }
    st = st.substring(0, st.length-1);
    document.getElementById("result").value = st;
    var st2 = "<dependencyManagement><dependencies>";
    for (var i = 0; i < arr.length; i++){
      var arr2 = arr[i].split(":");
      var depM = "<dependency><groupId>" + arr2[0] + "</groupId><artifactId>" + arr2[1] + "</artifactId><version>"+arr2[3]+"</version></dependency>";
      st2 += depM;
    }
    st2 += "</dependencies></dependencyManagement>";
    document.getElementById("depManagement").value = st2;
    }
  </script>
</body>
</html>
