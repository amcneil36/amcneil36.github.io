

<html>
<head>
<title> Start Time Calculator </title>
</head>
<body>
<h3> Start Time Calculator </h3>
<form id = "addForm"  action = "" method = "post">
<table border = "0">
 
	<tr> <td id = "0"> Finish time:  </td> <td> <input id = "1,," type = "text" name = "userInp" value = "" size = "20" /> </td> </tr>

       	<tr><td> <input type = "button" name = "addRow" value = "Add Task" /> </td>
   
	  <td><input type = "button" name = "delRow" value = "Delete Task"/></td></tr>
  	
  
  <tr> <td id = "1"> Task 1 </td> <td> <input id = "1," type = "text" name = "task1" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "2"> Task 2 </td> <td> <input id = "2," type = "text" name = "task2" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "3"> Task 3 </td> <td> <input id = "3," type = "text" name = "task3" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "4"> Task 4 </td> <td> <input id = "4," type = "text" name = "task4" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "5"> Task 5 </td> <td> <input id = "5," type = "text" name = "task5" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "6"> Task 6 </td> <td> <input id = "6," type = "text" name = "task6" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "7"> Task 7 </td> <td> <input id = "7," type = "text" name = "task7" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "8"> Task 8 </td> <td> <input id = "8," type = "text" name = "task8" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "9"> Task 9 </td> <td> <input id = "9," type = "text" name = "task9" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "10"> Task 10 </td> <td> <input id = "10," type = "text" name = "task10" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "11"> Task 11 </td> <td> <input id = "11," type = "text" name = "task11" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "12"> Task 12 </td> <td> <input id = "12," type = "text" name = "task12" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "13"> Task 13 </td> <td> <input id = "13," type = "text" name = "task13" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "14"> Task 14 </td> <td> <input id = "14," type = "text" name = "task14" value = "" size = "20" /> </td> </tr>
  <tr> <td id = "15"> Task 15 </td> <td> <input id = "15," type = "text" name = "task15" value = "" size = "20" /> </td> </tr>
<tr>
  <td>
  <input type = "button" name = "addBtn" value = "Calculate" />
  </td>
  <td>
  <input type = "reset" value = "Clear" />
  </td>
  </tr>
  <tr> <td id = "15"> Start time: </td> <td> <input id = "15," type = "text" name = "result" value = "" size = "20" /> </td> </tr>
  





   
</table>
</form>

<script type = "text/javascript">
  for (var i = 2; i <= 15; i++){
   var temp = i;
   var temp = temp.toString();
   
  document.getElementById(temp).style.display = 'none';
  var temp = temp.concat(",");
  document.getElementById(temp).style.display = 'none';
  }

  document.getElementById("addForm").addRow.onclick = addRows;
  function addRows()
  {

   
   var elt = document.getElementById("addRow");      

   
  for (var i = 2; i <= 15; i++){
   var temp = i;
   var temp = temp.toString();
   
   if (document.getElementById(temp).style.display == 'none'){
   document.getElementById(temp).style.display = '';
   var temp = temp.concat(",");
   document.getElementById(temp).style.display = '';
   break;}}


  }



function meridiemSwap(merVal){ // changing from am to pm and vise-versa
  if (merVal == "am")
  	{merVal = "pm";}
  
  else
  {merVal = "am";}
  return merVal; 	
 }

 document.getElementById("addForm").delRow.onclick = delRows;
 function delRows()
 {
	 for (var i = 15; i >= 2; i--){
   var temp = i;
   var temp = temp.toString();
   
   if (document.getElementById(temp).style.display == ''){
   document.getElementById(temp).style.display = 'none';
   var temp = temp.concat(",");
   document.getElementById(temp).style.display = 'none';
   break;}} 	
  


 }

 document.getElementById("addForm").addBtn.onclick = main;


 
 function subTime(hrInp, minInp, hrInpS, minInpS, meridiem){
 
 if (hrInp == 12){
   
   var tat = meridiemSwap(meridiem); 
   meridiem = tat;
   }
 
   hrInp = hrInp-hrInpS;
   minInp = minInp-minInpS;
    
   if (minInp < 0){
    hrInp = hrInp - (-1*Math.floor(minInp/60));
    minInp = (minInp%60)+60;
   }
   
   if (hrInp < 0){
    hrInp = hrInp + 12;
    var temp = meridiemSwap(meridiem);
    meridiem = temp;}
   
   if (hrInp == 12){
    var temp = meridiemSwap(meridiem);
    meridiem = temp;}
   
   if (hrInp == 0){
	   hrInp = hrInp+12; }

   
   var arr1 = new Array();
   arr1.push(hrInp);
   arr1.push(minInp);
   arr1.push(meridiem);
   return arr1;



 }

function main()
 {




   var sum = "";
   var elt = document.getElementById("addForm");      
   var one = elt.userInp.value;
   var idxOne = one.indexOf(":");


   var numTasks = 15;
   for (var i = 15; i>0; i--){

   var idx = i;
   var idx = idx.toString();


   if (document.getElementById(idx).style.display == ''){
    break;}
   else{
	   numTasks = numTasks-1;}
   }
   




   if (idxOne == 1){
    var hrInp = parseFloat(one.substring(0, 1));
    var minInp = parseFloat(one.substring(2, 4));
    var meridiem = one.substring(4, 6);
  }    
   else{
    var hrInp = parseFloat(one.substring(0, 2));
    var minInp = parseFloat(one.substring(3, 5));
    var meridiem = one.substring(5, 7);
   }

 
 for (var i = 1; i <= numTasks; i++){
   var st = "task";
   var temp = i;
   var st = st.concat(temp.toString());

   var two = document.getElementById(i.toString().concat(",")).value;

   var idxTwo = two.indexOf(":");




  if (idxTwo == 1){
    var hrInpS = parseFloat(two.substring(0, 1));
    var minInpS = parseFloat(two.substring(2, 4));
  }    
   else{
    var hrInpS = parseFloat(two.substring(0, 2));
    var minInpS = parseFloat(two.substring(3, 5));
   }
  
  var vals = subTime(hrInp, minInp, hrInpS, minInpS, meridiem);
  
  var hrInp = vals[0];
  var minInp = vals[1]; 
  var meridiem = vals[2];


 }
  
  
  var uno = hrInp.toString();
   if (minInp == 0){	
    
   var temp = minInp.toString();
   var dos = "00";
   }
   if (minInp > 0 && minInp < 10){	
    
   var temp = minInp.toString();
   var dos = "0".concat(temp);
   }
   if (minInp >= 10){
    dos = minInp.toString();
   }
   var tres = meridiem;
   var res = uno.concat(":");
   var resTwo = res.concat(dos);
   var resThree = resTwo.concat(tres);
  // alert (resThree);
   elt.result.value = resThree;



 }



</script>


</body>
</html>



