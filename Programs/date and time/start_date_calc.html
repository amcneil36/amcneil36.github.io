

<html>
<head>
<title> Start Date Calculator </title>
</head>
<body>
<h3> Start Date Calculator </h3>
<form id = "addForm"  action = "" method = "post">
<table border = "0">
  <tr>
  <td> Finsh date (mm/dd/yyyy): </td> <td> <input type = "text" name = "dateVal" value = "" size = "20" /> </td> </tr>
<tr>
  <td> # of days to subtract: </td> <td> <input type = "text" name = "daysToSub" value = "" size = "20" /> </td> </tr>


  <tr>
  <td>
  <input type = "button" name = "addBtn" value = "Calculate" />
  </td>
  <td>
  <input type = "reset" value = "Clear" />
  </td>
  </tr>
   <tr><td> Start Date: </td> <td> <input type = "text" name = "finishDate" value = "" size = "20" /> </td> </tr>
</table>
</form>

<script type = "text/javascript">
  document.getElementById("addForm").addBtn.onclick = main;
 

  


  function dateToString(month, day, year){
  
  var dateString = "";	  

  if (month <10){
   var dateString = dateString.concat("0");
   var dateString = dateString.concat(month);}
  else{
   var dateString = dateString.concat(month);}
  var dateString = dateString.concat("/");
  if (day < 10){
   var dateString = dateString.concat("0");
   var dateString = dateString.concat(day);}
  else{
   var dateString = dateString.concat(day);}
  var dateString = dateString.concat("/");
  var dateString = dateString.concat(year); 
  return dateString;

  }




function subtractDays(daysToSub, month, day, year){
	
var daylist = new Array(0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
 var daysLeft = daylist[month]-day;
 var daysToSub = parseInt(daysToSub);
while (true){ 
  if (day >= daysToSub){ 
  	day -= daysToSub;
  	break;}
   
 else{ // more days left to subtract than what we have left in the month
  	daysToSub -= day;
  	month -= 1;
  	if (month < 1){ // checking if we are going from january to decemeber, if so, we need to go back a year
  		month = 12;
		year -= 1;}}
   if (month == 2 && (year%4==0) && (year%100==0 || (year)%4==0)) 
	   {day = 29;}
	 else 
	 {day = daylist[month];}}
// done with while loop
  if (day == 0){ 
    month -= 1;
  	if (month < 1){
  		month = 12;
		year -= 1;}
	day = daylist[month];
 }	
 var answer = new Array(month, day, year);
 
 return answer;
 
	
	}// done with the subtractDays funct







 function main()
  {


 var elt = document.getElementById("addForm"); 
 var dateVal = elt.dateVal.value;
  
 var month = parseFloat(dateVal.substring(0, 2));
 var day =  parseFloat(dateVal.substring(3, 5));
 var year =  parseFloat(dateVal.substring(6, 10));
 var daysToSub = elt.daysToSub.value;
 
  var result = subtractDays(daysToSub, month, day, year); 
  var finalDate = dateToString(result[0], result[1], result[2]);
  elt.finishDate.value = finalDate;

  } // ending main

</script>


</body>
</html>


