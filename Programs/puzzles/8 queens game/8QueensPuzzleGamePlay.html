<html> <head> <title> 8 Queens Puzzle Game</title> </head> 
<center><body> <h3> 8 Queens Puzzle Game</h3> </center>
<form id = "form1" action = "" method = "post"> 

<p style = "position:absolute; left:5px; top: 100px; width: 230px;"> Rules: Try to place one X in every row and column such that no X is in the same diagonal as another X.
The number of X's you are allowed to place is equal to the number of rows.  To place an X, click on any blank square. To remove an X, click on any X. 
Press "Create Table" to begin. Try with 4 rows first and then as you win, increase the number of rows by 1 until you beat 8 rows.</p>

<tr><td><input type = "button" name = "addBtn" value = "Create Table" /> </td> </tr>
<center>
<table border = "0" style = "position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);"> 
<tr>
<td><input type = "button" id = "0,0" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "0,1" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "0,2" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "0,3" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "0,4" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "0,5" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "0,6" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "0,7" onclick = "setX.call(this)" value = "" /> </td>
</tr>
<tr>
<td><input type = "button" id = "1,0" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "1,1" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "1,2" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "1,3" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "1,4" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "1,5" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "1,6" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "1,7" onclick = "setX.call(this)" value = "" /> </td>
</tr>
<tr>
<td><input type = "button" id = "2,0" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "2,1" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "2,2" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "2,3" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "2,4" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "2,5" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "2,6" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "2,7" onclick = "setX.call(this)" value = "" /> </td>
</tr>
<tr>
<td><input type = "button" id = "3,0" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "3,1" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "3,2" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "3,3" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "3,4" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "3,5" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "3,6" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "3,7" onclick = "setX.call(this)" value = "" /> </td>
</tr>
<tr>
<td><input type = "button" id = "4,0" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "4,1" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "4,2" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "4,3" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "4,4" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "4,5" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "4,6" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "4,7" onclick = "setX.call(this)" value = "" /> </td>
</tr>
<tr>
<td><input type = "button" id = "5,0" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "5,1" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "5,2" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "5,3" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "5,4" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "5,5" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "5,6" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "5,7" onclick = "setX.call(this)" value = "" /> </td>
</tr>
<tr>
<td><input type = "button" id = "6,0" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "6,1" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "6,2" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "6,3" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "6,4" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "6,5" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "6,6" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "6,7" onclick = "setX.call(this)" value = "" /> </td>
</tr>
<tr>
<td><input type = "button" id = "7,0" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "7,1" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "7,2" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "7,3" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "7,4" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "7,5" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "7,6" onclick = "setX.call(this)" value = "" /> </td>
<td><input type = "button" id = "7,7" onclick = "setX.call(this)" value = "" /> </td>
</tr>

</table> 
</center>
</form> 
<script type = "text/javascript"> 

document.getElementById("form1").addBtn.onclick = genDim;
var tbl  = document.createElement('table');
var dim = -1;
var showColors = 1;
hideAllButtons();


function hideAllButtons(){
for (var i = 0; i < 8; i++){
	for (var j = 0; j < 8; j++){
		var st = i.toString() + "," + j.toString();
		document.getElementById(st).value = '';
		document.getElementById(st).style.display = 'none';
	} // for
}	// for
} // hideAllButtons

function genDim() {
	var tempDim = parseInt(prompt("Enter the number of rows and columns you want (4-8): "));	
	while (tempDim > 8 || tempDim < 4){
		tempDim = prompt("Invald response. Enter the number of rows and columns you want (4-8): ");
	} // while
	if (isNaN(tempDim)){
		return; // if user hit cancel
	} // if
	dim = tempDim;
	hideAllButtons();
	var widthVal = (400/dim).toString();
	var fontSizeVal = (360/dim).toString();
	for (var i = 0; i < dim; i++){
		for (var j = 0; j < dim; j++){
			var str = i.toString() + "," + j.toString();
			var str2 = "width: " + widthVal + "px;" + "height: " + widthVal+ "px;" + "font-size: " + fontSizeVal + "px; line-height: 22px; display = '';"
			document.getElementById(str).style = str2;
		} // for
	} // for
} // genDim

function numX(){ // number of X on the board
	var counter = 0;
	for (var i = 0; i < dim; i++){
		for (var j = 0; j < dim; j++){
			var st = i.toString() + "," + j.toString();
			if (document.getElementById(st).value == "X"){
				counter++;
			} // if
		} // for
	} // for
	return counter;
} // numX

function isDiagonalValid(){
 var isValid = 1;
	var counter;
	var rowIdx;
	var str;
	for (var i = dim-2; i >= 0; i--){
		counter = 0;
		rowIdx = i;
		for (var j = 0; j <= dim-1-i; j++){
		  var st = rowIdx.toString() + "," + j.toString();
			if (document.getElementById(st).value == 'X'){
				counter++;
			} // if
			rowIdx++;
		} // for
		if (counter > 1){
			if (showColors){
				rowIdx = i;
				for (var g = 0; g <= dim-1-i; g++){
					str = rowIdx.toString() + "," + g.toString();
					document.getElementById(str).style.backgroundColor='#FF0000';
					rowIdx++;
				} // for
			} // if
			isValid = 0;
		} // if
	} // for

	for (var i = dim-2; i >= 0; i--){
	counter = 0;
	rowIdx = i;
	for (var j = dim-1; j >= dim-1-i; j--){
	  var st = rowIdx.toString() + "," + j.toString();
			if (document.getElementById(st).value == 'X'){
				counter++;
			} // if
			rowIdx--;
		} // for
		if (counter > 1){
				if (showColors){
				rowIdx = i;
				for (var g = dim-1; g >= dim-1-i; g--){
					str = rowIdx.toString() + "," + g.toString();
					document.getElementById(str).style.backgroundColor='#FF0000';
					rowIdx--;
				} // for
			} // if
			isValid = 0;
		} // if
	} // for

	for (var i = 1; i < dim; i++){
		rowIdx = i;
		counter = 0;
		for (var j = 0; j <= i; j++){
		 var st = rowIdx.toString() + "," + j.toString();
			if (document.getElementById(st).value == 'X'){
				counter++;
			} // if
			rowIdx--;
		} // for
		if (counter > 1){
			if (showColors){
				rowIdx = i;
				for (var g = 0; g <= i; g++){
					str = rowIdx.toString() + "," + g.toString();
					document.getElementById(str).style.backgroundColor='#FF0000';
					rowIdx--;
				} // for
			} // if
			isValid = 0;
			} // if
	} // for
	for (var i = 1; i < dim; i++){
		rowIdx = i;
		counter = 0;
		for (var j = dim-1; j >= i; j--){
		 var st = rowIdx.toString() + "," + j.toString();
			if (document.getElementById(st).value == 'X'){
				counter++;
			} // if
			rowIdx++;
		} // for
		if (counter > 1){
			if (showColors){
				rowIdx = i;
				for (var g = dim-1; g >= i; g--){
					str = rowIdx.toString() + "," + g.toString();
					document.getElementById(str).style.backgroundColor='#FF0000';
					rowIdx++;
				} // for
			} // if
			 isValid = 0;
		} // if
	} // for
	return isValid;
} // isDiagonalValid
	
function isHorizontalValid(){
 var isValid = 1;
	var counter = 0;
	for (var i = 0; i < dim; i++){
		counter = 0;
		for (var j = 0; j < dim; j++){
		 var st = i.toString() + "," + j.toString();
			if (document.getElementById(st).value == 'X'){
				counter++;
			} // if
		} // for
		if (counter > 1){
			if (showColors){
				for (var j = 0; j < dim; j++){
					str = i.toString() + "," + j.toString();
					document.getElementById(str).style.backgroundColor='#FF0000';
				} // for
			} // if
			isValid = 0;
		} // if
	} // for
	return isValid;
} // isHorizontalValid
	
function isVerticalValid(){
 var isValid = 1;
	var counter = 0;
	for (var i = 0; i < dim; i++){
		counter = 0;
		for (var j = 0; j < dim; j++){
		 var st = j.toString() + "," + i.toString();
			if (document.getElementById(st).value == 'X'){
				counter++;
			} // if
		} // for
		if (counter > 1){
			if (showColors){
				for (var j = 0; j < dim; j++){
					str = j.toString() + "," + i.toString();
					document.getElementById(str).style.backgroundColor='#FF0000';
				} // for
			} // if
			isValid = 0;
		} // if
	} // for
	return isValid;
} // isVerticalValid
	
	
function setBoardColor(){
	setBackGroundBack();
	isVerticalValid();
	isHorizontalValid();
	isDiagonalValid();
	if (isBoardValid() && numX() == dim){
	 setBackGroundGreen();
	} // if
} // setBoardColor
	
	
function isBoardValid(){
 if (!isVerticalValid() || !isHorizontalValid() || !isDiagonalValid()){
  return false;
 }
 return true;
} // isBoardValid
	
function setBackGroundGreen(){
	var str;
	for (var row = 0; row < dim; row++){
		for (var col = 0; col < dim; col++){
			str = row.toString() + "," + col.toString();
			document.getElementById(str).style.backgroundColor='#4dff4d';
		} // for
	} // for
} // setBackGroundGreen
			
function setBackGroundBack(){
	for (var row = 0; row < dim; row++){
		for (var col = 0; col < dim; col++){
			str = row.toString() + "," + col.toString();
			document.getElementById(str).style.background= document.getElementById("form1").addBtn.style.background;
		} // for
	} // for
} // setBackGroundBack

// functions for changing button on click
// if the button clicked on is blank and has no piece, a piece is placed there if it won't make too many pieces on the board
// if the button clicked has an X on it, that X is removed
// after each move is made, the board is checked to see if any colors should be updated

function setX(){ 
 var st = this.id; 
	if (document.getElementById(st).value == "" && numX() < dim){
	 document.getElementById(st).value = "X";
	}
	else{ 
	 document.getElementById(st).value = ""; 
	}
	setBoardColor();
}

 </script> </body> </html> 


