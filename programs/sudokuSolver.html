<html>

<center>
<h1> Sudoku Solver </h1>
<br><br>
<table border = "1">

<tr> 
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "0,0" id = "0,0" value = "" /></td> 
<td> <input  onclick="setValue.call(this)" type = "button"   style = "width: 42px; height: 42px; font-size: 37px;"  name = "0,1" id = "0,1" value = "" /></td>
<td style = "border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button" name = "0,2"  style = "width: 42px; height: 42px; font-size: 37px;"  id = "0,2" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"   style = "width: 42px; height: 42px; font-size: 37px;"  name = "0,3" id = "0,3" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"   style = "width: 42px; height: 42px; font-size: 37px;"  name = "0,4" id = "0,4" value = "" /></td>
<td style = " border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"   style = "width: 42px; height: 42px; font-size: 37px;"  name = "0,5" id = "0,5" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"   style = "width: 42px; height: 42px; font-size: 37px;"  name = "0,6" id = "0,6" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;"  name = "0,7" id = "0,7" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;"  name = "0,8" id = "0,8" value = "" /></td>
</tr>
<tr> 
<td> <input  onclick="setValue.call(this)" type = "button"   style = "width: 42px; height: 42px; font-size: 37px;" name = "1,0" id = "1,0" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;"  name = "1,1" id = "1,1" value = "" /></td>
<td style = "border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "1,2" id = "1,2" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "1,3" id = "1,3" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "1,4" id = "1,4" value = "" /></td>
<td style = " border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "1,5" id = "1,5" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "1,6" id = "1,6" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "1,7" id = "1,7" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "1,8" id = "1,8" value = "" /></td>
</tr>
<tr> 
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;"  name = "2,0" id = "2,0" value = "" /></td>
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "2,1" id = "2,1" value = "" /></td>
<td style = "border-bottom: 4px solid; border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "2,2" id = "2,2" value = "" />
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "2,3" id = "2,3" value = "" /></td>
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "2,4" id = "2,4" value = "" /></td>
<td style = "border-bottom: 4px solid; border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "2,5" id = "2,5" value = "" /></td>
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "2,6" id = "2,6" value = "" /></td>
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "2,7" id = "2,7" value = "" /></td>
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "2,8" id = "2,8" value = "" /></td>
</tr>
<tr> 
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "3,0" id = "3,0" value = "" /></td> 
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "3,1" id = "3,1" value = "" /></td>
<td style = "border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "3,2" id = "3,2" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "3,3" id = "3,3" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "3,4" id = "3,4" value = "" /></td>
<td style = " border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "3,5" id = "3,5" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "3,6" id = "3,6" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "3,7" id = "3,7" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "3,8" id = "3,8" value = "" /></td>
</tr>
<tr> 
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;"  name = "4,0" id = "4,0" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "4,1" id = "4,1" value = "" /></td>
<td style = "border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "4,2" id = "4,2" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "4,3" id = "4,3" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "4,4" id = "4,4" value = "" /></td>
<td style = " border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "4,5" id = "4,5" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "4,6" id = "4,6" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "4,7" id = "4,7" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "4,8" id = "4,8" value = "" /></td>
</tr>
<tr> 
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;"  name = "5,0" id = "5,0" value = "" /></td>
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "5,1" id = "5,1" value = "" /></td>
<td style = "border-bottom: 4px solid; border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "5,2" id = "5,2" value = "" /></td>
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "5,3" id = "5,3" value = "" /></td>
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "5,4" id = "5,4" value = "" /></td>
<td style = "border-bottom: 4px solid; border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "1,5" id = "5,5" value = "" />
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "5,6" id = "5,6" value = "" /></td>
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "5,7" id = "5,7" value = "" /></td>
<td style = "border-bottom: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "5,8" id = "5,8" value = "" /></td>
</tr>
<tr> 
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;"  name = "6,0" id = "6,0" value = "" /></td> 
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "6,1" id = "6,1" value = "" /></td>
<td style = "border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "6,2" id = "6,2" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "6,3" id = "6,3" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "6,4" id = "6,4" value = "" /></td>
<td style = "border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "6,5" id = "6,5" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "6,6" id = "6,6" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "6,7" id = "6,7" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "6,8" id = "6,8" value = "" /></td>
</tr>
<tr> 
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;"  name = "7,0" id = "7,0" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "7,1" id = "7,1" value = "" /></td>
<td style = "border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "7,2" id = "7,2" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "7,3" id = "7,3" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "7,4" id = "7,4" value = "" /></td>
<td style = " border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "7,5" id = "7,5" value = "" />
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "7,6" id = "7,6" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "7,7" id = "7,7" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "7,8" id = "7,8" value = "" /></td>
</tr>
<tr> 
<td> <input  onclick="setValue.call(this)" type = "button"   style = "width: 42px; height: 42px; font-size: 37px;"  name = "8,0" id = "8,0" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "8,1" id = "8,1" value = "" /></td>
<td style = "border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "8,2" id = "8,2" value = "" />
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "8,3" id = "8,3" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "8,4" id = "8,4" value = "" /></td>
<td style = " border-right: 4px solid;"> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "8,5" id = "8,5" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "8,6" id = "8,6" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "8,7" id = "8,7" value = "" /></td>
<td> <input  onclick="setValue.call(this)" type = "button"  style = "width: 42px; height: 42px; font-size: 37px;" name = "8,8" id = "8,8" value = "" /></td>
</tr>
</table>
</center>

<input style = "position:absolute; left: 35px; top: 60px;" type = "button" name = "sol" id = "sol" value = "Generate Solution" />
</html>
<script>

var allowingUserInput = 1;
var permanentValues = [];
var board = [];
var solutionDone = 0;

document.getElementById("sol").onclick = generateSolution; 

function isArrayValid(arr1){ // checks if array contains no duplicates
 var arrVals = [];
	for (var i = 0; i < 10; i++){
	 arrVals.push(0);
	} // for
	for (var i = 0; i < arr1.length; i++){
	 arrVals[arr1[i]]++;
	} // for
	for (var i = 1; i < arrVals.length; i++){
	 if (arrVals[i] > 1){
		 return false;
		} // if
	} // for
	return true;
} // isArrayValid

function isBoardValid(){ // checks for conflicts on the sudoku board
	var row1 = [];
	var row2 = [];
	var row3 = [];
	var row4 = [];
	var row5 = [];
	var row6 = [];
	var row7 = [];
	var row8 = [];
	var row9 = [];
	var col1 = [];
	var col2 = [];
	var col3 = [];
	var col4 = [];
	var col5 = [];
	var col6 = [];
	var col7 = [];
	var col8 = [];
	var col9 = [];
	var box1 = [];
	var box2 = [];
	var box3 = [];
	var box4 = [];
	var box5 = [];
	var box6 = [];
	var box7 = [];
	var box8 = [];
	var box9 = [];
	for (var i = 0; i < 9; i++){
	 row1.push(board[i]);
		row2.push(board[i+9]);
		row3.push(board[i+18]);
		row4.push(board[i+27]);
		row5.push(board[i+36]);
		row6.push(board[i+45]);
		row7.push(board[i+54]);
		row8.push(board[i+63]);
		row9.push(board[i+72]);
	} // for
	if (!isArrayValid(row1) || !isArrayValid(row2) || !isArrayValid(row3)){
	 return false;
	} // if
	else if (!isArrayValid(row4) || !isArrayValid(row5) || !isArrayValid(row6)){
	 return false;
	} // else if
	else if (!isArrayValid(row7) || !isArrayValid(row8) || !isArrayValid(row9)){
	 return false;
	} // else if
	for (var i = 0; i < 3; i++){
	 for (var j = 0; j < 3; j++){
		 box1.push(board[9*i+j]);
			box2.push(board[9*i+j+3]);
			box3.push(board[9*i+j+6]);
			box4.push(board[9*i+j+27]);
			box5.push(board[9*i+j+30]);
			box6.push(board[9*i+j+33]);
			box7.push(board[9*i+j+54]);
			box8.push(board[9*i+j+57]);
			box9.push(board[9*i+j+60]);
		} // for
	} // for
	if (!isArrayValid(box1) || !isArrayValid(box2) || !isArrayValid(box3)){
	 return false;
	} // if
	else if (!isArrayValid(box4) || !isArrayValid(box5) || !isArrayValid(box6)){
	 return false;
	} // else if
	else if (!isArrayValid(box7) || !isArrayValid(box8) || !isArrayValid(box9)){
	 return false;
	} // else if
 for (var i = 0; i < 9; i++){
	 col1.push(board[i*9]);
		col2.push(board[i*9+1]);
		col3.push(board[i*9+2]);
		col4.push(board[i*9+3]);
		col5.push(board[i*9+4]);
		col6.push(board[i*9+5]);
		col7.push(board[i*9+6]);
		col8.push(board[i*9+7]);
		col9.push(board[i*9+8]);
	} // for
 if (!isArrayValid(col1) || !isArrayValid(col2) || !isArrayValid(col3)){
	 return false;
	} // if
	else if (!isArrayValid(col4) || !isArrayValid(col5) || !isArrayValid(col6)){
	 return false;
	} // else if
	else if (!isArrayValid(col7) || !isArrayValid(col8) || !isArrayValid(col9)){
	 return false;
	} // else if
	return true;
} // isBoardValid

function readInput(){
	var st;
	for (var i = 0; i < 9; i++){
	 for (var j = 0; j < 9; j++){
		 st = i.toString() + "," + j.toString();
			if (document.getElementById(st).value == ""){
				permanentValues.push(0);
				board.push(0);
			} // if
			else{
			 permanentValues.push(1);
				board.push(parseInt(document.getElementById(st).value));
			} // else
		} // for
 } // for
} // readInput

function writeSolution(){
 var ctr = 0;
 for (var i = 0; i < 9; i++){
	 for (var j = 0; j < 9; j++){
		 var st = i.toString() + "," + j.toString();
			document.getElementById(st).value = board[ctr];
			ctr++;
		} // for
	} // for
} // writeSolution

function generateSolution(){
 if (solutionDone == 1){
	 return;
	} // if
 solutionDone = 1;
 allowingUserInput = 0;
 readInput();
 var idx = 0;
	while (idx < 81){
	 if (idx == -1){
		 alert("no solution");
			return;
		} // if
	 if (permanentValues[idx] == 1){
		 idx++;
			continue;
		} // if
		while (board[idx] < 10){
		 board[idx]++;
			if (isBoardValid()){
			 break;
			} // if
		} // while
		if (board[idx] < 10){
		 idx++;
			continue;
		} // if
		else{
		 board[idx] = 0;
			idx--;
			while(permanentValues[idx] == 1){
			 idx--;
			} // while
		} // else 
	} // while
	writeSolution();
} // generateSolution

function setValue(){ // setting the value of the button clicked
 if (allowingUserInput == 0){
	 return;
	} // if
 var val = parseInt(prompt("Enter a number 1-9 (or -1 to remove): "));
 if (val == -1){
	 this.setAttribute('value', "");
		document.getElementById(this.id).style.color = "black";
		return;
	} // if
	while (val < 1 || val > 9 || isNaN(val)){
		val = parseFloat(prompt("Enter a number 1-9 (or -1 to remove): "));
		if (val == -1){
	  this.setAttribute('value', "");
		 document.getElementById(this.id).style.color = "black";
		 return;
	 } // if
	} // while 
   this.setAttribute('value', val);
			document.getElementById(this.id).style.color = "red";
} // setValue

</script>