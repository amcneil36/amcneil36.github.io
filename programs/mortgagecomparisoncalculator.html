
<!-- saved from url=(0071)file:///C:/Users/Andrew/github/html_code/financial/gasExpenditures.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title> Mortgage comparison calculator </title>
</head>
<body>
<h2>Mortgage comparison calculator</h2>
<form id="addForm" action="file:///C:/Users/Andrew/github/html_code/financial/gasExpenditures.html" method="post">
Projected annual return on investment: <input type="text" name="annualReturnOnInvestment" value="8.5" size="1" style="text-align: right">%<br>
<div style = "float:left;">
<h3> Mortgage 1</h3>
Sale price of house: $<input type="text" name="salePrice1" value="1,421,863" size="7"><br>
Down payment: $<input type="text" name="downPayment1" value="222,222" size="7"><br>
Monthly PMI cost: $<input type="text" name="monthlyPMICost1" value="322" size="7"><br>
Annual interest rate: <input type="text" name="annualInterestRate1" value="2.5" size="1" style="text-align: right">%<br>
Closing cost as a % of loan amount: <input type="text" name="closingCostPercent1" value="3" size="1" style="text-align: right">%<br>
Duration of mortgage (years): <input type="text" name="durationOfMortgageInYears1" value="15" size="1"><br>
</div>
<div>
<h3>&nbsp;&nbsp; Mortgage 2</h3>
&nbsp;&nbsp; Sale price of house: $<input type="text" name="salePrice2" value="1,421,863" size="7"><br>
&nbsp;&nbsp; Down payment: $<input type="text" name="downPayment2" value="222,222" size="7"><br>
&nbsp;&nbsp; Monthly PMI cost: $<input type="text" name="monthlyPMICost2" value="395" size="7"><br>
&nbsp;&nbsp; Annual interest rate: <input type="text" name="annualInterestRate2" value="3" size="1" style="text-align: right">%<br>
&nbsp;&nbsp; Closing cost as a % of loan amount: <input type="text" name="closingCostPercent2" value="3" size="1" style="text-align: right">%<br>
&nbsp;&nbsp; Duration of mortgage (years): <input type="text" name="durationOfMortgageInYears2" value="30" size="1"><br>
<input type="button" name="addBtn" value="Calculate"> <input type="reset" value="Clear"> <input type = "button" name = "explanationOfCalculator" value = "Explanation of Calculator">
</div>
</form>
<p id = "outputText"> </p>
<script type="text/javascript">

function convertInputToFloat(st){
 var st2 = st.replace(/,/g, '');
 if (isNaN(st2)){
   alert("Invalid input: " + st + ". Make sure all input is made of numbers only (commas and periods are allowed).");
   throw 'invalid input: ' + st;
 }
 return parseFloat(st2);
}

function calculateCompoundInterest(initialInvestment, annualReturn, durationOfMortgageInYears){
  return (initialInvestment * (Math.pow((1+annualReturn), durationOfMortgageInYears)));
}

var formatter = new Intl.NumberFormat('en-US', {
  style: 'currency',
  currency: 'USD',
});


// interestRate: eg. 6.2% should be passed as 0.062
function calculateMonthlyMortgageCost(startingLoanAmount, durationOfMortgageInYears, interestRate)
{
    var interestRatePerMonth = interestRate / 12;
    return startingLoanAmount * interestRatePerMonth * (Math.pow(1 + interestRatePerMonth, durationOfMortgageInYears*12)) / (Math.pow(1 + interestRatePerMonth, durationOfMortgageInYears*12) - 1);
}

document.getElementById("addForm").addBtn.onclick = main;
document.getElementById("addForm").explanationOfCalculator.onclick = explanationOfCalculator;

function explanationOfCalculator(){
 alert("For someone who has enough money to pay for a house in full as well as a job that allows them to pay monthly mortgage fees should they choose to go the mortgage route, this calculator calculates whether paying for a house in full vs taking a mortgage will make more money in the long run. Taking the mortgage route always results in more money spent on the house because of interest. However, taking a mortgage allows you to place more money in investments in the short term since you end up doing a down payment instead of paying in full for the house up-front. Paying in full for the house allows you to place more money into investments in the long term but most of that money will have had less time to grow in comparison to the money placed in investments from having gone the mortgage route. So is paying in full up-front or taking a mortgage more profitable in the long-run? That depends primarily on the interest rate of the mortgage and the predicted return rate on the investments. This calculator will tell you which route will result in more money in the long run (the time at which the mortgage would have been paid off).");
}

function main(){
   var elt = document.getElementById("addForm");
   var annualReturn = convertInputToFloat(elt.annualReturnOnInvestment.value)/100;
   
   
   var salePrice1 = convertInputToFloat(elt.salePrice1.value);
   var downPayment1 = convertInputToFloat(elt.downPayment1.value);
   var monthlyPMICost1 = convertInputToFloat(elt.monthlyPMICost1.value);
   var yearlyInterestRate1 = convertInputToFloat(elt.annualInterestRate1.value)/100;
   var durationOfMortgageInYears1 = convertInputToFloat(elt.durationOfMortgageInYears1.value);
   var initialInvestment1 = 0;
   
   var monthlyMortgageCost1 = calculateMonthlyMortgageCost(salePrice1-downPayment1, durationOfMortgageInYears1, yearlyInterestRate1);
   var closingCostPercent1 = convertInputToFloat(elt.closingCostPercent1.value)/100;
   var totalInterestPaidPerYear1 = monthlyMortgageCost1*12 - ((salePrice1-downPayment1)/durationOfMortgageInYears1);
   var totalInterestPaidPerMonth1 = totalInterestPaidPerYear1/12;
   var nonInterestPerMonth1 = monthlyMortgageCost1 - totalInterestPaidPerMonth1;
   var amountOfLoanPaidBack1 = 0;
   var totalValueOfInvestments1 = 0;

   
   var nonInterestPerMonth1 = monthlyMortgageCost1 - totalInterestPaidPerMonth1;
   
   var totalClosingCostForBuyer1 = closingCostPercent1*salePrice1;
  
   /////////////////////////////////////////////
   
   var salePrice2 = convertInputToFloat(elt.salePrice2.value);
   var downPayment2 = convertInputToFloat(elt.downPayment2.value);
   var monthlyPMICost2 = convertInputToFloat(elt.monthlyPMICost2.value);
   var yearlyInterestRate2 = convertInputToFloat(elt.annualInterestRate2.value)/100;
   var durationOfMortgageInYears2 = convertInputToFloat(elt.durationOfMortgageInYears2.value);
   var initialInvestment2 = 0;
   var monthlyMortgageCost2 = calculateMonthlyMortgageCost(salePrice2-downPayment2, durationOfMortgageInYears2, yearlyInterestRate2);
   var closingCostPercent2 = convertInputToFloat(elt.closingCostPercent2.value)/100;
   var totalInterestPaidPerYear2 = monthlyMortgageCost2*12 - ((salePrice2-downPayment2)/durationOfMortgageInYears2);
   var totalInterestPaidPerMonth2 = totalInterestPaidPerYear2/12;
   var nonInterestPerMonth2 = monthlyMortgageCost2 - totalInterestPaidPerMonth2;
   var amountOfLoanPaidBack2 = 0;
   var totalValueOfInvestments2 = 0;
   var totalClosingCostForBuyer2 = closingCostPercent2*salePrice2;
   
   var nonInterestPerMonth2 = monthlyMortgageCost2 - totalInterestPaidPerMonth2;
   
   /////////////////////////////////
   
   var totalMonths = Math.max(durationOfMortgageInYears1, durationOfMortgageInYears2)*12;
   
   var totalSpentOnInvestmentsDownPayment1 = 0;
   var totalSpentOnInvestmentsDownPayment2 = 0;
   
   if (downPayment1 > downPayment2){
       initialInvestment2 = downPayment1 - downPayment2;
	   totalValueOfInvestments2 += calculateCompoundInterest(initialInvestment2, annualReturn, totalMonths/12);
	   totalSpentOnInvestmentsDownPayment2 += initialInvestment2;
   }
   
   if (downPayment2 > downPayment1){
       initialInvestment1 = downPayment2 - downPayment1;
	   totalValueOfInvestments1 += calculateCompoundInterest(initialInvestment1, annualReturn, totalMonths/12);
	   totalSpentOnInvestmentsDownPayment1 += initialInvestment1;
   }
   
   var tempMonthlyMortgageCost1 = monthlyMortgageCost1;
   var tempMonthlyMortgageCost2 = monthlyMortgageCost2;
   var tempMonthlyPMICost1 = monthlyPMICost1;
   var tempMonthlyPMICost2 = monthlyPMICost2;

   var numMonthsCompleted = 0;
   
   var arePMIPaymentsStillNeeded1 = downPayment1/salePrice1 < 0.2;
   if (!arePMIPaymentsStillNeeded1){
     tempMonthlyPMICost1 = 0;
   }
   var arePMIPaymentsStillNeeded2 = downPayment2/salePrice2 < 0.2;
   if (!arePMIPaymentsStillNeeded2){
     tempMonthlyPMICost2 = 0;
   }   
   
   var amountOfLoanPaidBackForPMITracking1 = 0;
   var amountOfLoanPaidBackForPMITracking2 = 0;
   
   var areClosingCostsSpent1 = false;
   var areClosingCostsSpent2 = false;
   
   var totalValueOfInvestmentsFromClosingCosts1 = 0;
   var totalValueOfInvestmentsFromMonthlyMortgage1 = 0;
   var totalValueOfInvestmentsFromMonthlyPMI1 = 0;
   
   var totalValueOfInvestmentsFromClosingCosts2 = 0;
   var totalValueOfInvestmentsFromMonthlyMortgage2 = 0;
   var totalValueOfInvestmentsFromMonthlyPMI2 = 0;
   
   var totalSpentOnInvestmentsClosingCosts1 = 0;
   var totalSpentOnInvestmentsClosingCosts2 = 0;   
   
   var totalSpentOnInvestmentsMonthlyMortgageCosts1 = 0;
   var totalSpentOnInvestmentsMonthlyMortgageCosts2 = 0;
   
   var totalSpentOnInvestmentsMonthlyPMICosts1 = 0;
   var totalSpentOnInvestmentsMonthlyPMICosts2 = 0;
   
   var totalSpentOnPMI1 = 0;
   var totalSpentOnPMI2 = 0;
   
   for (var numRemainingMonths = totalMonths; numRemainingMonths > 0; numRemainingMonths--){
   
      if (numMonthsCompleted == durationOfMortgageInYears1*12){
	    tempMonthlyMortgageCost1 = 0;
		totalValueOfInvestmentsFromClosingCosts2 += calculateCompoundInterest(totalClosingCostForBuyer1, annualReturn, numRemainingMonths/12);
		totalSpentOnInvestmentsClosingCosts2 += totalClosingCostForBuyer1;
		areClosingCostsSpent1 = true;
	  }

      if (numMonthsCompleted == durationOfMortgageInYears2*12){
	    tempMonthlyMortgageCost2 = 0;
		totalValueOfInvestmentsFromClosingCosts1 += calculateCompoundInterest(totalClosingCostForBuyer2, annualReturn, numRemainingMonths/12);
		totalSpentOnInvestmentsClosingCosts1 += totalClosingCostForBuyer2;
		areClosingCostsSpent2 = true;
	  }
	  	  
      if (tempMonthlyMortgageCost1 > tempMonthlyMortgageCost2){
	        var difference = tempMonthlyMortgageCost1-tempMonthlyMortgageCost2;
	        totalValueOfInvestmentsFromMonthlyMortgage2 += calculateCompoundInterest(difference, annualReturn, numRemainingMonths/12);
            totalSpentOnInvestmentsMonthlyMortgageCosts2 += difference;
	  }
	  else if (tempMonthlyMortgageCost2 > tempMonthlyMortgageCost1){
	        var difference = tempMonthlyMortgageCost2-tempMonthlyMortgageCost1;
	        totalValueOfInvestmentsFromMonthlyMortgage1 += calculateCompoundInterest(difference, annualReturn, numRemainingMonths/12);
			totalSpentOnInvestmentsMonthlyMortgageCosts1 += difference;
	  }
	  if (tempMonthlyPMICost1 > tempMonthlyPMICost2){
	  alert("this shouldn't be triggered");
	  	    var difference = tempMonthlyPMICost1-tempMonthlyPMICost2;
	        totalValueOfInvestmentsFromMonthlyPMI2 += calculateCompoundInterest(difference, annualReturn, numRemainingMonths/12);
			totalSpentOnInvestmentsMonthlyPMICosts2 += difference;
	  }
	  else if (tempMonthlyPMICost2 > tempMonthlyPMICost1){
	  	//  alert("this should be triggered");
	  	  	var difference = tempMonthlyPMICost2-tempMonthlyPMICost1;
	        totalValueOfInvestmentsFromMonthlyPMI1 += calculateCompoundInterest(difference, annualReturn, numRemainingMonths/12);
			totalSpentOnInvestmentsMonthlyPMICosts1 += difference;
	  }
	  
	  totalSpentOnPMI1 += tempMonthlyPMICost1;
	  totalSpentOnPMI2 += tempMonthlyPMICost2;
	  
	  amountOfLoanPaidBackForPMITracking1 += nonInterestPerMonth1;
      if ((downPayment1+amountOfLoanPaidBackForPMITracking1)/salePrice1 >= 0.2){
		   tempMonthlyPMICost1 = 0;
      }
	  
	  amountOfLoanPaidBackForPMITracking2 += nonInterestPerMonth2;
      if ((downPayment2+amountOfLoanPaidBackForPMITracking2)/salePrice2 >= 0.2){
		   tempMonthlyPMICost2 = 0;
      }
	  
	  numMonthsCompleted++;

   }
   
   if (!areClosingCostsSpent1 && !areClosingCostsSpent2){
     if (totalClosingCostForBuyer1 > totalClosingCostForBuyer2){
   		totalValueOfInvestments2 += totalClosingCostForBuyer1 - totalClosingCostForBuyer2;
		totalSpentOnInvestmentsClosingCosts2 += totalClosingCostForBuyer1 - totalClosingCostForBuyer2;	 
	 }
	 else if (totalClosingCostForBuyer2 > totalClosingCostForBuyer1){
   		totalValueOfInvestments1 += totalClosingCostForBuyer2 - totalClosingCostForBuyer1;
		totalSpentOnInvestmentsClosingCosts1 += totalClosingCostForBuyer2 - totalClosingCostForBuyer1;	 
	 }
   }
   else if (!areClosingCostsSpent1){
   		totalValueOfInvestments2 += totalClosingCostForBuyer1;
		totalSpentOnInvestmentsClosingCosts2 += totalClosingCostForBuyer1;
   }
   
   else if (!areClosingCostsSpent2){
   		totalValueOfInvestmentsFromClosingCosts1 += totalClosingCostForBuyer2;
		totalSpentOnInvestmentsClosingCosts1 += totalClosingCostForBuyer2;
   }
   
   totalValueOfInvestments1 += totalValueOfInvestmentsFromClosingCosts1 + totalValueOfInvestmentsFromMonthlyMortgage1 + totalValueOfInvestmentsFromMonthlyPMI1;
   totalValueOfInvestments2 += totalValueOfInvestmentsFromClosingCosts2 + totalValueOfInvestmentsFromMonthlyMortgage2 + totalValueOfInvestmentsFromMonthlyPMI2;
   
   var totalSpentOnInvestments1 = totalSpentOnInvestmentsDownPayment1 + totalSpentOnInvestmentsClosingCosts1 + totalSpentOnInvestmentsMonthlyMortgageCosts1 + totalSpentOnInvestmentsMonthlyPMICosts1;
   var totalSpentOnInvestments2 = totalSpentOnInvestmentsDownPayment2 + totalSpentOnInvestmentsClosingCosts2 + totalSpentOnInvestmentsMonthlyMortgageCosts2 + totalSpentOnInvestmentsMonthlyPMICosts2;   
   
   var mortgageString1 = "Summary of mortgage 1: <br><ul><li>Money in investments after " + totalMonths/12 + " years: " + formatter.format(totalValueOfInvestments1); 
   mortgageString1 += "<ul>"
   if (initialInvestment1 != 0){
      mortgageString1 += "<li>" + formatter.format(initialInvestment1) + " from investing the difference in the down payment at the start</li>";
   }
   if (totalValueOfInvestmentsFromMonthlyPMI1 != 0){
      mortgageString1 += "<li>" + formatter.format(totalValueOfInvestmentsFromMonthlyPMI1) + " from investing the difference in PMI costs each month</li>";
   }
   if (totalValueOfInvestmentsFromMonthlyMortgage1 !=0 ){
      mortgageString1 += "<li>" + formatter.format(totalValueOfInvestmentsFromMonthlyMortgage1) + " from investing the difference in mortgage costs each month</li>";
   }
   if (totalValueOfInvestmentsFromClosingCosts1 != 0){
      mortgageString1 += "<li>" + formatter.format(totalValueOfInvestmentsFromClosingCosts1) + " from investing the difference in closing costs at the time of mortgage2's closing cost payment</li>";
   }
   mortgageString1 += "</ul>";
   mortgageString1 += "<li>" + formatter.format(totalSpentOnInvestments1) + " spent on investments</li>";
         mortgageString1 += "<ul>"
   if (totalSpentOnInvestmentsDownPayment1!= 0){
        mortgageString1 += "<li>" + formatter.format(totalSpentOnInvestmentsDownPayment1) + " spent on investing the difference in down payment cost</li>";
   }
   if (totalSpentOnInvestmentsMonthlyPMICosts1 != 0){
      mortgageString1 += "<li>" + formatter.format(totalSpentOnInvestmentsMonthlyPMICosts1) + " spent on investing the difference in PMI costs each month</li>";
   }
   if (totalSpentOnInvestmentsMonthlyMortgageCosts1 != 0){
      mortgageString1 += "<li>" + formatter.format(totalSpentOnInvestmentsMonthlyMortgageCosts1) + " spent on investing the difference in monthly mortgage costs each month</li>";
   }
   if (totalSpentOnInvestmentsClosingCosts1 != 0){
      mortgageString1 += "<li>" + formatter.format(totalSpentOnInvestmentsClosingCosts1) + " spent on investing the difference in closing costs at the time of mortgage2's closing cost payment</li>";
   }
   mortgageString1 += "</ul>";
   var totalSpentOnMortgage1 = 0;
   var totalSpentOnInterest1 = totalInterestPaidPerYear1*durationOfMortgageInYears1;
   var additionalExpenses1 = totalSpentOnInterest1 + totalSpentOnPMI1 + totalClosingCostForBuyer1;
   totalSpentOnMortgage1 += salePrice1 + additionalExpenses1;
   mortgageString1 += "<li>" + formatter.format(totalSpentOnMortgage1) + " spent on mortgage</li>";
   mortgageString1 += "<ul>"
   mortgageString1 += "<li>" + formatter.format(salePrice1) + " of this is from the sale price</li>";
   mortgageString1 += "<li>" + formatter.format(additionalExpenses1) + " of this is from additional expenses that resulted from taking a mortgage as opposed to paying in full up-front</li>";
   mortgageString1 += "<ul><li>" + formatter.format(totalSpentOnInterest1) + " spent on interest</li>";
   mortgageString1 += "<li>" + formatter.format(totalSpentOnPMI1) + " spent on PMI</li>";
   mortgageString1 += "<li>" + formatter.format(totalClosingCostForBuyer1) + " spent on closing costs</li>";
   mortgageString1 += "</ul></ul>";
   mortgageString1 += "<li>" + formatter.format(totalSpentOnMortgage1+totalSpentOnInvestments1) + " spent in total (total spent on investments + total spent on mortgage)</li>";
   mortgageString1 += "</li></ul>";
 
/////////////////////////////////////////////
   var mortgageString2 = "Summary of mortgage 2: <br><ul><li>Money in investments after " + totalMonths/12 + " years: " + formatter.format(totalValueOfInvestments2); 
   mortgageString2 += "<ul>"
   if (initialInvestment2 != 0){
      mortgageString2 += "<li>" + formatter.format(initialInvestment2) + " from investing the difference in the down payment at the start</li>";
   }
   if (totalValueOfInvestmentsFromMonthlyPMI2 != 0){
      mortgageString2 += "<li>" + formatter.format(totalValueOfInvestmentsFromMonthlyPMI2) + " from investing the difference in PMI costs each month</li>";
   }
   if (totalValueOfInvestmentsFromMonthlyMortgage2 !=0 ){
      mortgageString2 += "<li>" + formatter.format(totalValueOfInvestmentsFromMonthlyMortgage2) + " from investing the difference in mortgage costs each month</li>";
   }
   if (totalValueOfInvestmentsFromClosingCosts2 != 0){
      mortgageString2 += "<li>" + formatter.format(totalValueOfInvestmentsFromClosingCosts2) + " from investing the difference in closing costs at the time of mortgage1's closing cost payment</li>";
   }
   mortgageString2 += "</ul>";
   mortgageString2 += "<li>" + formatter.format(totalSpentOnInvestments2) + " spent on investments</li>";
         mortgageString2 += "<ul>"
   if (totalSpentOnInvestmentsDownPayment2!= 0){
        mortgageString2 += "<li>" + formatter.format(totalSpentOnInvestmentsDownPayment2) + " spent on investing the difference in down payment cost</li>";
   }
   if (totalSpentOnInvestmentsMonthlyPMICosts2 != 0){
      mortgageString2 += "<li>" + formatter.format(totalSpentOnInvestmentsMonthlyPMICosts2) + " spent on investing the difference in PMI costs each month</li>";
   }
   if (totalSpentOnInvestmentsMonthlyMortgageCosts2 != 0){
      mortgageString2 += "<li>" + formatter.format(totalSpentOnInvestmentsMonthlyMortgageCosts2) + " spent on investing the difference in monthly mortgage costs each month</li>";
   }
   if (totalSpentOnInvestmentsClosingCosts2 != 0){
      mortgageString2 += "<li>" + formatter.format(totalSpentOnInvestmentsClosingCosts2) + " spent on investing the difference in closing costs at the time of mortgage1's closing cost payment</li>";
   }
   mortgageString2 += "</ul>";
   var totalSpentOnMortgage2 = 0;
   var totalSpentOnInterest2 = totalInterestPaidPerYear2*durationOfMortgageInYears2;
   var additionalExpenses2 = totalSpentOnInterest2 + totalSpentOnPMI2 + totalClosingCostForBuyer2;
   totalSpentOnMortgage2 += salePrice2 + additionalExpenses2;
   mortgageString2 += "<li>" + formatter.format(totalSpentOnMortgage2) + " spent on mortgage</li>";
   mortgageString2 += "<ul>"
   mortgageString2 += "<li>" + formatter.format(salePrice2) + " of this is from the sale price</li>";
   mortgageString2 += "<li>" + formatter.format(additionalExpenses2) + " of this is from additional expenses that resulted from taking a mortgage as opposed to paying in full up-front</li>";
   mortgageString2 += "<ul><li>" + formatter.format(totalSpentOnInterest2) + " spent on interest</li>";
   mortgageString2 += "<li>" + formatter.format(totalSpentOnPMI2) + " spent on PMI</li>";
   mortgageString2 += "<li>" + formatter.format(totalClosingCostForBuyer2) + " spent on closing costs</li>";
   mortgageString2 += "</ul></ul>";
   mortgageString2 += "<li>" + formatter.format(totalSpentOnMortgage2+totalSpentOnInvestments2) + " spent in total (total spent on investments + total spent on mortgage)</li>";
   mortgageString2 += "</li></ul>";

////////////////////
  
   
   document.getElementById("outputText").innerHTML  = mortgageString1 + "<br>" + mortgageString2;
}
</script>






</body></html>