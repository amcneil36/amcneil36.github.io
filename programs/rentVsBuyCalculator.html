
<!-- saved from url=(0071)file:///C:/Users/Andrew/github/html_code/financial/gasExpenditures.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title> Buy vs Rent Calculator </title>
</head>
<body>
<h2>Buy vs Rent calculator</h2>
<form id="addForm" action="file:///C:/Users/Andrew/github/html_code/financial/gasExpenditures.html" method="post">
Projected annual return on investment: <input type="text" name="annualReturnOnInvestment" value="10" size="1" style="text-align: right">%<br>
Annual inflation: <input type="text" name="annualInflation" value="2" size="1" style="text-align: right">%<br>
<div style = "float:left;">
<h3>Buy</h3>
Sale price of house: $<input type="text" name="salePrice" value="800,000" size="7"><br>
Down payment: $<input type="text" name="downPayment" value="40,000" size="7"><br>
Monthly PMI cost: $<input type="text" name="monthlyPMICost" value="255" size="7"><br>
Annual interest rate: <input type="text" name="annualInterestRate" value="2.625" size="1" style="text-align: right">%<br>
Closing cost as a % of loan amount: <input type="text" name="closingCostPercent" value="3.5" size="1" style="text-align: right">%<br>
Duration of mortgage (years): <input type="text" name="durationOfMortgageInYears" value="30" size="1"><br>
Property tax <input type="text" name="propertyTax" value="0.78" size="1" style="text-align: right">%<br>
Monthly HoA fees $<input type="text" name="monthlyHoaFees" value="200" size="7"><br>
Monthly Homeowners insurance $<input type="text" name="monthlyHomeownersInsurance" value="280" size="7"><br>
Yearly home appreciation: <input type="text" name="annualHomeAppreciation" value="2.5" size="1" style="text-align: right">%<br>
Yearly maintenance cost $<input type="text" name="yearlyMaintenanceCost" value="9,000" size="7"><br>
<!-- add in yearly maintenance repairs and inflation -->
<input type="button" name="addBtn" value="Calculate"> <input type="reset" value="Clear"> <input type = "button" name = "explanationOfCalculator" value = "Explanation of Calculator">
</div>
<div>
<h3> Rent</h3>
Monthly rent cost: $<input type="text" name="monthlyRentCost" value="1,300" size="7"><br>
Monthly renter's insurance cost: $<input type="text" name="monthlyRentersInsuranceCost" value="12" size="7"><br>
Yearly apartment appreciation: <input type="text" name="yearlyApartmentAppreciation" value="2.5" size="1" style="text-align: right">%<br><br><br><br><br><br><br><br><br><br><br><br><br>
</div>
<p id = "outputText"> </p>
</form>
<script type="text/javascript">

function convertInputToFloat(st){
 var st2 = st.replace(/,/g, '');
 if (isNaN(st2)){
   alert("Invalid input: " + st + ". Make sure all input is made of numbers only (commas and periods are allowed).");
   throw 'invalid input: ' + st;
 }
 return parseFloat(st2);
}

function calculateCompoundInterest(initialInvestment, annualReturn, durationOfMortgageInYears){
  return (initialInvestment * (Math.pow((1+annualReturn), durationOfMortgageInYears)));
}

var formatter = new Intl.NumberFormat('en-US', {
  style: 'currency',
  currency: 'USD',
});


// interestRate: eg. 6.2% should be passed as 0.062
function calculateMonthlyMortgageCost(startingLoanAmount, durationOfMortgageInYears, interestRate)
{
    var interestRatePerMonth = interestRate / 12;
    return startingLoanAmount * interestRatePerMonth * (Math.pow(1 + interestRatePerMonth, durationOfMortgageInYears*12)) / (Math.pow(1 + interestRatePerMonth, durationOfMortgageInYears*12) - 1);
}

document.getElementById("addForm").addBtn.onclick = main;
document.getElementById("addForm").explanationOfCalculator.onclick = explanationOfCalculator;

function explanationOfCalculator(){
 alert("This calculator compares whether buying or renting is more profitable, assuming the difference in cost is invested each month. For example, if a buyer spends $3,000 one month and a renter spends $2,000 that same month, then the renter will invest $1,000 that month while the buyer invests $0 that month. If a buyer spends $3,000 one month and a renter spends $5,000 that month, then the buyer will invest $2,000 that month and the renter will invest $0. The annual cost of repair is done at the end of each year. The HoA fees, renters insurance fees, homewoners insurance fees, and maintenance costs all increase at the end of each year by the inflation amount. The value of the house increases by the appreciation at the end of the year and thus makes the property tax payments more expensive. The rent increases at the end of each year by the apartment appreciation amount. To simulate paying cash for a house, enter a down payment equal to the sale price while leaving the mortgage duration at 30 years or whichever length of time you want to compare the results of buying vs renting after.");
}

function main(){
   var elt = document.getElementById("addForm");
   var annualReturn = convertInputToFloat(elt.annualReturnOnInvestment.value)/100;
   var salePrice = convertInputToFloat(elt.salePrice.value);
   var downPayment = convertInputToFloat(elt.downPayment.value);
   var monthlyPMICost = convertInputToFloat(elt.monthlyPMICost.value);
   var annualInterestRate = convertInputToFloat(elt.annualInterestRate.value)/100;
   var closingCostPercent = convertInputToFloat(elt.closingCostPercent.value)/100;
   if (downPayment == salePrice){
     closingCostPercent = 0;
   }
   var durationOfMortgageInYears = convertInputToFloat(elt.durationOfMortgageInYears.value);
   var propertyTax = convertInputToFloat(elt.propertyTax.value)/100;
   var monthlyHoaFees = convertInputToFloat(elt.monthlyHoaFees.value);
   var monthlyHomeownersInsurance = convertInputToFloat(elt.monthlyHomeownersInsurance.value);
   var yearlyMaintenanceCost = convertInputToFloat(elt.yearlyMaintenanceCost.value);
   var annualHomeAppreciation = convertInputToFloat(elt.annualHomeAppreciation.value)/100;
   var annualInflation = convertInputToFloat(elt.annualInflation.value)/100;
   var monthlyMortgageCost = calculateMonthlyMortgageCost(salePrice-downPayment, durationOfMortgageInYears, annualInterestRate);
   var valueOfHouse = salePrice;
   
   var monthlyRentCost = convertInputToFloat(elt.monthlyRentCost.value);
   var monthlyRentersInsuranceCost = convertInputToFloat(elt.monthlyRentersInsuranceCost.value);
   var yearlyApartmentAppreciation = convertInputToFloat(elt.yearlyApartmentAppreciation.value)/100;

   var totalMoneySpentOnInvestmentsBuyer = 0;
   var totalMoneySpentOnInvestmentsRenter = 0;
   
   var totalMoneyFromInvestmentsRenter = 0;
   var totalMoneyFromInvestmentsBuyer = 0;
   totalMoneyFromInvestmentsRenter += calculateCompoundInterest(downPayment, annualReturn, durationOfMortgageInYears);
   totalMoneySpentOnInvestmentsRenter += downPayment;
   totalMoneyFromInvestmentsRenter += calculateCompoundInterest(closingCostPercent*salePrice, annualReturn, durationOfMortgageInYears);
   totalMoneySpentOnInvestmentsRenter += closingCostPercent*salePrice;
   var totalMonthlyCostForBuyer = 0;
   var totalMonthlyCostForRenter = 0;
   var arePMIPaymentsStillNeeded = downPayment/salePrice < 0.2;
   var totalInterestPaidPerYear = monthlyMortgageCost*12 - ((salePrice-downPayment)/durationOfMortgageInYears);
   var totalInterestPaidPerMonth = totalInterestPaidPerYear/12;
   var nonInterestPerMonth = monthlyMortgageCost - totalInterestPaidPerMonth;
   var amountOfLoanPaidBackForPMITracking = 0;
   var totalCostForBuyer = 0;
   totalCostForBuyer += downPayment + closingCostPercent*salePrice;
   var totalCostForRenter = 0;
   if (!arePMIPaymentsStillNeeded){
     monthlyPMICost = 0;
   }
   for (var yearsRemaining = durationOfMortgageInYears-1; yearsRemaining >= 0; yearsRemaining--){
    totalMonthlyCostForBuyer = monthlyMortgageCost + monthlyPMICost + valueOfHouse*propertyTax/12 + monthlyHoaFees + monthlyHomeownersInsurance;
	totalMonthlyCostForRenter = monthlyRentCost + monthlyRentersInsuranceCost;
    for (var monthsRemainingInYear = 11; monthsRemainingInYear >= 0; monthsRemainingInYear--){
	  if (totalMonthlyCostForBuyer > totalMonthlyCostForRenter){
	    totalMoneyFromInvestmentsRenter += calculateCompoundInterest(totalMonthlyCostForBuyer-totalMonthlyCostForRenter, annualReturn, yearsRemaining + monthsRemainingInYear);
		totalMoneySpentOnInvestmentsRenter += totalMonthlyCostForBuyer-totalMonthlyCostForRenter;
	  }
	  else{
	    totalMoneyFromInvestmentsBuyer += calculateCompoundInterest(totalMonthlyCostForRenter-totalMonthlyCostForBuyer, annualReturn, yearsRemaining + monthsRemainingInYear);
		totalMoneySpentOnInvestmentsBuyer += totalMonthlyCostForRenter-totalMonthlyCostForBuyer;
	  }
	  amountOfLoanPaidBackForPMITracking += nonInterestPerMonth;
	  totalCostForBuyer += totalMonthlyCostForBuyer;
	  totalCostForRenter += totalMonthlyCostForRenter;
      if ((downPayment+amountOfLoanPaidBackForPMITracking)/salePrice >= 0.2){
		   monthlyPMICost = 0;
      }
	}
	monthlyRentCost = monthlyRentCost + monthlyRentCost*yearlyApartmentAppreciation;
    monthlyRentersInsuranceCost = monthlyRentersInsuranceCost + monthlyRentersInsuranceCost*annualInflation;	
	valueOfHouse = valueOfHouse + valueOfHouse*annualHomeAppreciation;
	monthlyHoaFees += monthlyHoaFees*annualInflation;
	monthlyHomeownersInsurance += monthlyHomeownersInsurance*annualInflation;
	totalMoneyFromInvestmentsRenter += calculateCompoundInterest(yearlyMaintenanceCost, annualReturn, yearsRemaining + monthsRemainingInYear);
	totalMoneySpentOnInvestmentsRenter += yearlyMaintenanceCost;
	totalCostForBuyer += yearlyMaintenanceCost;
	yearlyMaintenanceCost = yearlyMaintenanceCost + yearlyMaintenanceCost*annualInflation;
   }

  var outputString = "";
  outputString += "Summary of buyer after " + durationOfMortgageInYears + " years:<br>";
  outputString += "<ul><li>Total money in investments: " + formatter.format(totalMoneyFromInvestmentsBuyer) + "</li>";
  outputString += "<li>Total value of the house: " + formatter.format(valueOfHouse) + "</li>";
  outputString += "<li>Total money spent on fees: " + formatter.format(totalCostForBuyer) + "</li>";
  outputString += "<li>Total money spent on investments: " + formatter.format(totalMoneySpentOnInvestmentsBuyer) + "</li>";
  outputString += "<li>Total money spent (fees + investments): " + formatter.format(totalMoneySpentOnInvestmentsBuyer + totalCostForBuyer) + "</li>";
  outputString += "<li>Buyer's total cost for next year: " + formatter.format((monthlyMortgageCost + monthlyPMICost + valueOfHouse*propertyTax/12 + monthlyHoaFees + monthlyHomeownersInsurance)*12 + yearlyMaintenanceCost) + "</li></ul>";
  outputString += "Summary of renter after " + durationOfMortgageInYears + " years:<br>";  
  outputString += "<ul><li>Total money in investments: " + formatter.format(totalMoneyFromInvestmentsRenter) + "</li>";
  outputString += "<li>Total money spent on fees: " + formatter.format(totalCostForRenter) + "</li>";
  outputString += "<li>Total money spent on investments: " + formatter.format(totalMoneySpentOnInvestmentsRenter) + "</li>";
  outputString += "<li>Total money spent (fees + investments): " + formatter.format(totalMoneySpentOnInvestmentsRenter + totalCostForRenter) + "</li>";
  outputString += "<li>Renter's total cost for next year: " + formatter.format((monthlyRentCost + monthlyRentersInsuranceCost)*12) + "</li></ul>";
   
  document.getElementById("outputText").innerHTML  = outputString;
}
</script>






</body></html>