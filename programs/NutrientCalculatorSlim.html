<html>
<head>
<title>Nutrient Calculator Slim</title>
</head>
<body onload = "scroll();">
<h3>
Nutrient Calculator Slim <input type="button" id="refreshPage" value="Return to Home" /> 
</h3>
<table id="myTable" border="0" style="table-layout:fixed; white-space:nowrap;">
<tr>
<td>Index</td>
<td>Food Name</td>
<td>Weight(g)</td>
<td>Calories</td>
<td>Protein(g)</td>
<td>Total Fat(g)</td>
<td>Carbs(g)</td>
<td>Sodium(mg)</td>
<td>Cholesterol(mg)</td>
<td>Added Sugars(g)</td>
<td>Fiber(g)</td>
<td>Current Date & Time</td>
</tr>
<tr>
<td>TOTALS</td>
<td></td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td></td>
</table>
<form id="nutritionForm" action="" method="post">
<table id="inputForm" border="0">
<tr>
<td id = "inputRow1" style="font-size: 40px">Food Name: <select style="font-size: 40px" id="itemName" name="itemName" style = "white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:200px;">
</select>
</td>
</tr>
<tr>
<td id = "inputRow2" style="font-size: 40px">Mode: <input type="radio" style="height:40px; width:40px;" name="unitsOfMeasurement" value="Weight" id="weightRadio" onchange="handleChange()" /> Weight <input type="radio" style="height:40px; width:40px;" name="unitsOfMeasurement" value="Servings" id="servingsRadio" onchange="handleChange()" /> Servings
</td>
</tr>
<tr>
<td id="unitTypeTD" style="font-size: 40px">Weight: <input type="text" style="font-size: 40px" name="weight" id="weight" value="" size="5" /> <select id="weightUnits" name="weightUnits" style = "white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 40px">
<option selected="selected" style="font-size: 40px">g</option>
<option value="ounces" style="font-size: 40px">oz</option>
<option value="pounds" style="font-size: 40px">lb</option>
<option value="kilograms" style="font-size: 40px">kg</option>
</select>
</td>
</tr>
<tr>
<td id = "inputRow3"><input type="button" name="addBtn" value="Insert Row"  style="font-size: 40px"/> <input type="button" name="deleteRow" id="deleteRow" style="font-size: 40px" value="Delete Row By Index" /></td>
</tr>
<tr>
<td> 
</tr>
</td>
<tr>
<td><input type="button" name="addNutritionFacts" id = "addNutritionFacts" value="Add Nutrition Facts"  style="font-size: 40px"/><input type="button" style="font-size: 40px" name="deleteNutritionFacts" value="Delete Nutrition Facts" id="deleteNutritionFacts" /></td>
</tr>
<tr>
<td>&nbsp;
</td>
</tr>
<tr>
<td><input type="button" name="onebyone" id="onebyone" value="OneByOneNutrientLinearSolver"  style="font-size: 40px"/></td>
</tr>
<tr>
<td><input type="button" name="twobytwo" id="twobytwo" value="TwoByTwoNutrientLinearSolver" style="font-size: 40px"></td>
</tr>
<tr>
<td><input type="button" name="threebythree" id="threebythree" value="ThreeByThreeNutrientLinearSolver" style="font-size: 40px"></td>
</tr>
</table>
</form>
<form id="deleteForm" action="" method="post">
<table id="deleteTable" border="0" style="position: absolute; top: 55px; left: 7px; visibility: hidden">
<tr>
<td>Item to delete: <select id="itemToDelete" name="itemToDelete" style = "white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:200px;">
</select></td>
</tr>
<tr>
<td><input type="button" id="deleteInformation" value="Delete Information" /> <input type="button" value="Cancel" id="cancelButton2" /></td>
</tr>
</table>
</form>

<form id = "nutrientGoalForm" action = "" method = "post">
<table id = "nutrientGoalTable" border = "0" style = "position:absolute; top:55px; left:7px; visibility:hidden;">
<tr>
<td>Calories Daily Goal: <input type="text" name="calories_inp" id="calories_inp" value="0" size="5" />
</td>
</tr>
<tr>
<td>Protein Daily Goal (g): <input type="text" name="protein_inp" id="protein_inp" value="0" size="5" />
</td>
</tr>
<tr>
<td>Total Fat Daily Goal (g): <input type="text" name="totalFat_inp" id="totalFat_inp" value="0" size="5" />
</td>
</tr>
<tr>
<td>Carbs Daily Goal (g): <input type="text" name="carbs_inp" id="carbs_inp" value="0" size="5" />
</td>
</tr>
<tr>
<td>Cholesterol Daily Goal (mg): <input type="text" name="cholesterol_inp" id="cholesterol_inp" value="0" size="5" />
</td>
</tr>
<tr>
<td>Sodium Daily Goal (mg): <input type="text" name="sodium_inp" id="sodium_inp" value="0" size="5" />
</td>
</tr> 
<tr>
<td>Fiber Daily Goal (g): <input type="text" name="fiber_inp" id="fiber_inp" value="0" size="5" />
</td>
</tr>
<tr><td>Added Sugars Daily Goal (g): <input type="text" id = "addedSugars_inp" value = "0" size = "5"/></td></tr>
<td><input type="button" id="storeGoals" value="Store Information" /> <input type="button" value="Cancel" id="quit" /></td>
</form>

<form id="foodStorageForm" action="" method="post">
<table id="foodStorage" border="0" style="position: absolute; top: 55px; left: 7px; visibility: hidden;">
<tr>
<td>Food Name: <input type="text" name="foodName_inp" id="foodName_inp" value="" size="20" />
</td>
</tr>
<tr>
<td>Serving Size(g): <input type="text" name="servingSize_inp" id="servingSize_inp" value="" size="5" />
</td>
</tr>
<tr>
<td>Calories per serving: <input type="text" name="calories_inp" id="calories_inp" value="0" size="5" />
</td>
</tr>
<tr>
<td>Total Fat per serving (g): <input type="text" name="totalFat_inp" id="totalFat_inp" value="0" size="5" />
</td>
</tr>
<tr>
<td>Cholesterol per serving (mg): <input type="text" name="cholesterol_inp" id="cholesterol_inp" value="0" size="5" />
</td>
</tr>
<tr>
<td>Sodium per serving (mg): <input type="text" name="sodium_inp" id="sodium_inp" value="0" size="5" />
</td>
</tr>
<tr>
<td>Carbs per serving (g): <input type="text" name="carbs_inp" id="carbs_inp" value="0" size="5" />
</td>
</tr>
<tr>
<td>Fiber per serving (g): <input type="text" name="fiber_inp" id="fiber_inp" value="0" size="5" />
</td>
</tr>
<tr><td>Added Sugars per serving (g): <input type="text" name="addedSugars_inp" id="addedSugars_inp" value="0" size="5" /></td></tr>
<tr>
<td>Protein per serving (g): <input type="text" name="protein_inp" id="protein_inp" value="0" size="5" />
</td>
</tr>

<tr>
<td><input type="button" id="inputNutritionFacts" value="Store Information" /> <input type="button" value="Cancel" id="cancelButton" /></td>
</tr>
</table>
</form>


<form id="onebyoneform" action="" method="post">
<table id="onebyonetable" border="0" style="position: absolute; top: 45px; left: 7px; visibility: hidden;">
<tr>
<td>Food Name: <select id="itemName1" name="itemName1" style = "white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:200px;">
</select>
</td>
</tr>
<tr>
<td>Nutrient Category: <select id="macronutrient1" name="macronutrient1">
<option selected="selected">Calories</option>
<option>Protein(g)</option>
<option>Total Fat(g)</option>
<option>Carbs(g)</option>
<option>Sodium(mg)</option>
<option>Cholesterol(mg)</option>
<option>Added Sugars(g)</option>
<option>Fiber(g)</option>
</select>
</td>
</tr>
<tr>
<td>Desired amount of Nutrient Category: <input type="text" name="goalWeight" id="goalWeight" value="" size="1" />
</td>
</tr>
<tr>
<td><input type="button" name="onebyonecalculate" id="onebyonecalculate" value="Calculate" /><input type = "button" value = "Explanation of this linear solver" id = "linearsolver1explanation"/> </td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td><input style="visibility: hidden" type="button" name="onebyoneinsert" id="onebyoneinsert" value="Insert Results To Table" /></td>
</tr>
</table>
</form>
<!---------------------------------------------------------------- -->

<form id="twobytwoform" action="" method="post">
<table id="twobytwotable" border="0" style="position: absolute; top: 45px; left: 7px; visibility: hidden;">
<tr>
<td>Food Name 1: <select id="itemName3" name="itemName3" style = "white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:200px;">
</select>
</td>
</tr>
<tr>
<td>Food Name 2: <select id="itemName4" name="itemName4" style = "white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:200px;">
</select>
</td>
</tr>
<tr>
<td>Nutrient Category 1: <select id="macronutrient1" name="macronutrient1">
<option selected="selected">Calories</option>
<option>Protein(g)</option>
<option>Total Fat(g)</option>
<option>Carbs(g)</option>
<option>Sodium(mg)</option>
<option>Cholesterol(mg)</option>
<option>Added Sugars(g)</option>
<option>Fiber(g)</option>
</select>
</td>
</tr>
<tr>
<td>Desired amount of Nutrient Category 1: <input type="text" name="goalWeight1" id="goalWeight1" value="" size="1" />
</td>
</tr>
<tr>
<td>Nutrient Category 2: <select id="macronutrient2" name="macronutrient2">
<option selected="selected">Calories</option>
<option>Protein(g)</option>
<option>Total Fat(g)</option>
<option>Carbs(g)</option>
<option>Sodium(mg)</option>
<option>Cholesterol(mg)</option>
<option>Added Sugars(g)</option>
<option>Fiber(g)</option>
</select>
</td>
</tr>
<tr>
<td>Desired amount of Nutrient Category 2: <input type="text" name="goalWeight2" id="goalWeight2" value="" size="1" />
</td>
</tr>
<tr>
<td><input type="button" name="twobytwocalculate" id="twobytwocalculate" value="Calculate" /><input type = "button" value = "Explanation of this linear solver" id = "linearsolver2explanation"/></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr> 
<tr>
<td><input style="visibility: hidden" type="button" name="twobytwoinsert" id="twobytwoinsert" value="Insert Results To Table" /></td>
</tr>
</table>
</form>


<form id="threebythreeform" action="" method="post">
<table id="threebythreetable" border="0" style="position: absolute; top: 45px; left: 7px; visibility: hidden;">
<tr>
<td>Food Name 1: <select id="itemName5" name="itemName5" style = "white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:200px;">
</select>
</td>
</tr>
<tr>
<td>Food Name 2: <select id="itemName6" name="itemName6" style = "white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:200px;">
</select>
</td>
</tr>
<tr>
<td>Food Name 3: <select id="itemName7" name="itemName7" style = "white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:200px;">
</select>
</td>
</tr>
<tr>
<td>Nutrient Category 1: <select id="macronutrient1" name="macronutrient1">
<option selected="selected">Calories</option>
<option>Protein(g)</option>
<option>Total Fat(g)</option>
<option>Carbs(g)</option>
<option>Sodium(mg)</option>
<option>Cholesterol(mg)</option>
<option>Added Sugars(g)</option>
<option>Fiber(g)</option>
</select>
</td>
</tr>
<tr>
<td>Desired amount of Nutrient Category 1: <input type="text" name="goalWeight1" id="goalWeight1" value="" size="1" />
</td>
</tr>
<tr>
<td>Nutrient Category 2: <select id="macronutrient2" name="macronutrient2">
<option selected="selected">Calories</option>
<option>Protein(g)</option>
<option>Total Fat(g)</option>
<option>Carbs(g)</option>
<option>Sodium(mg)</option>
<option>Cholesterol(mg)</option>
<option>Added Sugars(g)</option>
<option>Fiber(g)</option>
</select>
</td>
</tr>
<tr>
<td>Desired amount of Nutrient Category 2: <input type="text" name="goalWeight2" id="goalWeight2" value="" size="1" />
</td>
</tr>
<tr>
<td>Nutrient Category 3: <select id="macronutrient3" name="macronutrient3">
<option selected="selected">Calories</option>
<option>Protein(g)</option>
<option>Total Fat(g)</option>
<option>Carbs(g)</option>
<option>Sodium(mg)</option>
<option>Cholesterol(mg)</option>
<option>Added Sugars(g)</option>
<option>Fiber(g)</option>
</select>
</td>
</tr>
<tr>
<td>Desired amount of Nutrient Category 3: <input type="text" name="goalWeight3" id="goalWeight3" value="" size="1" />
</td>
</tr>
<tr>
<td><input type="button" name="threebythreecalculate" id="threebythreecalculate" value="Calculate" /><input type = "button" value = "Explanation of this linear solver" id = "linearsolver3explanation"/></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td><input style="visibility: hidden" type="button" name="threebythreeinsert" id="threebythreeinsert" value="Insert Results To Table" /></td>
</tr>
</table>
</form>

<form id="deleteRowForm" action="" method="post">
<table id="deleteRowTable" border="0" style="position: absolute; top: 55px; left: 7px; visibility: hidden;">
<tr>
<td>Index To Delete: <select id="indexToDelete" name="indexToDelete">
</select>
</td>
</tr>
<tr>
<td><input type="button" name="deleteRowButton" id="deleteRowButton" value="Delete Row" /></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td></td>
</tr>
</table>
</form>

<input type="button" id = "resetArray" name="resetArray" value="Delete All Rows" style="font-size: 40px"/>
<br>
<br>
<input type="button" name="alertNutritionFacts" id="alertNutritionFacts" value="Display Nutrition Facts"  style="font-size: 40px"/>
<br>
<br>
<input type = "button" name = "setGoals" id = "setGoals" value = "Set Goals" style="font-size: 40px"/><input type = "button" name = "showGoals" id = "showGoals" value = "Show Goals"/>
<p id = "notesSection" style="font-size: 40px">Notes Section
<input type="button" name="saveNotes" id="saveNotes" value="Save Notes"  style="font-size: 40px"/>
<br>
<br>
<textarea rows="30" cols="45" id="textArea"></textarea></p>
<textarea rows = "100" cols = "70" id = "textAreaForGoals" style = "position:absolute; left: 5px; top: 45px; visibility:hidden;"></textarea>
<textarea rows="100" cols="70" id="textAreaForNutritionFacts" style="position: absolute; left: 5px; top: 45px; visibility: hidden;"></textarea>
<script type = "text/javascript" >
var arrayOfElements_GLOBAL;
var arrayOfFoodNames_GLOBAL;
var arrayOfServingSizes_GLOBAL;
var arrayOfCalories_GLOBAL;
var arrayOfTotalFat_GLOBAL;
var arrayOfCholesterol_GLOBAL;
var arrayOfSodium_GLOBAL;
var arrayOfCarbs_GLOBAL;
var arrayOfFiber_GLOBAL;
var arrayOfAddedSugars_GLOBAL;
var arrayOfProtein_GLOBAL;
var arrayOfGoalNutrients_GLOBAL;
var arrayOfGoalNutrientValues_GLOBAL;
var num_cols_GLOBAL = 12;
var idxValue_GLOBAL;
var totalRows_GLOBAL = 1;
var myTableLeftDefault_GLOBAL = 343;
var myTableLeftLimitToMove_GLOBAL = 326;
myTable.rows[0].style.backgroundColor = "#ccf5ff";
myTable.rows[totalRows_GLOBAL].style.backgroundColor = "#ccf5ff";
var onebyonecalculateFood1NameResult_GLOBAL;
var onebyonecalcualteFood1WeightResult_GLOBAL;
var twobytwocalculateFood1NameResult_GLOBAL;
var twobytwocalculateFood2NameResult_GLOBAL;
var twobytwocalcualteFood1WeightResult_GLOBAL;
var twobytwocalcualteFood2WeightResult_GLOBAL;
var threebythreecalculateFood1NameResult_GLOBAL;
var threebythreecalculateFood2NameResult_GLOBAL;
var threebythreecalculateFood3NameResult_GLOBAL;
var threebythreecalcualteFood1WeightResult_GLOBAL;
var threebythreecalcualteFood2WeightResult_GLOBAL;
var threebythreecalcualteFood3WeightResult_GLOBAL;
document.getElementById("nutritionForm").addBtn.onclick = main;
document.getElementById("resetArray").onclick = ResetTable;
document.getElementById("quit").onclick = cancelNutritionFact;
document.getElementById("nutritionForm").addNutritionFacts.onclick = addNutritionFacts;
document.getElementById("foodStorageForm").inputNutritionFacts.onclick = storeNutritionFacts;
document.getElementById("nutritionForm").deleteNutritionFacts.onclick = deleteNutritionFacts;
document.getElementById("foodStorageForm").cancelButton.onclick = cancelNutritionFact;
document.getElementById("deleteForm").cancelButton2.onclick = cancelNutritionFact;
document.getElementById("deleteForm").deleteInformation.onclick = deleteInformation;
document.getElementById("nutritionForm").onebyone.onclick = oneByOneInterface;
document.getElementById("onebyoneform").onebyonecalculate.onclick = calculateonebyone;
document.getElementById("nutritionForm").twobytwo.onclick = twoByTwoInterface;
document.getElementById("twobytwoform").twobytwocalculate.onclick = calculatetwobytwo;
document.getElementById("saveNotes").onclick = saveNotes;
document.getElementById("deleteRow").onclick = deleteRowInterface;
document.getElementById("deleteRowButton").onclick = deleteRowByIndex;
document.getElementById("alertNutritionFacts").onclick = alertAllNutritionFacts;
document.getElementById("refreshPage").onclick = cancelNutritionFact;
document.getElementById("nutritionForm").threebythree.onclick = threeBythreeInterface;
document.getElementById("threebythreeform").threebythreecalculate.onclick = calculatethreebythree;
document.getElementById("onebyoneform").onebyoneinsert.onclick = onebyoneinsertfunc;
document.getElementById("twobytwoform").twobytwoinsert.onclick = twobytwoinsertfunc;
document.getElementById("threebythreeform").threebythreeinsert.onclick = threebythreeinsertfunc;
document.getElementById("linearsolver1explanation").onclick = linearsolver1by1explanation;
document.getElementById("linearsolver2explanation").onclick = linearsolver2by2explanation;
document.getElementById("linearsolver3explanation").onclick = linearsolver3by3explanation;
document.getElementById("setGoals").onclick = setGoalsInterface;
document.getElementById("storeGoals").onclick = storeGoals;
document.getElementById("showGoals").onclick = displayGoals;

var totals_GLOBAL = [];
for (var i = 0; i < num_cols_GLOBAL; i++) {
    totals_GLOBAL.push(0);
}


function displayGoals() {
    var text = "Current/Goal/Remaining\n";
    var current;
    for (var i = 0; i < arrayOfGoalNutrients_GLOBAL.length; i++) {
        current = getNutrientTotal(arrayOfGoalNutrients_GLOBAL[i]);
        text += arrayOfGoalNutrients_GLOBAL[i] + ": ";
        text += current + "/";
        text += arrayOfGoalNutrientValues_GLOBAL[i] + "/";
        text += (arrayOfGoalNutrientValues_GLOBAL[i] - current).toFixed(2);
        text += "\n";
    }
    document.getElementById("textAreaForGoals").value = text;
    document.getElementById("myTable").style.visibility = 'hidden';
    document.getElementById("textAreaForGoals").style.visibility = '';
}


function storeGoals() {
    var elt = document.getElementById("nutrientGoalForm");
    var calories = parseFloat(elt.calories_inp.value);
    var totalFat = parseFloat(elt.totalFat_inp.value);
    var cholesterol = parseFloat(elt.cholesterol_inp.value);
    var sodium = parseFloat(elt.sodium_inp.value);
    var carbs = parseFloat(elt.carbs_inp.value);
    var fiber = parseFloat(elt.fiber_inp.value);
    var addedSugars = parseFloat(elt.addedSugars_inp.value);
    var protein = parseFloat(elt.protein_inp.value);
    arrayOfGoalNutrients_GLOBAL = [];
    arrayOfGoalNutrientValues_GLOBAL = [];
    if (isFinite(calories) && calories > 0) {
        arrayOfGoalNutrients_GLOBAL.push("Calories");
        arrayOfGoalNutrientValues_GLOBAL.push(calories);
    }
    if (isFinite(protein) && protein > 0) {
        arrayOfGoalNutrients_GLOBAL.push("Protein");
        arrayOfGoalNutrientValues_GLOBAL.push(protein);
    }
    if (isFinite(totalFat) && totalFat > 0) {
        arrayOfGoalNutrients_GLOBAL.push("Total Fat");
        arrayOfGoalNutrientValues_GLOBAL.push(totalFat);
    }
    if (isFinite(carbs) && carbs > 0) {
        arrayOfGoalNutrients_GLOBAL.push("Carbs");
        arrayOfGoalNutrientValues_GLOBAL.push(carbs);
    }
    if (isFinite(cholesterol) && cholesterol > 0) {
        arrayOfGoalNutrients_GLOBAL.push("Cholesterol");
        arrayOfGoalNutrientValues_GLOBAL.push(cholesterol);
    }
    if (isFinite(sodium) && sodium > 0) {
        arrayOfGoalNutrients_GLOBAL.push("Sodium");
        arrayOfGoalNutrientValues_GLOBAL.push(sodium);
    }
    if (isFinite(fiber) && fiber > 0) {
        arrayOfGoalNutrients_GLOBAL.push("Fiber");
        arrayOfGoalNutrientValues_GLOBAL.push(fiber);
    }
    if (isFinite(addedSugars) && addedSugars > 0) {
        arrayOfGoalNutrients_GLOBAL.push("Added Sugars");
        arrayOfGoalNutrientValues_GLOBAL.push(addedSugars);
    }
    localStorage.setItem("goalNutrients", arrayOfGoalNutrients_GLOBAL);
    localStorage.setItem("goalNutrientValues", arrayOfGoalNutrientValues_GLOBAL);
    location.reload();

}

function getNutrientTotal(nutrient) {
    var table = document.getElementById("myTable");
    var cell;
    var row = table.rows[0];
    var idx;
    for (var i = 0; i < num_cols_GLOBAL; i++) {
        var cell = row.cells[i].innerHTML;
        if (cell.indexOf(nutrient) > -1) {
            idx = i;
            break;
        }
    }
    var numRows = table.rows.length;
    return table.rows[numRows - 1].cells[idx].innerHTML;

}

function setGoalsInterface() {
    document.getElementById("inputForm").style.visibility = 'hidden';
    document.getElementById("resetArray").style.visibility = 'hidden';
    document.getElementById("deleteRow").style.visibility = 'hidden';
    document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
    document.getElementById("weightUnits").style.visibility = 'hidden';
    document.getElementById("notesSection").style.visibility = 'hidden';
    document.getElementById("setGoals").style.visibility = 'hidden';
    document.getElementById("showGoals").style.visibility = 'hidden';
    document.getElementById("nutrientGoalTable").style.visibility = '';
}

function linearsolver3by3explanation() {
    alert("Welcome to the 3 by 3 linear solver. This linea rsolver takes three foods and three nutreitn categories and calculates how much of each food that you have to eat in order to reach the desired amount of nutrients for each categroy without going over or under on any of them. For example, if you want to calculate how much peanuts, rice, and chicken to eat in order to gain 35g total fat, 70g carbs, and 30g protein, you can enter peanuts, rice, chicken, total fat, 35, carbs, 70, protein, 30, and press Calculate.");
}

function linearsolver2by2explanation() {
    alert("Welcome to the 2 by 2 linear rsolver. This linear solver takes two foods and two nutrient categories and calculates how much of each food that you have to eat in order to reach the desired amount of nutrients for each category without going over or under on either of them. For example, if you want to know how much rice and peanuts to eat in order to gain 37g of carbs and 14g of protein, you can enter rice, peanuts, carbs, 37, protein, 14, and press Calculate.");
}

function linearsolver1by1explanation() {
    alert("Welcome to the 1 by 1 linear solver. This linear solver takes one food and one nutrient category to calculate how much of the food that you have to eat to reach the desired amount of nutrients. For example, if you want to know how much chicken that you have to eat to consume 20g of protein, you can enter chicken, protein, 20, and then press Calculate.");
}

function setLocalStorageToNulls() {
    localStorage.setItem("1foodNames", []);
    localStorage.setItem("1servingSizes", []);
    localStorage.setItem("1calories", []);
    localStorage.setItem("1totalFat", []);
    localStorage.setItem("1cholesterol", []);
    localStorage.setItem("1sodium", []);
    localStorage.setItem("1carbs", []);
    localStorage.setItem("1fiber", []);
    localStorage.setItem("1addedSugars", []);
    localStorage.setItem("1protein", []);
    localStorage.setItem("goalNutrients", []);
    localStorage.setItem("goalNutrientValues", []);
}

function setLocalStorageToGlobals() {
    localStorage.setItem("1foodNames", arrayOfFoodNames_GLOBAL);
    localStorage
        .setItem("1servingSizes", arrayOfServingSizes_GLOBAL);
    localStorage.setItem("1calories", arrayOfCalories_GLOBAL);
    localStorage.setItem("1totalFat", arrayOfTotalFat_GLOBAL);
    localStorage.setItem("1cholesterol", arrayOfCholesterol_GLOBAL);
    localStorage.setItem("1sodium", arrayOfSodium_GLOBAL);
    localStorage.setItem("1carbs", arrayOfCarbs_GLOBAL);
    localStorage.setItem("1fiber", arrayOfFiber_GLOBAL);
    localStorage.setItem("1addedSugars", arrayOfAddedSugars_GLOBAL);
    localStorage.setItem("1protein", arrayOfProtein_GLOBAL);
}

function handleChange() {

    if (document.getElementById("weightRadio").checked == true) {
        localStorage.setItem("1radioButtonValue", "weight");
        document.getElementById("weightUnits").style.visibility = '';
        document.getElementById("unitTypeTD").innerHTML = "Weight:  <input type = \"text\" name = \"weight\" id = \"weight\" value = \"\" size = \"5\" style = \"font-size:40px;\"/> <select style = \"visibility:visible;font-size:40px;\" id = \"weightUnits\" name = \"weightUnits\"><option selected = \"selected\"> g </option><option value = \"ounces\"> oz </option><option value = \"pounds\"> lb </option><option value = \"kilograms\"> kg </option></select>";
    } else {
        localStorage.setItem("1radioButtonValue", "servings");
        document.getElementById("weightUnits").style.visibility = 'hidden';
        document.getElementById("unitTypeTD").innerHTML = "Servings: <input type = \"text\" name = \"weight\" id = \"weight\" value = \"\" size = \"5\" style = \"font-size:40px;\"/>  <select style =\"visibility:hidden;font-size:40px;\" id = \"weightUnits\" name = \"weightUnits\"><option selected = \"selected\"> g </option><option value = \"ounces\"> oz </option><option value = \"pounds\"> lb </option><option value = \"kilograms\"> kg </option></select>";
    }
}

function confirmExit() {
    var text = document.getElementById("textArea").value;
    var textFromStorage = localStorage.getItem("1storedTextFromTextArea");
    document.getElementById("inputForm").style.visibility = 'hidden';
    document.getElementById("resetArray").style.visibility = 'hidden';
    document.getElementById("myTable").style.visibility = 'hidden';
    document.getElementById("foodStorage").style.visibility = 'hidden';
    document.getElementById("deleteRow").style.visibility = 'hidden';
    document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
    document.getElementById("weightUnits").style.visibility = 'hidden';
    document.getElementById("deleteTable").style.visibility = 'hidden';
    document.getElementById("setGoals").style.visibility = 'hidden';
    document.getElementById("showGoals").style.visibility = 'hidden';
    document.getElementById("textAreaForNutritionFacts").style.visibility = 'hidden';
    document.getElementById("deleteRowTable").style.visibility = 'hidden';
    document.getElementById("twobytwotable").style.visibility = 'hidden';
    document.getElementById("onebyonetable").style.visibility = 'hidden';
    document.getElementById("threebythreetable").style.visibility = 'hidden';
    document.getElementById("setGoals").style.visibility = 'hidden';
    document.getElementById("showGoals").style.visibility = 'hidden';
    document.getElementById("notesSection").style.visibility = '';
    if (text != textFromStorage) {
        return "You have attempted to leave this page.  If you have not saved the table to Excel, your results will be lost.";
    }
}

function foodItem(serving_size, calories, total_fat,
    cholesterol, sodium, carbs, fiber, protein, addedSugars) {
    this.serving_size = serving_size; // in grams
    this.calories = calories;
    this.total_fat = total_fat;
    this.cholesterol = cholesterol;
    this.sodium = sodium;
    this.carbs = carbs;
    this.fiber = fiber;
    this.protein = protein;
    this.addedSugars = addedSugars;
}

function ResetTable() {
    if (idxValue_GLOBAL == 2) {
        alert("There is no data to delete.");
        return;
    }
    var response = prompt("Type 'y' to reset the table.");
    if (response == "y") {
        localStorage.setItem("1foodEntries", []);
        arrayOfElements_GLOBAL = [];
        location.reload();
    }
}

function getFoodByName(foodName) {
    var food = null;
    for (var i = 0; i < arrayOfFoodNames_GLOBAL.length; i++) {
        if (foodName == arrayOfFoodNames_GLOBAL[i]) {
            food = new foodItem(arrayOfServingSizes_GLOBAL[i],
                arrayOfCalories_GLOBAL[i], arrayOfTotalFat_GLOBAL[i],
                arrayOfCholesterol_GLOBAL[i], arrayOfSodium_GLOBAL[i],
                arrayOfCarbs_GLOBAL[i], arrayOfFiber_GLOBAL[i],
                arrayOfProtein_GLOBAL[i], 
				arrayOfAddedSugars_GLOBAL[i]);
        }
    }
    return food;
}

function main() {
    var elt = document.getElementById("nutritionForm");
    var itemName = elt.itemName.value;
    if (itemName == "") {
        alert("Click 'Add Nutrition Facts' and enter nutrition facts before proceeding.");
        return;
    }
    var weight = parseFloat(elt.weight.value);
    var weightUnits = elt.weightUnits.value;
    if (weight == '') {
        alert("Fill in the weight");
        return;
    }
    if (!isFinite(weight)) {
        alert("Weight input is not a number");
        return;
    }
    if (arrayOfFoodNames_GLOBAL.length == 0) {
        alert("Please add food items to storage by using the 'Add Nutrition Facts' button.");
        return;
    }
    var food = getFoodByName(itemName);
    if (food == null) {
        alert("Food item not found.")
        return;
    }
    if (document.getElementById("weightRadio").checked == true) {
        if (weightUnits == "ounces") {
            weight = weight * 28.3495;
        } else if (weightUnits == "pounds") {
            weight = weight * 453.592;
        } else if (weightUnits == "kilograms") {
            weight = weight * 1000;
        }
    } else { // converting from servings to weight
        weight *= food.serving_size;
    }
    var idOfRadioButton;
    if (document.getElementById("weightRadio").checked == true) {
        idOfRadioButton = "weightRadio";
    } else {
        idOfRadioButton = "servingsRadio";
    }
    insertRow(itemName, food, weight);
    document.getElementById("nutritionForm").reset();
    document.getElementById(idOfRadioButton).checked = true;
} // main

function threebythreeinsertfunc() {
    var food1 = getFoodByName(threebythreecalculateFood1NameResult_GLOBAL);
    var food2 = getFoodByName(threebythreecalculateFood2NameResult_GLOBAL);
    var food3 = getFoodByName(threebythreecalculateFood3NameResult_GLOBAL);
    insertRow(threebythreecalculateFood1NameResult_GLOBAL + " [auto-inserted]", food1,
        threebythreecalcualteFood1WeightResult_GLOBAL);
    insertRow(threebythreecalculateFood2NameResult_GLOBAL + " [auto-inserted]", food2,
        threebythreecalcualteFood2WeightResult_GLOBAL);
    insertRow(threebythreecalculateFood3NameResult_GLOBAL + " [auto-inserted]", food3,
        threebythreecalcualteFood3WeightResult_GLOBAL);
    location.reload();
}

function twobytwoinsertfunc() {
    var food1 = getFoodByName(twobytwocalculateFood1NameResult_GLOBAL);
    var food2 = getFoodByName(twobytwocalculateFood2NameResult_GLOBAL);
    insertRow(twobytwocalculateFood1NameResult_GLOBAL + " [auto-inserted]", food1,
        twobytwocalcualteFood1WeightResult_GLOBAL);
    insertRow(twobytwocalculateFood2NameResult_GLOBAL + " [auto-inserted]", food2,
        twobytwocalcualteFood2WeightResult_GLOBAL);
    location.reload();
}

function onebyoneinsertfunc() {
    var food = getFoodByName(onebyonecalculateFood1NameResult_GLOBAL);
    insertRow(onebyonecalculateFood1NameResult_GLOBAL + " [auto-inserted]", food,
        onebyonecalcualteFood1WeightResult_GLOBAL);
    location.reload();
}

function insertRow(foodName, food, weight) {
    totalRows_GLOBAL += 1;
    var table = document.getElementById("myTable");
    var row = table.insertRow(totalRows_GLOBAL - 1);
    var multiplier = weight / food.serving_size;
    food.total_fat *= multiplier;
    food.cholesterol *= multiplier;
    food.sodium *= multiplier;
    food.carbs *= multiplier;
    food.addedSugars *= multiplier;
    food.protein *= multiplier;
    food.calories *= multiplier;
    food.fiber *= multiplier;
    // goes from n to 1
	var r = num_cols_GLOBAL-3
    totals_GLOBAL[r--] += parseFloat(weight.toFixed(2));
    totals_GLOBAL[r--] += parseFloat(food.calories.toFixed(2));
    totals_GLOBAL[r--] += parseFloat(food.protein.toFixed(2));
    totals_GLOBAL[r--] += parseFloat(food.total_fat.toFixed(2));
    totals_GLOBAL[r--] += parseFloat(food.carbs.toFixed(2));
    totals_GLOBAL[r--] += parseFloat(food.sodium.toFixed(2));
    totals_GLOBAL[r--] += parseFloat(food.cholesterol.toFixed(2));
    totals_GLOBAL[r--] += parseFloat(food.addedSugars.toFixed(2));
    totals_GLOBAL[r--] += parseFloat(food.fiber.toFixed(2));
    var date = new Date();
    var dateString = date.toDateString() + "; " +
        date.toTimeString().substring(0, 8);
    row.insertCell(0).innerHTML = dateString;
    row.insertCell(0).innerHTML = food.fiber.toFixed(2);
    row.insertCell(0).innerHTML = food.addedSugars.toFixed(2);
    row.insertCell(0).innerHTML = food.cholesterol.toFixed(2);
    row.insertCell(0).innerHTML = food.sodium.toFixed(2);
    row.insertCell(0).innerHTML = food.carbs.toFixed(2);
    row.insertCell(0).innerHTML = food.total_fat.toFixed(2);
    row.insertCell(0).innerHTML = food.protein.toFixed(2);
    row.insertCell(0).innerHTML = food.calories.toFixed(2);
    row.insertCell(0).innerHTML = weight.toFixed(2);
    row.insertCell(0).innerHTML = foodName;
    row.insertCell(0).innerHTML = idxValue_GLOBAL - 1;
    arrayOfElements_GLOBAL.push(dateString);
    arrayOfElements_GLOBAL.push(food.fiber.toFixed(2));
    arrayOfElements_GLOBAL.push(food.addedSugars.toFixed(2));
    arrayOfElements_GLOBAL.push(food.cholesterol.toFixed(2));
    arrayOfElements_GLOBAL.push(food.sodium.toFixed(2));
    arrayOfElements_GLOBAL.push(food.carbs.toFixed(2));
    arrayOfElements_GLOBAL.push(food.total_fat.toFixed(2));
    arrayOfElements_GLOBAL.push(food.protein.toFixed(2));
    arrayOfElements_GLOBAL.push(food.calories.toFixed(2));
    arrayOfElements_GLOBAL.push(weight.toFixed(2));
    arrayOfElements_GLOBAL.push(foodName);
    // goes from 2 to k and n to 1; n = 60 here
	for (var a = 2, b = num_cols_GLOBAL-3; a < num_cols_GLOBAL; a++, b--){
		myTable.rows[totalRows_GLOBAL].cells[a].innerHTML = totals_GLOBAL[b].toFixed(2);
	}
    myTable.rows[totalRows_GLOBAL].cells[num_cols_GLOBAL-1].innerHTML = dateString; // current date and time
    document.getElementById("weight").value = "";
    localStorage.setItem("1foodEntries", arrayOfElements_GLOBAL);
    idxValue_GLOBAL++;
    document.getElementById("deleteRow").style.visibility = '';
    document.getElementById("resetArray").style.visibility = '';
}

function createStringOfAllNutritionFacts() {
    var text = "";
    var tempArray = [0];
    for (var i = 1; i < arrayOfFoodNames_GLOBAL.length; i++) {
        tempArray.push(arrayOfFoodNames_GLOBAL[i]);
    }
    tempArray.sort();
    var food;
    for (var i = 1; i < arrayOfFoodNames_GLOBAL.length; i++) {
        food = getFoodByName(tempArray[i]);
        text += "Food Name: " + tempArray[i] + "\n";
        text += "Serving Size(g): " + food.serving_size + "\n";
        text += "Calories per serving (g): " + food.calories +
            "\n";
        text += "Total Fat per serving (g): " + food.total_fat +
            "\n";
        text += "Cholesterol per serving (mg): " +
            food.cholesterol + "\n";
        text += "Sodium per serving (mg): " + food.sodium +
            "\n";
        text += "Carbs per serving (g): " + food.carbs + "\n";
        text += "Fiber per serving (g): " + food.fiber + "\n";
        text += "Added Sugars per serving (g): " + food.addedSugars + "\n";
        text += "Protein per serving (g): " + food.protein +
            "\n";
        text += "----------------------\n";
    }
    return text;
}

function alertAllNutritionFacts() {
    var text = createStringOfAllNutritionFacts();
    document.getElementById("textAreaForNutritionFacts").value = text;
    document.getElementById("myTable").style.visibility = 'hidden';
    document.getElementById("textAreaForNutritionFacts").style.visibility = '';
}

function oneDArrayTo2D(oneDArray) {
    var twoDArray = [];
    var tempArray = [];
    var ctr = 0;
    var numElements = oneDArray.length;
    if (numElements > 1) {
        while (ctr < numElements) {
            for (var i = 0; i < num_cols_GLOBAL; i++) {
                if (oneDArray[ctr] != "" && oneDArray[ctr] != " ") {
                    tempArray.push(oneDArray[ctr]);
                }
                ctr++;
            }
            twoDArray.push(tempArray);
        }

    }
}

function deleteRowByIndex() {
    var selectedIndexValue = parseFloat(document
        .getElementById("indexToDelete").value);
    var idxToDelete = selectedIndexValue - 1;
    var deleteIDX = idxToDelete * (num_cols_GLOBAL - 1);
    arrayOfElements_GLOBAL.splice(deleteIDX, num_cols_GLOBAL - 1);
    localStorage.setItem("1foodEntries", arrayOfElements_GLOBAL);
    location.reload();
}

function deleteRowInterface() {
    var indexSelect = document.getElementById("indexToDelete");
    for (var i = 1; i < idxValue_GLOBAL - 1; i++) {
        option = document.createElement("option");
        option.text = i;
        indexSelect.add(option);
    }
    var deleteidx = document.getElementById("indexToDelete");

    if (indexToDelete.length == 0) {
        alert("The table is empty. There is no row to delete.");
        return;
    }
    indexSelect.selectedIndex = indexSelect.length - 1;
    document.getElementById("inputForm").style.visibility = 'hidden';
    document.getElementById("resetArray").style.visibility = 'hidden';
    document.getElementById("deleteRowTable").style.visibility = '';
    document.getElementById("deleteRow").style.visibility = 'hidden';
    document.getElementById("weightUnits").style.visibility = 'hidden';
    document.getElementById("setGoals").style.visibility = 'hidden';
    document.getElementById("showGoals").style.visibility = 'hidden';
}

function saveNotes() {
    var text = document.getElementById("textArea").value;
    localStorage.setItem("1storedTextFromTextArea", text);
    location.reload();
}

function calculatethreebythree() {
    var elt = document.getElementById("threebythreeform");
    document.getElementById("threebythreeinsert").style.visibility = 'hidden';
    var qq = document.getElementById("threebythreetable").rows[10].cells;
    document.getElementById("myTable").style.left = myTableLeftDefault_GLOBAL;
    qq[0].innerHTML = "";

    qq = document.getElementById("threebythreetable").rows[11].cells;
    qq[0].innerHTML = "";
    qq = document.getElementById("threebythreetable").rows[12].cells;
    qq[0].innerHTML = "";
    var itemName1 = elt.itemName5.value;
    var itemName2 = elt.itemName6.value;
    var itemName3 = elt.itemName7.value;
    var goalWeight1 = parseFloat(elt.goalWeight1.value);
    var goalWeight2 = parseFloat(elt.goalWeight2.value);
    var goalWeight3 = parseFloat(elt.goalWeight3.value);
    var macronutrient1 = elt.macronutrient1.value;
    var macronutrient2 = elt.macronutrient2.value;
    var macronutrient3 = elt.macronutrient3.value;
    if (itemName1 == itemName2 || itemName1 == itemName3 || itemName2 == itemName3) {
        alert("You may not have multiple of the same food names. If you only want one food, then use the one by one linear solver. If you want only two foods then use the two by two linear solver.");
        return;
    }
    if (macronutrient1 == macronutrient2 || macronutrient1 == macronutrient3 || macronutrient2 == macronutrient3) {
        alert("You may not select multiple of the same macronutrients. Use the one by one linear solver or the two by two linear solver if you want less than three macronutrients.");
        return;
    }
    if (goalWeight1 == '') {
        alert("Fill in the goalWeight1");
        return;
    }
    if (!isFinite(goalWeight1)) {
        alert("goalWeight1 input is not a number");
        return;
    }
    if (goalWeight2 == '') {
        alert("Fill in the goalWeight2");
        return;
    }
    if (!isFinite(goalWeight2)) {
        alert("goalWeight2 input is not a number");
        return;
    }
    if (goalWeight3 == '') {
        alert("Fill in the goalWeight3");
        return;
    }
    if (!isFinite(goalWeight3)) {
        alert("goalWeight3 input is not a number");
        return;
    }
    var food1;
    var food2;
    var food3;
    food1 = getFoodByName(itemName1);
    if (food1 == null) {
        alert("Food item not found.")
        return;
    }
    food2 = getFoodByName(itemName2);
    if (food2 == null) {
        alert("Food item2 not found.")
        return;
    }
    food3 = getFoodByName(itemName3);
    if (food3 == null) {
        alert("Food item3 not found.")
        return;
    }
    var a;
    var b;
    var c;
    if (macronutrient1 == "Calories") {
        a = food1.calories / food1.serving_size;
        b = food2.calories / food2.serving_size;
        c = food3.calories / food3.serving_size;
    } else if (macronutrient1 == "Total Fat(g)") {
        a = food1.total_fat / food1.serving_size;
        b = food2.total_fat / food2.serving_size;
        c = food3.total_fat / food3.serving_size;
    } else if (macronutrient1 == "Carbs(g)") {
        a = food1.carbs / food1.serving_size;
        b = food2.carbs / food2.serving_size;
        c = food3.carbs / food3.serving_size;
    } else if (macronutrient1 == "Protein(g)") {
        a = food1.protein / food1.serving_size;
        b = food2.protein / food2.serving_size;
        c = food3.protein / food3.serving_size;
    } else if (macronutrient1 == "Sodium(mg)") {
        a = food1.sodium / food1.serving_size;
        b = food2.sodium / food2.serving_size;
        c = food3.sodium / food3.serving_size;
    } else if (macronutrient1 == "Cholesterol(mg)") {
        a = food1.cholesterol / food1.serving_size;
        b = food2.cholesterol / food2.serving_size;
        c = food3.cholesterol / food3.serving_size;
    } else if (macronutrient1 == "Added Sugars(g)") {
        a = food1.addedSugars / food1.serving_size;
        b = food2.addedSugars / food2.serving_size;
        c = food3.addedSugars / food3.serving_size;
    } else if (macronutrient1 == "Fiber(g)") {
        a = food1.fiber / food1.serving_size;
        b = food2.fiber / food2.serving_size;
        c = food3.fiber / food3.serving_size;
    } else {
        alert("error1");
    }
    var e;
    var f;
    var g;
    if (macronutrient2 == "Calories") {
        e = food1.calories / food1.serving_size;
        f = food2.calories / food2.serving_size;
        g = food3.calories / food3.serving_size;
    } else if (macronutrient2 == "Total Fat(g)") {
        e = food1.total_fat / food1.serving_size;
        f = food2.total_fat / food2.serving_size;
        g = food3.total_fat / food3.serving_size;
    } else if (macronutrient2 == "Carbs(g)") {
        e = food1.carbs / food1.serving_size;
        f = food2.carbs / food2.serving_size;
        g = food3.carbs / food3.serving_size;
    } else if (macronutrient2 == "Protein(g)") {
        e = food1.protein / food1.serving_size;
        f = food2.protein / food2.serving_size;
        g = food3.protein / food3.serving_size;
    }  else if (macronutrient2 == "Sodium(mg)") {
        e = food1.sodium / food1.serving_size;
        f = food2.sodium / food2.serving_size;
        g = food3.sodium / food3.serving_size;
    } else if (macronutrient2 == "Cholesterol(mg)") {
        e = food1.cholesterol / food1.serving_size;
        f = food2.cholesterol / food2.serving_size;
        g = food3.cholesterol / food3.serving_size;
    } else if (macronutrient2 == "Added Sugars(g)") {
        e = food1.addedSugars / food1.serving_size;
        f = food2.addedSugars / food2.serving_size;
        g = food3.addedSugars / food3.serving_size;
    } else if (macronutrient2 == "Fiber(g)") {
        e = food1.fiber / food1.serving_size;
        f = food2.fiber / food2.serving_size;
        g = food3.fiber / food3.serving_size;
    } else {
        alert("error2");
    }
    var i;
    var j;
    var k;
    if (macronutrient3 == "Calories") {
        i = food1.calories / food1.serving_size;
        j = food2.calories / food2.serving_size;
        k = food3.calories / food3.serving_size;
    } else if (macronutrient3 == "Total Fat(g)") {
        i = food1.total_fat / food1.serving_size;
        j = food2.total_fat / food2.serving_size;
        k = food3.total_fat / food3.serving_size;
    } else if (macronutrient3 == "Carbs(g)") {
        i = food1.carbs / food1.serving_size;
        j = food2.carbs / food2.serving_size;
        k = food3.carbs / food3.serving_size;
    } else if (macronutrient3 == "Fiber(g)") {
        i = food1.fiber / food1.serving_size;
        j = food2.fiber / food2.serving_size;
        k = food3.fiber / food3.serving_size;

    }  else if (macronutrient3 == "Sodium(mg)") {
        i = food1.sodium / food1.serving_size;
        j = food2.sodium / food2.serving_size;
        k = food3.sodium / food3.serving_size;
    } else if (macronutrient3 == "Cholesterol(mg)") {
        i = food1.cholesterol / food1.serving_size;
        j = food2.cholesterol / food2.serving_size;
        k = food3.cholesterol / food3.serving_size;
    } else if (macronutrient3 == "Added Sugars(g)") {
        i = food1.addedSugars / food1.serving_size;
        j = food2.addedSugars / food2.serving_size;
        k = food3.addedSugars / food3.serving_size;
    } else if (macronutrient3 == "Protein(g)") {
        i = food1.protein / food1.serving_size;
        j = food2.protein / food2.serving_size;
        k = food3.protein / food3.serving_size;
    } else {
        alert("error2");
    }
    var d = goalWeight1;
    var h = goalWeight2;
    var l = goalWeight3;
    var temp;
    if (a == 0 && e != 0) { // swap equations
        temp = a, a = e, e = temp;
        temp = b, b = f, f = temp;
        temp = c, c = g, g = temp;
        temp = d, d = h, h = temp;
    } else if (a == 0 && i != 0) {
        temp = a, a = i, i = temp;
        temp = b, b = j, j = temp;
        temp = c, c = k, k = temp;
        temp = d, d = l, l = temp;
    }
    A = f - e * b / a;
    B = g - e * c / a;
    C = h - e * d / a;
    D = j - i * b / a;
    E = k - i * c / a;
    F = l - i * d / a;
    if (A == 0) {
        temp = A, A = D, D = temp;
        temp = B, B = E, E = temp;
        temp = C, C = F, F = temp;
    }
    var y = (B * F - E * C) / (B * D - E * A);
    var z = (C - A * y) / B;
    var x = (d - b * y - c * z) / a;
    if (!isFinite(x) || !isFinite(y) || !isFinite(z)) {
        alert("No solution to this system of linear equations. In other words, it is not possible to mix the food item(s) entered and reach the desired amount of each nutrient without going over or under on at least one of them.");
        return;
    }
    if (x < 0 || y < 0 || z < 0) {
        alert("No solution to this system of linear equations. In other words, it is not possible to mix the food item(s) entered and reach the desired amount of each nutrient without going over or under on at least one of them.");
        return;
    }
    var qq = document.getElementById("threebythreetable").rows[10].cells;
    qq[0].innerHTML = "Num grams of " + itemName1 + " to eat: " +
        x.toFixed(2) + " (" + (x / food1.serving_size).toFixed(2) +
        " servings)";
    var moveLength = qq[0].clientWidth;;
    qq = document.getElementById("threebythreetable").rows[11].cells;
    qq[0].innerHTML = "Num grams of " + itemName2 + " to eat: " +
        y.toFixed(2) + " (" + (y / food2.serving_size).toFixed(2) +
        " servings)";
    if (qq[0].clientWidth > moveLength) {
        moveLength = qq[0].clientWidth;
    }
    qq = document.getElementById("threebythreetable").rows[12].cells;
    qq[0].innerHTML = "Num grams of " + itemName3 + " to eat: " +
        z.toFixed(2) + " (" + (z / food3.serving_size).toFixed(2) +
        " servings)";
    if (qq[0].clientWidth > moveLength) {
        moveLength = qq[0].clientWidth;
    }
    threebythreecalculateFood1NameResult_GLOBAL = itemName1;
    threebythreecalculateFood2NameResult_GLOBAL = itemName2;
    threebythreecalculateFood3NameResult_GLOBAL = itemName3;
    threebythreecalcualteFood1WeightResult_GLOBAL = x;
    threebythreecalcualteFood2WeightResult_GLOBAL = y;
    threebythreecalcualteFood3WeightResult_GLOBAL = z;
    document.getElementById("threebythreeinsert").style.visibility = '';
    var tableMove = document.getElementById("myTable");
    if (moveLength > myTableLeftLimitToMove_GLOBAL) {
        tableMove.style.left = myTableLeftDefault_GLOBAL + moveLength - myTableLeftLimitToMove_GLOBAL;
    }
}

function calculatetwobytwo() {
    var elt = document.getElementById("twobytwoform");
    document.getElementById("twobytwoinsert").style.visibility = 'hidden';
    var qq = document.getElementById("twobytwotable").rows[7].cells;
    qq[0].innerHTML = "";
    qq = document.getElementById("twobytwotable").rows[8].cells;
    qq[0].innerHTML = "";
    var itemName1 = elt.itemName3.value;
    var itemName2 = elt.itemName4.value;
    var goalWeight1 = parseFloat(elt.goalWeight1.value);
    var goalWeight2 = parseFloat(elt.goalWeight2.value);
    var macronutrient1 = elt.macronutrient1.value;
    var macronutrient2 = elt.macronutrient2.value;
    document.getElementById("myTable").style.left = myTableLeftDefault_GLOBAL;
    if (itemName1 == itemName2) {
        alert("You may not have multiple of the same food names. If you only want one food, then use the one by one linear solver.");
        return;
    }
    if (macronutrient1 == macronutrient2) {
        alert("You may not select two of the same macronutrients. Use the one by one linear solver if you only want one macronutrient.");
        return;
    }

    if (goalWeight1 == '') {
        alert("Fill in the goalWeight1");
        return;
    }
    if (!isFinite(goalWeight1)) {
        alert("goalWeight1 input is not a number");
        return;
    }
    if (goalWeight2 == '') {
        alert("Fill in the goalWeight2");
        return;
    }
    if (!isFinite(goalWeight2)) {
        alert("goalWeight2 input is not a number");
        return;
    }
    var food1;
    var food2;
    if (arrayOfFoodNames_GLOBAL.length == 0) {
        alert("Please add food items to storage by using the 'Add Nutrition Facts' button.");
        return;
    }
    food1 = getFoodByName(itemName1);
    if (food1 == false) {
        alert("Food item not found.")
        return;
    }
    food2 = getFoodByName(itemName2);
    if (food2 == false) {
        alert("Food item2 not found.")
        return;
    }
    var a;
    var b;
    if (macronutrient1 == "Calories") {
        a = food1.calories / food1.serving_size;
        b = food2.calories / food2.serving_size;
    } else if (macronutrient1 == "Total Fat(g)") {
        a = food1.total_fat / food1.serving_size;
        b = food2.total_fat / food2.serving_size;
    } else if (macronutrient1 == "Carbs(g)") {
        a = food1.carbs / food1.serving_size;
        b = food2.carbs / food2.serving_size;
    } else if (macronutrient1 == "Protein(g)") {
        a = food1.protein / food1.serving_size;
        b = food2.protein / food2.serving_size;
    }  else if (macronutrient1 == "Sodium(mg)") {
        a = food1.sodium / food1.serving_size;
        b = food2.sodium / food2.serving_size;
    } else if (macronutrient1 == "Cholesterol(mg)") {
        a = food1.cholesterol / food1.serving_size;
        b = food2.cholesterol / food2.serving_size;
    } else if (macronutrient1 == "Added Sugars(g)") {
        a = food1.addedSugars / food1.serving_size;
        b = food2.addedSugars / food2.serving_size;
    } else if (macronutrient1 == "Fiber(g)") {
        a = food1.fiber / food1.serving_size;
        b = food2.fiber / food2.serving_size;
    } else {
        alert("error1");
    }

    var d;
    var e;
    if (macronutrient2 == "Calories") {
        d = food1.calories / food1.serving_size;
        e = food2.calories / food2.serving_size;
    } else if (macronutrient2 == "Total Fat(g)") {
        d = food1.total_fat / food1.serving_size;
        e = food2.total_fat / food2.serving_size;
    } else if (macronutrient2 == "Carbs(g)") {
        d = food1.carbs / food1.serving_size;
        e = food2.carbs / food2.serving_size;
    } else if (macronutrient2 == "Protein(g)") {
        d = food1.protein / food1.serving_size;
        e = food2.protein / food2.serving_size;
    } else if (macronutrient2 == "Fiber(g)") {
        d = food1.fiber / food1.serving_size;
        e = food2.fiber / food2.serving_size;
    }  else if (macronutrient2 == "Sodium(mg)") {
        d = food1.sodium / food1.serving_size;
        e = food2.sodium / food2.serving_size;
    } else if (macronutrient2 == "Cholesterol(mg)") {
        d = food1.cholesterol / food1.serving_size;
        e = food2.cholesterol / food2.serving_size;
    } else if (macronutrient2 == "Added Sugars(g)") {
        d = food1.addedSugars / food1.serving_size;
        e = food2.addedSugars / food2.serving_size;
    } else {
        alert("error2");
    }
    var c = goalWeight1;
    var f = goalWeight2;
    var temp;
    // swap equations if b == 0
    if (b == 0) {
        temp = a, a = d, d = temp;
        temp = b, b = e, e = temp;
        temp = c, c = f, f = temp;
    }
    var x = (b * f - e * c) / (b * d - e * a);
    var y = (c - a * x) / b;
    if (!isFinite(x) || !isFinite(y)) {
        alert("No solution to this system of linear equations");
        return;
    }
    if (x < 0 || y < 0) {
        alert("No solution to this system of linear equations. In other words, it is not possible to mix the food item(s) entered and reach the desired amount of each nutrient without going over or under on at least one of them.");
        return;
    }
    var qq = document.getElementById("twobytwotable").rows[7].cells;
    qq[0].innerHTML = "Num grams of " + itemName1 + " to eat: " +
        x.toFixed(2) + " (" + (x / food1.serving_size).toFixed(2) +
        " servings)";
    var moveLength = qq[0].clientWidth;
    qq = document.getElementById("twobytwotable").rows[8].cells;
    qq[0].innerHTML = "Num grams of " + itemName2 + " to eat: " +
        y.toFixed(2) + " (" + (y / food2.serving_size).toFixed(2) +
        " servings)";
    if (qq[0].clientWidth > moveLength) {
        moveLength = qq[0].clientWidth;
    }

    twobytwocalculateFood1NameResult_GLOBAL = itemName1;
    twobytwocalculateFood2NameResult_GLOBAL = itemName2;
    twobytwocalcualteFood1WeightResult_GLOBAL = x;
    twobytwocalcualteFood2WeightResult_GLOBAL = y;
    document.getElementById("twobytwoinsert").style.visibility = '';
    var tableMove = document.getElementById("myTable");
    var tableMove = document.getElementById("myTable");
    if (moveLength > myTableLeftLimitToMove_GLOBAL) {
        tableMove.style.left = myTableLeftDefault_GLOBAL + moveLength - myTableLeftLimitToMove_GLOBAL;
    }
}

function calculateonebyone() {
    var elt = document.getElementById("onebyoneform");
    document.getElementById("onebyoneinsert").style.visibility = 'hidden';
    var zz = document.getElementById("onebyonetable").rows[4].cells;
    // weight divided by servings size
    zz[0].innerHTML = "";
    var itemName = elt.itemName1.value;
    var goalWeight = parseFloat(elt.goalWeight.value);
    var macronutrient = elt.macronutrient1.value;
    document.getElementById("myTable").style.left = myTableLeftDefault_GLOBAL;
    if (goalWeight == '') {
        alert("Fill in the goalWeight");
        return;
    }
    if (!isFinite(goalWeight)) {
        alert("goalWeight input is not a number");
        return;
    }
    var food;
    if (arrayOfFoodNames_GLOBAL.length == 0) {
        alert("Please add food items to storage by using the 'Add Nutrition Facts' button.");
        return;
    }
    food = getFoodByName(itemName);
    if (food == null) {
        alert("Food item not found.")
        return;
    }
    var product = goalWeight * food.serving_size;
    var result;
    if (macronutrient == "Calories") {
        result = product / food.calories;
    } else if (macronutrient == "Total Fat(g)") {
        result = product / food.total_fat;
    } else if (macronutrient == "Carbs(g)") {
        result = product / food.carbs;
    } else if (macronutrient == "Protein(g)") {
        result = product / food.protein;
    }  else if (macronutrient == "Sodium(mg)") {
	    result = product / food.sodium;
    } else if (macronutrient == "Cholesterol(mg)") {
        result = product / food.cholesterol;
    } else if (macronutrient == "Added Sugars(g)") {
        result = product / food.addedSugars;
    } else if (macronutrient == "Fiber(g)") {
        result = product / food.fiber;
    } else {
        alert("error");
    }
    if (!isFinite(result)) {
        alert("No solution to this system of linear equations");
        return;
    }
    if (result < 0) {
        alert("No solution to this system of linear equations. In other words, it is not possible to mix the food item(s) entered and reach the desired amount of each nutrient without going over or under on at least one of them.");
        return;
    }
    var x = document.getElementById("onebyonetable").rows[4].cells;
    // weight divided by servings size
    x[0].innerHTML = "Num grams of " + itemName + " to eat: " +
        result.toFixed(2) + " (" +
        (result / food.serving_size).toFixed(2) + " servings)";
    onebyonecalculateFood1NameResult_GLOBAL = itemName;
    onebyonecalcualteFood1WeightResult_GLOBAL = result;
    document.getElementById("onebyoneinsert").style.visibility = '';
    var tableMove = document.getElementById("myTable");
    var moveLength = x[0].clientWidth;
    var tableMove = document.getElementById("myTable");
    if (moveLength > myTableLeftLimitToMove_GLOBAL) {
        tableMove.style.left = myTableLeftDefault_GLOBAL + moveLength - myTableLeftLimitToMove_GLOBAL;
    }
}


function threeBythreeInterface() {
    document.getElementById("inputForm").style.visibility = 'hidden';
    document.getElementById("resetArray").style.visibility = 'hidden';
    document.getElementById("threebythreetable").style.visibility = '';
    document.getElementById("deleteRow").style.visibility = 'hidden';
    document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
    document.getElementById("weightUnits").style.visibility = 'hidden';
    document.getElementById("setGoals").style.visibility = 'hidden';
    document.getElementById("showGoals").style.visibility = 'hidden';
}

function twoByTwoInterface() {
    document.getElementById("inputForm").style.visibility = 'hidden';
    document.getElementById("resetArray").style.visibility = 'hidden';
    document.getElementById("twobytwotable").style.visibility = '';
    document.getElementById("deleteRow").style.visibility = 'hidden';
    document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
    document.getElementById("weightUnits").style.visibility = 'hidden';
    document.getElementById("setGoals").style.visibility = 'hidden';
    document.getElementById("showGoals").style.visibility = 'hidden';
}

function oneByOneInterface() {
    document.getElementById("inputForm").style.visibility = 'hidden';
    document.getElementById("onebyonetable").style.visibility = '';
    document.getElementById("deleteRow").style.visibility = 'hidden';
    document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
    document.getElementById("weightUnits").style.visibility = 'hidden';
    document.getElementById("resetArray").style.visibility = 'hidden';
    document.getElementById("setGoals").style.visibility = 'hidden';
    document.getElementById("showGoals").style.visibility = 'hidden';
}

function deleteNutritionFacts() {
    document.getElementById("inputForm").style.visibility = 'hidden';
    document.getElementById("resetArray").style.visibility = 'hidden';
    document.getElementById("deleteTable").style.visibility = '';
    document.getElementById("deleteRow").style.visibility = 'hidden';
    document.getElementById("weightUnits").style.visibility = 'hidden';
    document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
    document.getElementById("setGoals").style.visibility = 'hidden';
    document.getElementById("showGoals").style.visibility = 'hidden';

}

function deleteInformation() {
    var elt = document.getElementById("deleteForm");
    var itemName = elt.itemToDelete.value;
    if (arrayOfFoodNames_GLOBAL.length == 0) {
        alert("Please add food items to storage by using the 'Add Nutrition Facts' button.");
        return;
    }
    var isFound = false;
    for (var i = 0; i < arrayOfFoodNames_GLOBAL.length; i++) {
        if (itemName == arrayOfFoodNames_GLOBAL[i]) {
            isFound = true;
            arrayOfFoodNames_GLOBAL.splice(i, 1);
            arrayOfServingSizes_GLOBAL.splice(i, 1);
            arrayOfCalories_GLOBAL.splice(i, 1);
            arrayOfTotalFat_GLOBAL.splice(i, 1);
            arrayOfCholesterol_GLOBAL.splice(i, 1);
            arrayOfSodium_GLOBAL.splice(i, 1);
            arrayOfCarbs_GLOBAL.splice(i, 1);
            arrayOfFiber_GLOBAL.splice(i, 1);
            arrayOfAddedSugars_GLOBAL.splice(i, 1);
            arrayOfProtein_GLOBAL.splice(i, 1);
            setLocalStorageToGlobals();
            break;
        }
    }
    if (isFound == false) {
        alert("Food item not found.")
        return;
    }
    location.reload();
}

function cancelNutritionFact() {
    location.reload();
}
// fix this
function storeNutritionFacts() {
    var elt = document.getElementById("foodStorageForm");
    var foodName = elt.foodName_inp.value;
    for (var i = 0; i < arrayOfFoodNames_GLOBAL.length; i++) {
        if (foodName == arrayOfFoodNames_GLOBAL[i]) {
            alert("Food name already taken");
            return;
        }
    }
    storeNutritionFactsAndSaveStorage();
    location.reload();
}

function storeNutritionFactsAndSaveStorage() {
    var elt = document.getElementById("foodStorageForm");
    var foodName = elt.foodName_inp.value;
    var servingSize = parseFloat(elt.servingSize_inp.value);
    var calories = parseFloat(elt.calories_inp.value);
    var totalFat = parseFloat(elt.totalFat_inp.value);
    var cholesterol = parseFloat(elt.cholesterol_inp.value);
    var sodium = parseFloat(elt.sodium_inp.value);
    var carbs = parseFloat(elt.carbs_inp.value);
    var fiber = parseFloat(elt.fiber_inp.value);
    var addedSugars = parseFloat(elt.addedSugars_inp.value);
    var protein = parseFloat(elt.protein_inp.value);
    if (foodName == "") {
        alert("Food Name may not be left blank.");
        return;
    }
    if (foodName.search(",") != -1) {
        alert("Food Name may not contain a comma");
        return;
    }
    if (!isFinite(servingSize)) {
        alert("Please enter serving size.");
        return;
    }
    if (!isFinite(calories)) {
        alert("Please enter calories.");
        return;
    }
    if (!isFinite(totalFat)) {
        alert("Please enter total fat.");
        return;
    }
    if (!isFinite(cholesterol)) {
        alert("Please enter cholesterol");
        return;
    }
    if (!isFinite(sodium)) {
        alert("Please enter sodium.");
        return;
    }
    if (!isFinite(carbs)) {
        alert("Please enter carbs.");
        return;
    }
    if (!isFinite(fiber)) {
        alert("Please enter fiber.");
        return;
    }
    if (!isFinite(addedSugars)) {
        alert("Please enter added sugars.");
        return;
    }
    if (!isFinite(protein)) {
        alert("Please enter protein.");
        return;
    }

    arrayOfFoodNames_GLOBAL.push(foodName);
    arrayOfServingSizes_GLOBAL.push(servingSize);
    arrayOfCalories_GLOBAL.push(calories);
    arrayOfTotalFat_GLOBAL.push(totalFat);
    arrayOfCholesterol_GLOBAL.push(cholesterol);
    arrayOfSodium_GLOBAL.push(sodium);
    arrayOfCarbs_GLOBAL.push(carbs);
    arrayOfFiber_GLOBAL.push(fiber);
    arrayOfAddedSugars_GLOBAL.push(addedSugars);
    arrayOfProtein_GLOBAL.push(protein);
    setLocalStorageToGlobals();
}

function addNutritionFacts() {

    document.getElementById("inputForm").style.visibility = 'hidden';
    document.getElementById("resetArray").style.visibility = 'hidden';
    document.getElementById("foodStorage").style.visibility = '';
    document.getElementById("deleteRow").style.visibility = 'hidden';
    document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
    document.getElementById("weightUnits").style.visibility = 'hidden';
    document.getElementById("notesSection").style.visibility = 'hidden';
    document.getElementById("setGoals").style.visibility = 'hidden';
    document.getElementById("showGoals").style.visibility = 'hidden';
}

function getFloatFromString(st) {
    return parseFloat(st.substring(st.indexOf(":") + 2, st.length));
}

function initializeRadioButton() {
    var radioButton;
    try {
        radioButton = localStorage.getItem("1radioButtonValue");
    } catch (err) {
        localStorage.setItem("1radioButtonValue", "weight");
        location.reload();
    }
    if (radioButton == null) {
        localStorage.setItem("1radioButtonValue", "weight");
        location.reload();
    } else {
        if (radioButton == "weight") {
            document.getElementById("weightRadio").checked = true;
        } else {
            document.getElementById("servingsRadio").checked = true;
        }
        handleChange();
    }

}

function initializeTextArea() {
    var textAreaText;
    try {
        textAreaText = localStorage.getItem("1storedTextFromTextArea");
    } catch (err) {
        localStorage.setItem("1storedTextFromTextArea", "");
        location.reload();
    }
    if (textAreaText == null) {
        localStorage.setItem("1storedTextFromTextArea", "");
        location.reload();
    } else {
        document.getElementById("textArea").value = textAreaText;
    }
}

function initializeSelect() {
    try {
        arrayOfFoodNames_GLOBAL = localStorage.getItem("1foodNames");
        arrayOfServingSizes_GLOBAL = localStorage.getItem("1servingSizes");
        arrayOfCalories_GLOBAL = localStorage.getItem("1calories");
        arrayOfTotalFat_GLOBAL = localStorage.getItem("1totalFat");
        arrayOfCholesterol_GLOBAL = localStorage.getItem("1cholesterol");
        arrayOfSodium_GLOBAL = localStorage.getItem("1sodium");
        arrayOfCarbs_GLOBAL = localStorage.getItem("1carbs");
        arrayOfFiber_GLOBAL = localStorage.getItem("1fiber");
        arrayOfAddedSugars_GLOBAL = localStorage.getItem("1addedSugars");
        arrayOfProtein_GLOBAL = localStorage.getItem("1protein");
        arrayOfGoalNutrients_GLOBAL = localStorage.getItem("goalNutrients");
        arrayOfGoalNutrientValues_GLOBAL = localStorage.getItem("goalNutrientValues");
    } catch (err) {
        setLocalStorageToNulls();
        location.reload();
    }

    if (arrayOfFoodNames_GLOBAL == null || arrayOfGoalNutrientValues_GLOBAL == null || arrayOfAddedSugars_GLOBAL == null) {
        setLocalStorageToNulls();
        location.reload();
    } else {
        arrayOfFoodNames_GLOBAL = arrayOfFoodNames_GLOBAL.split(",");
        arrayOfServingSizes_GLOBAL = arrayOfServingSizes_GLOBAL.split(",");
        arrayOfCalories_GLOBAL = arrayOfCalories_GLOBAL.split(",");
        arrayOfTotalFat_GLOBAL = arrayOfTotalFat_GLOBAL.split(",");
        arrayOfCholesterol_GLOBAL = arrayOfCholesterol_GLOBAL.split(",");
        arrayOfSodium_GLOBAL = arrayOfSodium_GLOBAL.split(",");
        arrayOfCarbs_GLOBAL = arrayOfCarbs_GLOBAL.split(",");
        arrayOfFiber_GLOBAL = arrayOfFiber_GLOBAL.split(",");
        arrayOfAddedSugars_GLOBAL = arrayOfAddedSugars_GLOBAL.split(",");
        arrayOfProtein_GLOBAL = arrayOfProtein_GLOBAL.split(",");
        arrayOfGoalNutrients_GLOBAL = arrayOfGoalNutrients_GLOBAL.split(",");
        arrayOfGoalNutrientValues_GLOBAL = arrayOfGoalNutrientValues_GLOBAL.split(",");
        var itemName = document.getElementById("itemName");
        var option;
        var itemToDelete = document.getElementById("itemToDelete");

        var elt1 = document.getElementById("onebyoneform");
        var onebyonefood = elt1.itemName1;
        var elt2 = document.getElementById("twobytwoform");
        var twobytwofoodone = elt2.itemName3;
        var twobytwofoodtwo = elt2.itemName4;
        var elt3 = document.getElementById("threebythreeform");
        var threebythreefoodone = elt3.itemName5;
        var threebythreefoodtwo = elt3.itemName6;
        var threebythreefoodthree = elt3.itemName7;




        var sortedarrayOfFoodNames_GLOBAL = [];
        for (var i = 1; i < arrayOfFoodNames_GLOBAL.length; i++) {
            sortedarrayOfFoodNames_GLOBAL.push(arrayOfFoodNames_GLOBAL[i]);
        }
        sortedarrayOfFoodNames_GLOBAL.sort();
        for (var i = 0; i < arrayOfFoodNames_GLOBAL.length - 1; i++) {
            option = document.createElement("option");
            option.text = sortedarrayOfFoodNames_GLOBAL[i];
            itemName.add(option);
            option = document.createElement("option");
            option.text = sortedarrayOfFoodNames_GLOBAL[i];
            itemToDelete.add(option);
            option = document.createElement("option");
            option.text = sortedarrayOfFoodNames_GLOBAL[i];
            onebyonefood.add(option);
            option = document.createElement("option");
            option.text = sortedarrayOfFoodNames_GLOBAL[i];
            twobytwofoodone.add(option);
            option = document.createElement("option");
            option.text = sortedarrayOfFoodNames_GLOBAL[i];
            twobytwofoodtwo.add(option);
            option = document.createElement("option");
            option.text = sortedarrayOfFoodNames_GLOBAL[i];
            threebythreefoodone.add(option);
            option = document.createElement("option");
            option.text = sortedarrayOfFoodNames_GLOBAL[i];
            threebythreefoodtwo.add(option);
            option = document.createElement("option");
            option.text = sortedarrayOfFoodNames_GLOBAL[i];
            threebythreefoodthree.add(option);


        }
    }

}

function startUp() {
    try {
        arrayOfElements_GLOBAL = localStorage.getItem("1foodEntries");
    } catch (err) {
        localStorage.setItem("1foodEntries", []);
        location.reload();
    }
    if (arrayOfElements_GLOBAL == null) {
        localStorage.setItem("1foodEntries", []);
        location.reload();
    }
    arrayOfElements_GLOBAL = arrayOfElements_GLOBAL.split(",");
    for (var i = 0; i < arrayOfElements_GLOBAL.length; i++) {
        if (arrayOfElements_GLOBAL[i].length == 0) {
            arrayOfElements_GLOBAL.splice(arrayOfElements_GLOBAL[i], 1);
            i--;
        }
    }
    var twoDArray = [];
    var tempArray = [];
    var ctr = 0;
    var numElements = arrayOfElements_GLOBAL.length;
    if (numElements > 0) {
        while (ctr < numElements) {
            for (var i = 0; i < num_cols_GLOBAL - 1; i++) {
                if (arrayOfElements_GLOBAL[ctr] != "" &&
                    arrayOfElements_GLOBAL[ctr] != " ") {
                    tempArray.push(arrayOfElements_GLOBAL[ctr]);
                }
                ctr++;
            }
            twoDArray.push(tempArray);
            tempArray = [];
        }
        totalRows_GLOBAL += 1;
        var table = document.getElementById("myTable");
        var row = table.insertRow(totalRows_GLOBAL - 1);
        for (var i = 0; i < twoDArray.length; i++) {
            for (var j = 0; j < num_cols_GLOBAL - 1; j++) {
                row.insertCell(0).innerHTML = twoDArray[i][j];
                if (isFinite(twoDArray[i][j])) {
                    totals_GLOBAL[j] += parseFloat(twoDArray[i][j]);
                }
            } // for
            row.insertCell(0).innerHTML = (i + 1).toString(); //index
            totalRows_GLOBAL += 1;
            row = table.insertRow(totalRows_GLOBAL - 1);
        } // for
        var k = 1;
        for (var i = num_cols_GLOBAL - 2; i > 1; i--) {
            myTable.rows[totalRows_GLOBAL].cells[i].innerHTML = totals_GLOBAL[k]
                .toFixed(2);
            k++;
        }
        idxValue_GLOBAL = totalRows_GLOBAL; // required spaghetti code
    } else {
        idxValue_GLOBAL = totalRows_GLOBAL + 1; // required spaghetti code
    }
} // start up

function checkNumFoodItems() {
    var itemName = document.getElementById("itemName");
    // no items
    if (itemName.length == 0) {
        document.getElementById("inputRow1").style.visibility = 'hidden';
        document.getElementById("inputRow2").style.visibility = 'hidden';
        document.getElementById("unitTypeTD").style.visibility = 'hidden';
        document.getElementById("weightUnits").style.visibility = 'hidden';
        document.getElementById("inputRow3").style.visibility = 'hidden';
        document.getElementById("deleteNutritionFacts").style.visibility = 'hidden';
        document.getElementById("onebyone").style.visibility = 'hidden';
        document.getElementById("twobytwo").style.visibility = 'hidden';
        document.getElementById("threebythree").style.visibility = 'hidden';
        document.getElementById("deleteRow").style.visibility = 'hidden';
        document.getElementById("alertNutritionFacts").style.visibility = 'hidden';
        document.getElementById("addNutritionFacts").style.background = '#4dff4d';
    } else if (itemName.length == 1) {
        document.getElementById("twobytwo").style.visibility = 'hidden';
        document.getElementById("threebythree").style.visibility = 'hidden';
    } else if (itemName.length == 2) {
        document.getElementById("threebythree").style.visibility = 'hidden';
    }

    if (idxValue_GLOBAL == 2) {
        document.getElementById("deleteRow").style.visibility = 'hidden';
        document.getElementById("resetArray").style.visibility = 'hidden';
    }
}

function scroll() {
    setTimeout(function() {
        window.scrollTo(0, 0);
    }, 1)
}

startUp();
initializeSelect();
initializeTextArea();
initializeRadioButton();
var date3 = new Date();
myTable.rows[totalRows_GLOBAL].cells[num_cols_GLOBAL - 1].innerHTML = date3
    .toDateString() +
    ";   " + date3.toTimeString().substring(0, 8);
if (arrayOfGoalNutrients_GLOBAL.length == 0 || arrayOfGoalNutrients_GLOBAL == "") {
    document.getElementById("showGoals").style.visibility = 'hidden';
}
window.onbeforeunload = confirmExit;
checkNumFoodItems(); 
</script>
</body>
</html>
